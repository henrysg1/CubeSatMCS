"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[528],{6528:(z,h,o)=>{o.r(h),o.d(h,{SearchModule:()=>Y});var v=o(7216),i=o(1896),x=o(3906),m=o(7914),y=o(4529),g=o(5619),t=o(5879),p=o(6516),S=o(6593),l=o(6814),T=o(617),Z=o(1274),A=o(3422),P=o(858);function b(n,r){1&n&&(t.ynx(0),t._uU(1,"s"),t.BQk())}const M=function(n){return{c:n}};function $(n,r){if(1&n&&(t.TgZ(0,"div")(1,"mat-icon",4),t._uU(2,"toll"),t.qZA(),t.TgZ(3,"a",5),t._uU(4),t.qZA(),t._UZ(5,"br"),t.qZA()),2&n){const e=r.$implicit,a=t.oxw(2);t.xp6(3),t.Q6J("routerLink",e.link)("queryParams",t.VKq(3,M,a.yamcs.context)),t.xp6(1),t.Oqu(e.label)}}function U(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-toolbar"),t._UZ(1,"span",6),t.TgZ(2,"button",7),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadMoreData())}),t._uU(3,"Load More"),t.qZA(),t._UZ(4,"span",6),t.qZA()}if(2&n){const e=t.oxw().ngIf;t.xp6(2),t.Q6J("disabled",!e.continuationToken)}}function C(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2),t._uU(2),t.YNc(3,b,2,0,"ng-container",1),t._uU(4),t.ALo(5,"async"),t.qZA(),t.YNc(6,$,6,5,"div",3),t.YNc(7,U,5,1,"mat-toolbar",1),t.BQk()),2&n){const e=r.ngIf,a=t.oxw();t.xp6(2),t.AsE(" Showing ",e.resources.length," of ",e.totalSize," result"),t.xp6(1),t.Q6J("ngIf",1!==e.totalSize),t.xp6(1),t.hij(' for "',t.lcZ(5,6,a.term$),'". '),t.xp6(2),t.Q6J("ngForOf",e.resources),t.xp6(1),t.Q6J("ngIf",e.resources.length)}}const I=[{path:"",canActivate:[m.r,x._],canActivateChild:[m.q],runGuardsAndResolvers:"always",component:y.K,children:[{path:"",pathMatch:"full",component:(()=>{class n{constructor(e,a,s,c){this.yamcs=e,this.messageService=c,this.term$=new g.X(null),this.result$=new g.X(null),a.setTitle("Search"),s.queryParamMap.subscribe(k=>{const d=k.get("q")??"";this.fetchPage(d).then(u=>{this.term$.next(d),this.result$.next({resources:this.toResources(u.parameters||[]),totalSize:u.totalSize,continuationToken:u.continuationToken})})})}loadMoreData(){const e=this.term$.value??"",a=this.result$.value?.continuationToken;this.fetchPage(e,a).then(s=>{const c=this.result$.value;c.resources=[...c.resources,...this.toResources(s.parameters||[])],this.result$.next({...c,continuationToken:s.continuationToken})})}toResources(e){return e.map(a=>({label:a.qualifiedName,type:"Parameter",link:["/telemetry/parameters/",a.qualifiedName]}))}fetchPage(e,a){const s=this.yamcs.yamcsClient.getParameters(this.yamcs.instance,{q:e,next:a,limit:50,searchMembers:!0});return s.catch(c=>this.messageService.showError(c)),s}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(p.C8),t.Y36(S.Dx),t.Y36(i.gz),t.Y36(p.ez))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:6,vars:3,consts:[[1,"panel-content"],[4,"ngIf"],[2,"margin-bottom","1em"],[4,"ngFor","ngForOf"],[1,"icon12",2,"vertical-align","middle","margin-right","4px"],[1,"ya-link",3,"routerLink","queryParams"],[2,"flex","1 1 auto"],[1,"ya-button",3,"disabled","click"]],template:function(a,s){1&a&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2,"Search results"),t.qZA(),t.TgZ(3,"div",0),t.YNc(4,C,8,8,"ng-container",1),t.ALo(5,"async"),t.qZA()()),2&a&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,1,s.result$)))},dependencies:[l.sg,l.O5,i.rH,T.Hw,Z.Ye,A.a,P.k,l.Ov],encapsulation:2,changeDetection:0})}return n})()}]}];let J=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[i.Bz.forChild(I),i.Bz]})}return n})(),Y=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[v.m,J]})}return n})()}}]);