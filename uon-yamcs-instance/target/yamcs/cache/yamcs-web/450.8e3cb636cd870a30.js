"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[450],{9450:(Ll,G,f)=>{f.r(G),f.d(G,{AdminModule:()=>$l});var E=f(7216),_=f(1896),j=f(7914),Xt=f(9183),t=f(5879),k=f(4518);let z=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("web.AccessAdminArea")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const q=(e,i)=>(0,t.f3M)(X).canActivate(e,i);let X=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ControlAccess")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const V=(e,i)=>(0,t.f3M)(K).canActivate(e,i);let K=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ControlArchiving")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),W=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ControlServices")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Y=(e,i)=>(0,t.f3M)(tt).canActivate(e,i);let tt=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ReadSystemInfo")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var u=f(6223),r=f(9538),l=f(6516),Z=f(5619),Wt=f(3620),b=f(6593),p=f(6814),U=f(617);const te=[[["app-admin-toolbar"]],[["ya-detail-pane"]],"*"],ee=["app-admin-toolbar","ya-detail-pane","*"];let y=(()=>{class e{constructor(){this.noscroll=!1}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-page"]],inputs:{noscroll:"noscroll"},ngContentSelectors:ee,decls:4,vars:2,consts:[[1,"page-content"]],template:function(n,o){1&n&&(t.F$t(te),t.Hsn(0),t.TgZ(1,"div",0),t.Hsn(2,1),t.Hsn(3,2),t.qZA()),2&n&&(t.xp6(1),t.Udp("overflow",o.noscroll?"hidden":"auto"))},styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto}"],changeDetection:0})}return e})();var O=f(1274);const ae=["*"];let A=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-toolbar"]],ngContentSelectors:ae,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row"),t.Hsn(2),t._UZ(3,"span",1),t.qZA()())},dependencies:[O.Ye,O.rD],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#f7f7f7;box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0})}return e})();const ne=["intervalSelect"];function ie(e,i){if(1&e){const a=t.EpF();t.ynx(0),t._UZ(1,"ya-date-time-input",8)(2,"ya-date-time-input",9),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.applyCustomDates())}),t._uU(4,"Apply"),t.qZA(),t.BQk()}if(2&e){const a=t.oxw();t.xp6(3),t.Q6J("disabled",a.filterForm.invalid)}}function oe(e,i){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.jumpToNow())}),t._uU(2," Jump to now "),t.qZA(),t.BQk()}}function se(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.item.time.substring(11,16)," ")}}function re(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.item.user||"-"," ")}}function ce(e,i){if(1&e&&(t.TgZ(0,"td",27),t._UZ(1,"span",28),t.ALo(2,"actionLogFormat"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,a.item.summary)||"-",t.oJD)}}function le(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_more"),t.qZA())}function ue(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_less"),t.qZA())}function pe(e,i){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,le,2,0,"mat-icon",6),t.YNc(2,ue,2,0,"mat-icon",6),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",!a.expanded),t.xp6(1),t.Q6J("ngIf",a.expanded)}}function me(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt",32),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.key),t.xp6(2),t.Oqu(a.value||"")}}function _e(e,i){if(1&e&&(t.TgZ(0,"td",30)(1,"dl",31)(2,"dt"),t._uU(3,"Service"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.qZA(),t.TgZ(6,"dt"),t._uU(7,"Method"),t.qZA(),t.TgZ(8,"dd"),t._uU(9),t.qZA(),t.YNc(10,me,5,2,"ng-container",7),t.qZA()()),2&e){const a=i.$implicit,n=t.oxw(2);t.uIk("colspan",n.displayedColumns.length),t.xp6(5),t.Oqu(a.item.service),t.xp6(4),t.Oqu(a.item.method),t.xp6(1),t.Q6J("ngForOf",a.requestOptions)}}function de(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const s=t.CHM(a).$implicit;return t.KtG(s.expanded=!s.expanded)}),t.qZA()}2&e&&t.ekj("expanded",i.$implicit.expanded)}function fe(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const s=t.CHM(a).$implicit;return t.KtG(s.expanded=!s.expanded)}),t.qZA()}2&e&&t.ekj("expanded",i.$implicit.expanded)}const ge=function(){return["detail"]};function he(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"table",12),t.ynx(4,13),t.YNc(5,se,2,1,"td",14),t.BQk(),t.ynx(6,15),t.YNc(7,re,2,1,"td",16),t.BQk(),t.ynx(8,17),t.YNc(9,ce,3,3,"td",18),t.BQk(),t.ynx(10,19),t.YNc(11,pe,3,2,"td",20),t.BQk(),t.ynx(12,21),t.YNc(13,_e,11,4,"td",22),t.BQk(),t.YNc(14,de,1,2,"tr",23),t.YNc(15,fe,1,2,"tr",24),t.qZA(),t.BQk()),2&e){const a=i.$implicit,n=i.first,o=t.oxw();t.xp6(1),t.ekj("first",n),t.xp6(1),t.Oqu(a.grouper),t.xp6(1),t.Q6J("dataSource",a.dataSource),t.xp6(11),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,ge))}}function Te(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No activity for the current filter criteria. "),t.qZA())}const R="NO_LIMIT";let et=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.router=n,this.route=o,this.messageService=s,this.filterForm=new u.nJ({filter:new u.p4,interval:new u.p4(R),customStart:new u.p4(null),customStop:new u.p4(null)}),this.displayedColumns=["time","user","summary","actions"],this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}],this.rowGroups$=new Z.X([]),c.setTitle("Admin Area"),this.initializeOptions(),this.loadData(),this.filterForm.get("filter").valueChanges.pipe((0,Wt.b)(400)).forEach(m=>{this.filter=m,this.loadData()}),this.filterForm.get("interval").valueChanges.forEach(m=>{if("CUSTOM"===m){const d=new Date,h=this.validStart||d,v=this.validStop||d;this.filterForm.get("customStart").setValue(l.P6.toISOString(h)),this.filterForm.get("customStop").setValue(l.P6.toISOString(v))}else"NO_LIMIT"===m?(this.validStart=null,this.validStop=null,this.appliedInterval=m,this.loadData()):(this.validStop=new Date,this.validStart=l.P6.subtractDuration(this.validStop,m),this.appliedInterval=m,this.loadData())})}initializeOptions(){const a=this.route.snapshot.queryParamMap;if(a.has("filter")&&(this.filter=a.get("filter")||"",this.filterForm.get("filter").setValue(this.filter)),a.has("interval"))if(this.appliedInterval=a.get("interval"),this.filterForm.get("interval").setValue(this.appliedInterval),"CUSTOM"===this.appliedInterval){const n=a.get("customStart");this.filterForm.get("customStart").setValue(n),this.validStart=l.P6.toDate(n);const o=a.get("customStop");this.filterForm.get("customStop").setValue(o),this.validStop=l.P6.toDate(o)}else"NO_LIMIT"===this.appliedInterval?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=l.P6.subtractDuration(this.validStop,this.appliedInterval));else this.appliedInterval=R,this.validStop=null,this.validStart=null}jumpToNow(){const a=this.filterForm.value.interval;"NO_LIMIT"===a||"CUSTOM"===a?this.filterForm.get("interval").setValue(R):(this.validStop=new Date,this.validStart=l.P6.subtractDuration(this.validStop,a),this.loadData())}applyCustomDates(){this.validStart=l.P6.toDate(this.filterForm.value.customStart),this.validStop=l.P6.toDate(this.filterForm.value.customStop),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();const a={};this.validStart&&(a.start=this.validStart.toISOString()),this.validStop&&(a.stop=this.validStop.toISOString()),this.filter&&(a.q=this.filter);const n=(new Date).toISOString().substr(0,10),o=l.P6.subtractDuration(new Date,"P1D").toISOString().substr(0,10);this.yamcs.yamcsClient.getAuditRecords("_global",a).then(s=>{const c=this.groupByDay(s.records||[]).map(m=>{const d=new r.by;d.data=m.map(v=>{const x=[{key:"Request",value:""}];return v.request&&this.flatten(v.request,x,"    "),{item:v,expanded:!1,requestOptions:x}});let h=m[0].time.substr(0,10);return h===n?h="Today":h===o&&(h="Yesterday"),{grouper:h,dataSource:d}});this.rowGroups$.next(c)}).catch(s=>this.messageService.showError(s))}loadMoreData(){}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filter||null,interval:this.appliedInterval,customStart:"CUSTOM"===this.appliedInterval?this.filterForm.value.customStart:null,customStop:"CUSTOM"===this.appliedInterval?this.filterForm.value.customStop:null},queryParamsHandling:"merge"})}groupByDay(a){const n=[];let o,s=[];for(const c of a){const m=c.time.substr(0,10);m!==o&&(o=m,s.length&&(n.push(s),s=[])),s.push(c)}return s.length&&n.push(s),n}flatten(a,n,o=""){for(const s in a){const c=a[s];if(Array.isArray(c)){n.push({key:o+s,value:""});for(let m=0;m<c.length;m++)n.push({key:o+"    "+s+" "+(m+1),value:c[m]})}else"object"==typeof c?(n.push({key:o+s,value:""}),this.flatten(c,n,o+"    ")):n.push({key:o+s,value:""+c})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.ez),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(ne,5),2&n){let s;t.iGM(s=t.CRH())&&(o.intervalSelect=s.first)}},decls:15,vars:10,consts:[[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","filter","placeholder","Filter by text search"],["icon","access_time","formControlName","interval",3,"options"],["intervalSelect",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","customStart"],["formControlName","customStop"],[1,"ya-button",3,"disabled","click"],[1,"ya-button",3,"click"],["mat-table","","multiTemplateDataRows","",1,"ya-data-table",2,"border-top","1px solid rgba(0, 0, 0, 0.1)",3,"dataSource"],["matColumnDef","time"],["mat-cell","","style","width: 100px",4,"matCellDef"],["matColumnDef","user"],["mat-cell","","style","width: 200px",4,"matCellDef"],["matColumnDef","summary"],["mat-cell","","style","width: 400px",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","style","width: 20px; text-align: right;",4,"matCellDef"],["matColumnDef","detail"],["mat-cell","",4,"matCellDef"],["mat-row","","class","item-row",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-cell","",2,"width","100px"],["mat-cell","",2,"width","200px"],["mat-cell","",2,"width","400px"],[3,"innerHTML"],["mat-cell","",2,"width","20px","text-align","right"],["mat-cell",""],[1,"dl-horizontal"],[2,"white-space","pre"],["mat-row","",1,"item-row",3,"click"],["mat-row","",1,"item-detail",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Activity "),t.qZA(),t.TgZ(3,"div",0)(4,"form",1)(5,"div",2),t._UZ(6,"ya-search-filter",3)(7,"ya-select",4,5),t.YNc(9,ie,5,1,"ng-container",6),t.YNc(10,oe,3,0,"ng-container",6),t.qZA()(),t.YNc(11,he,16,7,"ng-container",7),t.ALo(12,"async"),t.YNc(13,Te,2,0,"ya-empty-message",6),t.ALo(14,"async"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formGroup",o.filterForm),t.xp6(3),t.Q6J("options",o.intervalOptions),t.xp6(2),t.Q6J("ngIf","CUSTOM"===o.filterForm.value.interval),t.xp6(1),t.Q6J("ngIf","CUSTOM"!==o.filterForm.value.interval),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,6,o.rowGroups$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(14,8,o.rowGroups$).length))},dependencies:[p.sg,p.O5,u._Y,u.JJ,u.JL,u.sg,u.u,U.Hw,r.BZ,r.w1,r.Dz,r.nj,r.ev,r.Gk,l.t,l.RR,l.cF,l.Hr,y,A,p.Ov,l.NE],styles:["h4[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:.5em;font-size:12px}h4.first[_ngcontent-%COMP%]{margin-top:0}tr.item-row.expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}tr.item-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:40px!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{border-right:1px solid #e5e5e5}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{line-height:20px}.dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{min-height:20px}.ya-data-table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]:hover{background:inherit}"],changeDetection:0})}return e})();var at=f(2181),C=f(2296),P=f(4104);const nt=function(e){return["/admin/databases",e,"tables"]};function Ze(e,i){if(1&e&&(t.TgZ(0,"a",3),t._uU(1," Tables "),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.Q6J("routerLink",t.VKq(1,nt,a.name))}}const it=function(e){return["/admin/databases",e,"streams"]};function be(e,i){if(1&e&&(t.TgZ(0,"a",3),t._uU(1," Streams "),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.Q6J("routerLink",t.VKq(1,it,a.name))}}function xe(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",2),t._uU(2,"navigate_next"),t.qZA(),t.YNc(3,Ze,2,3,"a",7),t.YNc(4,be,2,3,"a",7),t.TgZ(5,"mat-icon",2),t._uU(6,"navigate_next"),t.qZA(),t._uU(7),t.BQk()),2&e){const a=i.ngIf;t.xp6(3),t.Q6J("ngIf","table"===a.type),t.xp6(1),t.Q6J("ngIf","stream"===a.type),t.xp6(3),t.hij(" ",a.name," ")}}const ye=function(e){return["/admin/databases",e,"shell"]};function Ae(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",8,9),t._uU(3," Tables "),t.qZA(),t.TgZ(4,"a",8,10),t._uU(6," Streams "),t.qZA(),t.TgZ(7,"a",8,11),t._uU(9," DB Shell "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),n=t.MAs(5),o=t.MAs(8),s=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.VKq(6,nt,s.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.VKq(8,it,s.name))("active",n.isActive),t.xp6(3),t.Q6J("routerLink",t.VKq(10,ye,s.name))("active",o.isActive)}}const ve=function(e,i){return["/admin/databases",e,"tables",i,"info"]},Ue=function(e,i){return["/admin/databases",e,"tables",i,"data"]},Ce=function(e,i){return["/admin/databases",e,"tables",i,"script"]};function we(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",8,12),t._uU(3," Info "),t.qZA(),t.TgZ(4,"a",8,13),t._uU(6," Data "),t.qZA(),t.TgZ(7,"a",8,14),t._uU(9," Script "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),n=t.MAs(5),o=t.MAs(8),s=t.oxw().ngIf,c=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.WLB(6,ve,c.name,s.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(9,Ue,c.name,s.name))("active",n.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(12,Ce,c.name,s.name))("active",o.isActive)}}const qe=function(e,i){return["/admin/databases",e,"streams",i,"columns"]},De=function(e,i){return["/admin/databases",e,"streams",i,"data"]},Se=function(e,i){return["/admin/databases",e,"streams",i,"script"]};function Pe(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",8,15),t._uU(3," Columns "),t.qZA(),t.TgZ(4,"a",8,16),t._uU(6," Data "),t.qZA(),t.TgZ(7,"a",8,17),t._uU(9," Script "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),n=t.MAs(5),o=t.MAs(8),s=t.oxw().ngIf,c=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.WLB(6,qe,c.name,s.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(9,De,c.name,s.name))("active",n.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(12,Se,c.name,s.name))("active",o.isActive)}}function Ye(e,i){if(1&e&&(t.ynx(0),t.YNc(1,we,10,15,"ng-container",0),t.YNc(2,Pe,10,15,"ng-container",0),t.BQk()),2&e){const a=i.ngIf;t.xp6(1),t.Q6J("ngIf","table"===a.type),t.xp6(1),t.Q6J("ngIf","stream"===a.type)}}const Ne=function(e){return["/admin/databases",e]};function ke(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"account_tree"),t.qZA()(),t.TgZ(5,"mat-icon",2),t._uU(6,"navigate_next"),t.qZA(),t.TgZ(7,"a",3),t._uU(8),t.qZA(),t.YNc(9,xe,8,3,"ng-container",0),t.ALo(10,"async"),t.qZA(),t.TgZ(11,"nav",4),t.YNc(12,Ae,10,12,"ng-container",0),t.ALo(13,"async"),t.YNc(14,Ye,3,2,"ng-container",0),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"div",5)(17,"mat-tab-nav-panel",null,6),t._UZ(19,"router-outlet"),t.qZA()()()),2&e){const a=i.ngIf,n=t.MAs(18),o=t.oxw();t.xp6(7),t.Q6J("routerLink",t.VKq(13,Ne,a.name)),t.xp6(1),t.hij(" ",a.name," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(10,7,o.object$)),t.xp6(2),t.Q6J("mat-stretch-tabs",!1)("tabPanel",n),t.xp6(1),t.Q6J("ngIf",!t.lcZ(13,9,o.object$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,11,o.object$))}}let ot=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=o,this.object$=new Z.X(null),this.user=c.getUser(),this.routerSubscription=a.events.pipe((0,at.h)(d=>d instanceof _.m2)).subscribe(d=>{const h=n.snapshot.firstChild;let v=h.paramMap.get("table");v?this.object$.next({type:"table",name:v}):(v=h.paramMap.get("stream"),this.object$.next(v?{type:"stream",name:v}:null))});const m=n.snapshot.paramMap.get("database");s.setTitle(m),this.database$=o.yamcsClient.getDatabase(m)}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx),t.Y36(k.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","/admin/databases"],[1,"icon14","sep"],[1,"ya-link","ya-header-link",3,"routerLink"],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],[1,"outlet-wrapper"],["tabPanel",""],["class","ya-link ya-header-link",3,"routerLink",4,"ngIf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["rlb","routerLinkActive"],["rlc","routerLinkActive"],["rla1","routerLinkActive"],["rla2","routerLinkActive"],["rla3","routerLinkActive"],["rlb1","routerLinkActive"],["rlb2","routerLinkActive"],["rlb3","routerLinkActive"]],template:function(n,o){1&n&&(t.YNc(0,ke,20,15,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.database$))},dependencies:[p.O5,_.lC,_.rH,_.Od,C.o6,U.Hw,P.BU,P.sW,P.Nj,y,A,p.Ov],styles:[".outlet-wrapper[_ngcontent-%COMP%]{overflow:auto;position:absolute;inset:37px 0 0}.sep[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"],changeDetection:0})}return e})();class st{constructor(i=""){this.text=i,this.edited=i}backspace(i){if(i>0){const a=this.edited.split("");a.splice(i-1,1),this.edited=a.join("")}}insert(i,a){const n=this.edited.split("");n.splice(i,0,a),this.edited=n.join("")}get value(){return this.edited}commit(){this.text=this.edited}revert(){this.edited=this.text}}class Qe{constructor(i){this.shell=i,this.history=[],this.pointer=-1,this.lastItem=new st,this.cursor=0,this.history.push(this.lastItem),this.pointer=0}consume(i){switch(i){case"Backspace":this.history[this.pointer].backspace(this.cursor),this.cursor=Math.max(0,this.cursor-1);break;case"ArrowUp":this.pointer=Math.max(0,this.pointer-1),this.cursor=this.history[this.pointer].value.length;break;case"ArrowDown":this.pointer=Math.min(this.history.length-1,this.pointer+1),this.cursor=this.history[this.pointer].value.length;break;case"ArrowLeft":this.cursor=Math.max(0,this.cursor-1);break;case"ArrowRight":this.cursor=Math.min(this.history[this.pointer].value.length,this.cursor+1);break;default:this.history[this.pointer].insert(this.cursor,i),this.cursor+=i.length}this.notifyChange()}notifyChange(){this.shell.repaintCommandLine()}abort(){const i=this.history[this.pointer].value;for(const a of this.history)a.revert();return this.cursor=0,this.pointer=this.history.length-1,this.notifyChange(),i}peek(){return this.history[this.pointer].value}take(){const i=this.history[this.pointer].value;for(let a=0;a<this.history.length;a++)a===this.pointer||a===this.history.length-1?this.history[a].revert():this.history[a].commit();if(i){const a=new st(i);this.history.splice(this.history.length-1,0,a),this.pointer=this.history.length-1}return this.cursor=0,this.notifyChange(),i}moveCursorToHome(){this.cursor=0,this.notifyChange()}moveCursorToEnd(){this.cursor=this.history[this.pointer].value.length,this.notifyChange()}}class Ie{constructor(i){this.dirty=!1,this.pointer=0,this.buffer=Array(i).fill(void 0)}add(i){this.buffer[this.pointer]=i,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(void 0===this.prevPointer)return[];{const i=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(i).filter(n=>void 0!==n)}}}const Je=["shell"],Oe=["bottom"];function Re(e,i){1&e&&t._UZ(0,"ya-dots",8)}function $e(e,i){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a)}}function Le(e,i){if(1&e&&(t.TgZ(0,"pre"),t._uU(1,"    "),t.TgZ(2,"code"),t._uU(3,"\n      "),t.TgZ(4,"span",9),t.YNc(5,$e,3,1,"ng-container",10),t.ALo(6,"async"),t.qZA(),t._uU(7),t.ALo(8,"async"),t._UZ(9,"span",11),t.ALo(10,"async"),t._uU(11,"\n      "),t.qZA(),t._uU(12,"\n  "),t.qZA()),2&e){const a=t.oxw();t.xp6(5),t.Q6J("ngForOf",t.lcZ(6,3,a.lines$)),t.xp6(2),t.hij("\n      ",t.lcZ(8,5,a.prompt$),"\n      "),t.xp6(2),t.Q6J("innerHTML",t.lcZ(10,7,a.commandLineHTML$),t.oJD)}}let rt=(()=>{class e{constructor(a){this.sanitizer=a,this.scrollBuffer=new Ie(500),this.lines$=new Z.X([]),this.ready$=new Z.X(!1),this.prompt$=new Z.X(""),this.focused$=new Z.X(!1),this.commandLineHTML$=new Z.X(""),this.command=new t.vpe,this.commandLine=new Qe(this),this.repaintCommandLine()}ngAfterViewInit(){this.shellEl.nativeElement.focus()}onFocus(){this.focused$.next(!0)}onFocusOut(){this.focused$.next(!1)}onPaste(a){const n=a.clipboardData?.getData("Text");n&&this.commandLine.consume(n),a.preventDefault()}printLines(a){for(const n of a)this.scrollBuffer.add(n);this.lines$.next(this.scrollBuffer.snapshot()),this.scrollToBottom()}printLine(a=""){this.scrollBuffer.add(a),this.lines$.next(this.scrollBuffer.snapshot()),this.scrollToBottom()}setPrompt(a){this.prompt$.next(a)}handleKeyDownEvent(a){if(a.ctrlKey)switch(a.key){case"a":this.commandLine.moveCursorToHome(),a.preventDefault();break;case"c":const n=this.commandLine.abort();this.printLine(this.prompt$.value+n),a.preventDefault();break;case"e":this.commandLine.moveCursorToEnd(),a.preventDefault();break;case"h":this.commandLine.consume("Backspace"),a.preventDefault();break;case"l":this.scrollBuffer.reset(),this.lines$.next(this.scrollBuffer.snapshot()),a.preventDefault()}else if(!a.shiftKey&&!a.metaKey)switch(a.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Backspace":this.commandLine.consume(a.key),a.preventDefault()}}handleKeyboardEvent(a){if(this.focused$.value&&!(a.ctrlKey||a.altKey||a.metaKey))if("Enter"===a.key){const n=this.commandLine.take();this.printLine(this.prompt$.value+n),this.command.next(n.trim()),a.preventDefault()}else 1===a.key.length&&(this.scrollToBottom(),this.commandLine.consume(a.key),a.preventDefault())}repaintCommandLine(){let a="",n=!1;const o=this.commandLine.peek(),s=this.commandLine.cursor;for(let c=0;c<o.length;c++)s===c?(a+='<span class="cursor">'+o[c]+"</span>",n=!0):a+=o[c];n||(a+='<span class="cursor"> </span>'),this.commandLineHTML$.next(this.sanitizer.bypassSecurityTrustHtml(a))}scrollToBottom(){window.setTimeout(()=>{this.bottomAnchor.nativeElement.scrollIntoView()})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(b.H7))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-shell"]],viewQuery:function(n,o){if(1&n&&(t.Gf(Je,5),t.Gf(Oe,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.shellEl=s.first),t.iGM(s=t.CRH())&&(o.bottomAnchor=s.first)}},hostBindings:function(n,o){1&n&&t.NdJ("keydown",function(c){return o.handleKeyDownEvent(c)},!1,t.evT)("keypress",function(c){return o.handleKeyboardEvent(c)},!1,t.evT)},outputs:{command:"command"},decls:11,vars:10,consts:[["tabindex","0","contenteditable","true","spellcheck","false",1,"shell",3,"focus","focusout","paste"],["shell",""],[1,"top"],["top",""],["color","#3f0",4,"ngIf"],[4,"ngIf"],[1,"bottom"],["bottom",""],["color","#3f0"],[1,"preserved"],[4,"ngFor","ngForOf"],[1,"preserved",3,"innerHTML"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("focus",function(){return o.onFocus()})("focusout",function(){return o.onFocusOut()})("paste",function(c){return o.onPaste(c)}),t.ALo(2,"async"),t._UZ(3,"div",2,3),t.YNc(5,Re,1,0,"ya-dots",4),t.ALo(6,"async"),t.YNc(7,Le,13,9,"pre",5),t.ALo(8,"async"),t._UZ(9,"div",6,7),t.qZA()),2&n&&(t.ekj("focused",t.lcZ(2,4,o.focused$)),t.xp6(5),t.Q6J("ngIf",!t.lcZ(6,6,o.ready$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,8,o.ready$)))},dependencies:[p.sg,p.O5,l.Zy,p.Ov],styles:[".shell[_ngcontent-%COMP%]{position:absolute;inset:0;padding:5px;background-color:#24292e;overflow:auto;outline:none;caret-color:transparent}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{visibility:hidden;line-height:0}pre[_ngcontent-%COMP%], code[_ngcontent-%COMP%]{white-space:normal;font-family:Roboto Mono,monospace;font-size:12px;line-height:14px}pre[_ngcontent-%COMP%]{background:#24292e;border:none;overflow:auto;border-radius:0;margin:0;padding:0;color:#3f0}.preserved[_ngcontent-%COMP%]{white-space:pre}code[_ngcontent-%COMP%]{padding:0;background:0 0}.shell.focused[_ngcontent-%COMP%]     .cursor{background-color:#3f0;color:#24292e}"],changeDetection:0})}return e})();class Me{constructor(i){this.columns=i,this.widths=[],this.pendingRows=[],this.printedRowCount=0;for(const a of i)this.widths.push(a.name.length)}add(i){const a=[];for(let n=0;n<i.values.length;n++){const o=l.P6.printValue(i.values[n])||"";a.push(o),this.widths[n]=Math.max(o.length,this.widths[n])}this.pendingRows.push(a)}printPending(){const i=[],a=this.columns.map(n=>n.name);0===this.printedRowCount&&(i.push(this.generateSeparator()),i.push(this.printRow(a)),i.push(this.generateSeparator()));for(const n of this.pendingRows)i.push(this.printRow(n)),this.printedRowCount++;return i}printRow(i){let a="";for(let n=0;n<this.columns.length;n++)a+="| ",a+=i[n],a+=" ".repeat(this.widths[n]-i[n].length),a+=" ";return a+"|"}printSummary(){const i=[];return i.push(this.generateSeparator()),i.push(1===this.printedRowCount?"1 row in set":`${this.printedRowCount} rows in set`),i.push(""),i}generateSeparator(){let i="";for(const a of this.widths)i+="+-"+"-".repeat(a)+"-";return i+="+",i}}let ct=(()=>{class e{constructor(a,n){this.yamcs=n;const s=a.snapshot.parent.paramMap.get("database");this.changeDatabase(s)}ngAfterViewInit(){this.shell.printLine("Yamcs DB Shell"),this.shell.printLine("Type help or ? for help.\n")}handleCommand(a){if(!a)return;const n=a.split(";").map(o=>o.trim());for(const o of n)o&&this.handleStatement(o)}changeDatabase(a){this.yamcs.yamcsClient.getDatabase(a).then(n=>{this.database=n,this.shell.ready$.next(!0),this.shell.setPrompt(n.name+"> ")})}handleStatement(a){if("?"===a||a.startsWith("help")){const n=a.split(/\s+/,2);n.length>1?this.shell.printLine("use"===n[1]?"Use another database, provided as argument.":"*** No help on "+n[1]):(this.shell.printLine(),this.shell.printLine("List of dbshell commands:"),this.shell.printLine("?        Show help."),this.shell.printLine('help     List available commands with "help" or detailed help with "help cmd".'),this.shell.printLine("use      Use another database, provided as argument."),this.shell.printLine())}else if(a.startsWith("use")){const n=a.split(/\s+/,2);1===n.length?this.shell.printLine("*** Missing argument"):this.changeDatabase(n[1])}else this.yamcs.yamcsClient.executeSQL(this.database.name,a).then(n=>{if(n.rows){const o=new Me(n.columns||[]);for(const s of n.rows||[])o.add(s);this.shell.printLines(o.printPending()),this.shell.printLines(o.printSummary())}else this.shell.printLine("Empty set\n")}).catch(n=>{this.shell.printLine(`${n}`)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(rt,5),2&n){let s;t.iGM(s=t.CRH())&&(o.shell=s.first)}},decls:1,vars:0,consts:[[3,"command"]],template:function(n,o){1&n&&(t.TgZ(0,"app-shell",0),t.NdJ("command",function(c){return o.handleCommand(c)}),t.qZA())},dependencies:[rt],encapsulation:2,changeDetection:0})}return e})();function Fe(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t._UZ(5,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.type)}}function Be(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td",4),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a)}}function He(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"h3"),t._uU(2,"Columns"),t.qZA(),t.TgZ(3,"table",2)(4,"tr")(5,"th",3),t._uU(6,"Column"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Type"),t.qZA(),t._UZ(9,"th",4),t.qZA(),t.YNc(10,Fe,6,2,"tr",5),t.qZA(),t.TgZ(11,"p"),t._uU(12,"\xa0"),t.qZA(),t.TgZ(13,"h3"),t._uU(14,"Subscribers"),t.qZA(),t.TgZ(15,"table",2),t.YNc(16,Be,3,1,"tr",5),t.qZA()()),2&e){const a=i.ngIf;t.xp6(10),t.Q6J("ngForOf",a.columns),t.xp6(6),t.Q6J("ngForOf",a.subscribers)}}let lt=(()=>{class e{constructor(a,n){const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("stream");this.stream$=n.yamcsClient.getStream(s,c)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],["yaDataTable","",1,"expand"],["width","200"],[1,"expand"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.YNc(0,He,17,2,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.stream$))},dependencies:[p.sg,p.O5,l.Gj,p.Ov],encapsulation:2,changeDetection:0})}return e})();var I=f(4643),F=f(8337);class Ge{constructor(){this.dirty=!1,this.bufferSize=500,this.pointer=0,this.buffer=Array(this.bufferSize).fill(void 0)}add(i){this.buffer[this.pointer]=i,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(void 0===this.prevPointer)return[];{const i=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(i).filter(n=>void 0!==n)}}}class Ee extends F.o2{constructor(i,a,n,o){super(),this.yamcs=i,this.database=n,this.stream=o,this.streamData$=new Z.X([]),this.loading$=new Z.X(!1),this.streaming$=new Z.X(!1),this.columns$=new Z.X([]),this.streamBuffer=new Ge,this.syncSubscription=a.sync(()=>{this.streamBuffer.dirty&&!this.loading$.getValue()&&(this.streamData$.next(this.streamBuffer.snapshot().reverse()),this.streamBuffer.dirty=!1)})}connect(){return this.streamData$}startStreaming(){this.streaming$.next(!0),this.streamSubscription=this.yamcs.yamcsClient.createStreamSubscription({instance:this.database,stream:this.stream},i=>{if(!this.loading$.getValue()){i.animate=!0,this.streamBuffer.add(i);const a=this.columns$.value;for(const n of i.column)-1===a.indexOf(n.name)&&a.push(n.name);this.columns$.next([...a])}})}stopStreaming(){this.streamSubscription&&this.streamSubscription.cancel(),this.streaming$.next(!1)}disconnect(){this.streamSubscription&&this.streamSubscription.cancel(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.streamData$.complete(),this.loading$.complete(),this.streaming$.complete()}}var ut=f(3170);function je(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"value"),t.BQk()),2&e){const a=t.oxw().index,n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,n.streamData.column[a].value)||"-"," ")}}function ze(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"app-hex",4),t.BQk()),2&e){const a=t.oxw().index,n=t.oxw();t.xp6(1),t.Q6J("base64String",n.streamData.column[a].value.binaryValue)}}function Xe(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,je,3,3,"ng-container",3),t.YNc(5,ze,2,1,"ng-container",3),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","BINARY"!==a.value.type),t.xp6(1),t.Q6J("ngIf","BINARY"===a.value.type)}}let Ve=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-stream-data"]],inputs:{streamData:"streamData"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"block-title"],[1,"block"],[4,"ngIf"],[3,"base64String"]],template:function(n,o){1&n&&t.YNc(0,Xe,6,3,"ng-container",0),2&n&&t.Q6J("ngForOf",o.streamData.column)},dependencies:[p.sg,p.O5,ut.p,l.VC],encapsulation:2,changeDetection:0})}return e})(),$=(()=>{class e{transform(a,n){if(!a||0===a.length)return null;for(const o of a)if(o.name===n)return o.value;return null}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275pipe=t.Yjl({name:"columnValue",type:e,pure:!0})}return e})();function Ke(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-toolbar"),t._uU(2," Tuple "),t.qZA(),t.TgZ(3,"div",12),t._UZ(4,"app-stream-data",13),t.qZA(),t.BQk()),2&e){const a=i.ngIf;t.xp6(4),t.Q6J("streamData",a)}}function We(e,i){1&e&&(t.TgZ(0,"ya-detail-toolbar"),t._uU(1," Select a tuple "),t.qZA())}function ta(e,i){if(1&e&&(t.TgZ(0,"th",16),t._uU(1),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a)}}function ea(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=i.$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,a.column,n))||"-"," ")}}function aa(e,i){1&e&&(t.ynx(0,14),t.YNc(1,ta,2,1,"th",15),t.YNc(2,ea,4,6,"td",9),t.BQk()),2&e&&t.Q6J("cdkColumnDef",i.$implicit)}function na(e,i){1&e&&t._UZ(0,"th",18)}function ia(e,i){1&e&&t._UZ(0,"td",17)}function oa(e,i){1&e&&t._UZ(0,"tr",19)}const sa=function(e){return{selected:e}};function ra(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",20),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.selectStreamData(s))}),t.ALo(1,"async"),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw();t.Q6J("@rowAnimation",a.animate)("ngClass",t.VKq(4,sa,a===t.lcZ(1,2,n.selectedStreamData$)))}}let pt=(()=>{class e{constructor(a,n,o){this.displayedColumns=["actions"],this.selectedStreamData$=new Z.X(null);const s=a.snapshot.parent,c=s.parent.paramMap.get("database"),m=s.paramMap.get("stream");this.dataSource=new Ee(n,o,c,m),this.availableColumns$=this.dataSource.columns$}ngAfterViewInit(){this.columnDefinitionsSubscription=this.columnDefinitions.changes.subscribe(()=>{this.columnDefinitions.forEach(a=>{-1===this.displayedColumns.indexOf(a.name)&&this.displayedColumns.splice(this.displayedColumns.length-1,0,a.name)})}),this.dataSource.startStreaming()}selectStreamData(a){this.selectedStreamData$.next(a)}ngOnDestroy(){this.columnDefinitionsSubscription&&this.columnDefinitionsSubscription.unsubscribe(),this.dataSource&&this.dataSource.stopStreaming()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(I.fo,5),2&n){let s;t.iGM(s=t.CRH())&&(o.columnDefinitions=s)}},decls:16,vars:10,consts:[[4,"ngIf","ngIfElse"],["noSelection",""],[1,"data-table-wrapper"],[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["table",""],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"padding","0 16px"],[3,"streamData"],[3,"cdkColumnDef"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"ya-detail-pane"),t.YNc(1,Ke,5,1,"ng-container",0),t.ALo(2,"async"),t.YNc(3,We,2,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(5,"div",2)(6,"div",3)(7,"table",4,5),t.YNc(9,aa,3,1,"ng-container",6),t.ALo(10,"async"),t.ynx(11,7),t.YNc(12,na,1,0,"th",8),t.YNc(13,ia,1,0,"td",9),t.BQk(),t.YNc(14,oa,1,0,"tr",10),t.YNc(15,ra,2,6,"tr",11),t.qZA()()()),2&n){const s=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,6,o.selectedStreamData$))("ngIfElse",s),t.xp6(6),t.Q6J("dataSource",o.dataSource),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,8,o.availableColumns$)),t.xp6(5),t.Q6J("cdkHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("cdkRowDefColumns",o.displayedColumns)}},dependencies:[p.mk,p.sg,p.O5,I.Sq,I.O_,I.D5,I.fo,I.s$,r.BZ,r.w1,r.ge,r.ev,r.XQ,r.Gk,l.J8,l.MD,Ve,p.Ov,l.VC,$],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[l.q5]},changeDetection:0})}return e})();function ca(e,i){1&e&&(t.ynx(0),t._UZ(1,"router-outlet"),t.BQk())}let mt=(()=>{class e{constructor(a,n,o){this.yamcs=n;const s=a.snapshot,c=s.parent.paramMap.get("database"),m=s.paramMap.get("stream");o.setTitle(m),this.stream$=n.yamcsClient.getStream(c,m)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,o){1&n&&(t.YNc(0,ca,2,0,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.stream$))},dependencies:[p.O5,_.lC,p.Ov],encapsulation:2,changeDetection:0})}return e})();const _t="&nbsp;&nbsp;&nbsp;&nbsp;",L=/[()]|(, ")/;function dt(e){if(!e)return e;const i=[];let a="",n=e.search(L);for(;-1!==n;)"("===e[n]?(i.push(e.substring(0,n+1)),a+=_t,i.push("<br>",a),n=(e=e.substring(n+1)).search(L)):")"===e[n]?(i.push(e.substring(0,n)),a=a.replace(_t,""),i.push("<br>",a),i.push(")"),n=(e=e.substring(n+1)).search(L)):(i.push(e.substring(0,n+1)),i.push("<br>",a),i.push('"'),n=(e=e.substring(n+3)).search(L));let o=i.join("")+e;return o=o.replace(/(engine|histogram|partition|primary|table_format)/g,"<br>$1"),function la(e){return e.replace(/(BINARY|ENUM|HRES_TIMESTAMP|INT|LONG|PARAMETER_VALUE|PROTOBUF|STRING|TIMESTAMP)/g,'<span class="dtype">$1</span>').replace(/([(),]+)/g,'<span class="paren">$1</span>').replace(/(auto_increment|create|compressed|histogram|engine|primary key|table(_format)?|stream)/g,'<span class="kw">$1</span>').replace(/(partition by time(_and_value)?|partition by value)/g,'<span class="kw">$1</span>')}(o)}function ua(e,i){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"code",2),t.qZA()),2&e){const a=i.ngIf,n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.formatSQL(a.script),t.oJD)}}let ft=(()=>{class e{constructor(a,n){const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("stream");this.stream$=n.yamcsClient.getStream(s,c)}formatSQL(a){return dt(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content sql",4,"ngIf"],[1,"panel-content","sql"],[3,"innerHTML"]],template:function(n,o){1&n&&(t.YNc(0,ua,2,1,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.stream$))},dependencies:[p.O5,p.Ov],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0})}return e})();var g=f(3566);function pa(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Name"),t.qZA())}function ma(e,i){if(1&e&&(t.TgZ(0,"td",12)(1,"a",13),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function _a(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Data count"),t.qZA())}function da(e,i){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.dataCount)," ")}}function fa(e,i){1&e&&t._UZ(0,"th",15)}function ga(e,i){1&e&&t._UZ(0,"td",12)}function ha(e,i){1&e&&t._UZ(0,"tr",16)}function Ta(e,i){1&e&&t._UZ(0,"tr",17)}let gt=(()=>{class e{constructor(a,n){this.yamcs=n,this.displayedColumns=["name","dataCount","actions"],this.dataSource=new r.by,this.itemsByName={},this.database=a.snapshot.parent.paramMap.get("database")}ngAfterViewInit(){this.dataSource.sort=this.sort,this.streamStatisticsSubscription=this.yamcs.yamcsClient.createStreamStatisticsSubscription({instance:this.database},a=>{this.processStreamEvent(a)})}processStreamEvent(a){switch(a.type){case"CREATED":case"UPDATED":this.itemsByName[a.name]={name:a.name,dataCount:a.dataCount},this.updateDataSource();break;case"DELETED":delete this.itemsByName[a.name],this.updateDataSource();break;default:console.error("Unexpected stream update of type "+a.type)}}updateDataSource(){const a=Object.values(this.itemsByName);a.sort((n,o)=>n.name.localeCompare(o.name)),this.dataSource.data=a}ngOnDestroy(){this.streamStatisticsSubscription&&this.streamStatisticsSubscription.cancel()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:13,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataCount"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,pa,2,0,"th",3),t.YNc(4,ma,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,_a,2,0,"th",3),t.YNc(7,da,3,3,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,fa,1,0,"th",8),t.YNc(10,ga,1,0,"td",4),t.BQk(),t.YNc(11,ha,1,0,"tr",9),t.YNc(12,Ta,1,0,"tr",10),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[_.rH,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,p.JJ],encapsulation:2,changeDetection:0})}return e})();var S=f(2596);function Za(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2)(2,"mat-icon",3),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._uU(6),t.ALo(7,"value"),t.ALo(8,"columnValue"),t.qZA(),t.BQk()),2&e){const a=i.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",a.name," "),t.xp6(2),t.hij(" ",t.lcZ(7,2,t.xi3(8,4,n.record.column,a.name))||"-"," ")}}function ba(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.BQk()),2&e){const a=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,n.record.column,a.name))||"-"," ")}}function xa(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"app-hex",7),t.BQk()),2&e){const a=i.ngIf;t.xp6(1),t.Q6J("base64String",a.binaryValue)}}function ya(e,i){if(1&e&&(t.ynx(0),t.YNc(1,xa,2,1,"ng-container",6),t.ALo(2,"columnValue"),t.BQk()),2&e){const a=t.oxw().$implicit,n=t.oxw(),o=t.MAs(5);t.xp6(1),t.Q6J("ngIf",t.xi3(2,2,n.record.column,a.name))("ngIfElse",o)}}function Aa(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,ba,4,6,"ng-container",5),t.YNc(5,ya,3,5,"ng-container",5),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","BINARY"!==a.type&&("PROTOBUF(com.google.protobuf.Struct)"===a.type||!a.type.startsWith("PROTOBUF"))),t.xp6(1),t.Q6J("ngIf","BINARY"===a.type||"PROTOBUF(com.google.protobuf.Struct)"!==a.type&&a.type.startsWith("PROTOBUF"))}}function va(e,i){1&e&&t._uU(0,"-")}let Ua=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-record"]],inputs:{table:"table",record:"record"},decls:6,vars:2,consts:[[4,"ngFor","ngForOf"],["dash",""],[1,"block-title"],["matTooltip","Key Column",1,"icon12",2,"color","gold"],[1,"block"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"base64String"]],template:function(n,o){1&n&&(t.YNc(0,Za,9,7,"ng-container",0),t.YNc(1,Aa,6,3,"ng-container",0),t.TgZ(2,"p"),t._uU(3,"\xa0"),t.qZA(),t.YNc(4,va,1,0,"ng-template",null,1,t.W1O)),2&n&&(t.Q6J("ngForOf",o.table.keyColumn),t.xp6(1),t.Q6J("ngForOf",o.table.valueColumn))},dependencies:[p.sg,p.O5,U.Hw,S.gM,ut.p,l.VC,$],encapsulation:2,changeDetection:0})}return e})();function Ca(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-toolbar"),t._uU(2," Record "),t.qZA(),t.TgZ(3,"div",6),t._UZ(4,"app-record",7),t.qZA(),t.BQk()),2&e){const a=i.ngIf,n=t.oxw().ngIf;t.xp6(4),t.Q6J("table",n)("record",a)}}function wa(e,i){1&e&&(t.TgZ(0,"ya-detail-toolbar"),t._uU(1," Select a record "),t.qZA())}function qa(e,i){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.name)}}function Da(e,i){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.name)}}function Sa(e,i){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=i.$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,n.column,a.name))||"-"," ")}}function Pa(e,i){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=i.$implicit,n=t.oxw().$implicit;t.ekj("mono","BINARY"===a.type),t.xp6(1),t.hij(" ",t.lcZ(2,3,t.xi3(3,5,n.column,a.name))||"-"," ")}}const Ya=function(e){return{selected:e}};function Na(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",12),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(4);return t.KtG(c.selectRecord(s))}),t.ALo(1,"async"),t.YNc(2,Sa,4,6,"td",10),t.YNc(3,Pa,4,8,"td",13),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw(3).ngIf,o=t.oxw();t.Q6J("ngClass",t.VKq(5,Ya,a===t.lcZ(1,3,o.selectedRecord$))),t.xp6(2),t.Q6J("ngForOf",n.keyColumn),t.xp6(1),t.Q6J("ngForOf",n.valueColumn)}}function ka(e,i){if(1&e&&(t.TgZ(0,"table",9)(1,"tr"),t.YNc(2,qa,2,1,"th",10),t.YNc(3,Da,2,1,"th",10),t.qZA(),t.YNc(4,Na,4,7,"tr",11),t.qZA()),2&e){const a=t.oxw().ngIf,n=t.oxw().ngIf;t.xp6(2),t.Q6J("ngForOf",n.keyColumn),t.xp6(1),t.Q6J("ngForOf",n.valueColumn),t.xp6(1),t.Q6J("ngForOf",a)}}function Qa(e,i){if(1&e&&(t.ynx(0),t.YNc(1,ka,5,3,"table",8),t.BQk()),2&e){const a=i.ngIf;t.oxw(2);const n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.length)("ngIfElse",n)}}function Ia(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-pane"),t.YNc(2,Ca,5,2,"ng-container",2),t.ALo(3,"async"),t.YNc(4,wa,2,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,Qa,2,2,"ng-container",2),t.ALo(9,"async"),t.qZA()(),t.BQk()),2&e){const a=t.MAs(5),n=t.oxw(),o=t.MAs(3);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,n.selectedRecord$))("ngIfElse",a),t.xp6(6),t.Q6J("ngIf",t.lcZ(9,6,n.records$))("ngIfElse",o)}}function Ja(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," Empty table. "),t.qZA())}let ht=(()=>{class e{constructor(a,n){this.selectedRecord$=new Z.X(null);const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("table");this.table$=n.yamcsClient.getTable(s,c),this.records$=n.yamcsClient.getTableData(s,c)}selectRecord(a){this.selectedRecord$.next(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:3,consts:[[4,"ngIf"],["nodata",""],[4,"ngIf","ngIfElse"],["noSelection",""],[1,"data-table-wrapper"],[1,"panel-content"],[2,"padding","0 16px"],[3,"table","record"],["yaDataTable","",4,"ngIf","ngIfElse"],["yaDataTable",""],[4,"ngFor","ngForOf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"mono",4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.YNc(0,Ia,10,8,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ja,2,0,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[p.mk,p.sg,p.O5,l.Gj,l.J8,l.MD,l.RR,Ua,p.Ov,l.VC,$],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#fafafa;cursor:pointer}"],changeDetection:0})}return e})();var T=f(7700);function Oa(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.value),t.xp6(2),t.Oqu(a.label)}}let Ra=(()=>{class e{constructor(a){this.data=a}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-show-enum-dialog"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["yaDataTable","",1,"mat-typography",2,"width","100%"],[4,"ngFor","ngForOf"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Enum States"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th"),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Label"),t.qZA()(),t.YNc(9,Oa,5,2,"tr",2),t.qZA()(),t.TgZ(10,"mat-dialog-actions",3)(11,"button",4),t._uU(12,"Close"),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("ngForOf",o.data.column.enumValue))},dependencies:[p.sg,l.Gj,T.ZT,T.uh,T.xY,T.H8],encapsulation:2})}return e})();function $a(e,i){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"span",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showEnum(o))}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function La(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function Ma(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,$a,3,1,"ng-container",7),t.YNc(5,La,2,1,"ng-container",7),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t._UZ(8,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","ENUM"===a.type),t.xp6(1),t.Q6J("ngIf","ENUM"!==a.type),t.xp6(2),t.hij(" ",a.autoIncrement?"auto_increment":"-"," ")}}function Fa(e,i){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"span",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showEnum(o))}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function Ba(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function Ha(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,Fa,3,1,"ng-container",7),t.YNc(5,Ba,2,1,"ng-container",7),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t._UZ(8,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","ENUM"===a.type),t.xp6(1),t.Q6J("ngIf","ENUM"!==a.type),t.xp6(2),t.hij(" ",a.autoIncrement?"auto_increment":"-"," ")}}function Ga(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function Ea(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.YNc(2,Ga,2,0,"span",7),t.BQk()),2&e){const a=i.$implicit,n=i.last;t.xp6(1),t.hij(" ",a,""),t.xp6(1),t.Q6J("ngIf",!n)}}function ja(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Ea,3,2,"ng-container",4),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",a.histogramColumn)}}function za(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Xa(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2,"Time partition column"),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.AsE(" ",null==a.partitioningInfo?null:a.partitioningInfo.timeColumn,"('",null==a.partitioningInfo?null:a.partitioningInfo.timePartitionSchema,"') ")}}function Va(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2,"Value partition column"),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.hij(" ",null==a.partitioningInfo?null:a.partitioningInfo.valueColumn," ")}}function Ka(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"h3"),t._uU(2,"Key"),t.qZA(),t.TgZ(3,"table",2)(4,"tr")(5,"th"),t._uU(6,"Column"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Type"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Extra"),t.qZA(),t._UZ(11,"th",3),t.qZA(),t.YNc(12,Ma,9,4,"tr",4),t.qZA(),t.TgZ(13,"p"),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"h3"),t._uU(16,"Value"),t.qZA(),t.TgZ(17,"table",5)(18,"tr")(19,"th"),t._uU(20,"Column"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Type"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Extra"),t.qZA(),t._UZ(25,"th",3),t.qZA(),t.YNc(26,Ha,9,4,"tr",4),t.qZA(),t.TgZ(27,"p"),t._uU(28,"\xa0"),t.qZA(),t.TgZ(29,"h3"),t._uU(30,"Options"),t.qZA(),t.TgZ(31,"dl",6)(32,"dt"),t._uU(33,"Format version"),t.qZA(),t.TgZ(34,"dd"),t._uU(35),t.qZA(),t.TgZ(36,"dt"),t._uU(37,"Storage engine"),t.qZA(),t.TgZ(38,"dd"),t._uU(39),t.qZA(),t.TgZ(40,"dt"),t._uU(41,"Tablespace"),t.qZA(),t.TgZ(42,"dd"),t._uU(43),t.qZA(),t.TgZ(44,"dt"),t._uU(45,"Compressed"),t.qZA(),t.TgZ(46,"dd"),t._uU(47),t.qZA(),t.TgZ(48,"dt"),t._uU(49,"Histogram"),t.qZA(),t.TgZ(50,"dd"),t.YNc(51,ja,2,1,"ng-container",7),t.YNc(52,za,2,0,"ng-container",7),t.qZA(),t.TgZ(53,"dt"),t._uU(54,"Partition by"),t.qZA(),t.TgZ(55,"dd"),t._uU(56),t.ALo(57,"lowercase"),t.qZA(),t.YNc(58,Xa,5,2,"ng-container",7),t.YNc(59,Va,5,1,"ng-container",7),t.qZA()()),2&e){const a=i.ngIf;t.xp6(12),t.Q6J("ngForOf",a.keyColumn),t.xp6(14),t.Q6J("ngForOf",a.valueColumn),t.xp6(9),t.Oqu(a.formatVersion),t.xp6(4),t.Oqu(a.storageEngine),t.xp6(4),t.Oqu(a.tablespace||"-"),t.xp6(4),t.Oqu(a.compressed?"yes":"no"),t.xp6(4),t.Q6J("ngIf",a.histogramColumn),t.xp6(1),t.Q6J("ngIf",!a.histogramColumn),t.xp6(4),t.Oqu(t.lcZ(57,11,null==a.partitioningInfo?null:a.partitioningInfo.type)||"-"),t.xp6(2),t.Q6J("ngIf",null==a.partitioningInfo?null:a.partitioningInfo.timeColumn),t.xp6(1),t.Q6J("ngIf",null==a.partitioningInfo?null:a.partitioningInfo.valueColumn)}}let Tt=(()=>{class e{constructor(a,n,o){this.dialog=o;const s=a.snapshot.parent,c=s.parent.paramMap.get("database"),m=s.paramMap.get("table");this.table$=n.yamcsClient.getTable(c,m)}showEnum(a){this.dialog.open(Ra,{width:"400px",data:{column:a}})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(T.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngFor","ngForOf"],["yaDataTable",""],[1,"dl-horizontal"],[4,"ngIf"],["matTooltip","Show enum states",1,"enum",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,Ka,60,13,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[p.sg,p.O5,l.Gj,S.gM,p.Ov,p.i8],styles:[".enum[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0})}return e})();function Wa(e,i){1&e&&(t.ynx(0),t._UZ(1,"router-outlet"),t.BQk())}let Zt=(()=>{class e{constructor(a,n,o){this.yamcs=n;const s=a.snapshot.parent.paramMap.get("database"),c=a.snapshot.paramMap.get("table");o.setTitle(c),this.table$=n.yamcsClient.getTable(s,c)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,o){1&n&&(t.YNc(0,Wa,2,0,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[p.O5,_.lC,p.Ov],encapsulation:2,changeDetection:0})}return e})();function tn(e,i){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"code",2),t.qZA()),2&e){const a=i.ngIf,n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.formatSQL(a.script),t.oJD)}}let bt=(()=>{class e{constructor(a,n){const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("table");this.table$=n.yamcsClient.getTable(s,c)}formatSQL(a){return dt(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content sql",4,"ngIf"],[1,"panel-content","sql"],[3,"innerHTML"]],template:function(n,o){1&n&&(t.YNc(0,tn,2,1,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[p.O5,p.Ov],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0})}return e})();function en(e,i){1&e&&(t.TgZ(0,"th",9),t._uU(1,"Name"),t.qZA())}function an(e,i){if(1&e&&(t.TgZ(0,"td",10)(1,"a",11),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function nn(e,i){1&e&&t._UZ(0,"th",12)}function on(e,i){1&e&&t._UZ(0,"td",10)}function sn(e,i){1&e&&t._UZ(0,"tr",13)}function rn(e,i){1&e&&t._UZ(0,"tr",14)}let xt=(()=>{class e{constructor(a,n){this.yamcs=n,this.displayedColumns=["name","actions"],this.dataSource=new r.by;const s=a.snapshot.parent.paramMap.get("database");n.yamcsClient.getTables(s).then(c=>{this.dataSource.data=c})}ngAfterViewInit(){this.dataSource.sort=this.sort}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,en,2,0,"th",3),t.YNc(4,an,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,nn,1,0,"th",6),t.YNc(7,on,1,0,"td",4),t.BQk(),t.YNc(8,sn,1,0,"tr",7),t.YNc(9,rn,1,0,"tr",8),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[_.rH,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],encapsulation:2,changeDetection:0})}return e})();function cn(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Name"),t.qZA())}function ln(e,i){if(1&e&&(t.TgZ(0,"td",12)(1,"a",13),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function un(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Tablespace"),t.qZA())}function pn(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.tablespace," ")}}function mn(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Path"),t.qZA())}function _n(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.path," ")}}function dn(e,i){1&e&&t._UZ(0,"th",14)}function fn(e,i){1&e&&t._UZ(0,"td",12)}function gn(e,i){1&e&&t._UZ(0,"tr",15)}function hn(e,i){1&e&&t._UZ(0,"tr",16)}let yt=(()=>{class e{constructor(a,n,o){this.yamcs=a,this.displayedColumns=["name","tablespace","path","actions"],this.dataSource=new r.by,n.setTitle("Databases"),a.yamcsClient.getDatabases().then(s=>{this.dataSource.data=s}).catch(s=>o.showError(s))}ngAfterViewInit(){this.dataSource.sort=this.sort}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tablespace"],["matColumnDef","path"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2,"Databases"),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,cn,2,0,"th",3),t.YNc(7,ln,3,2,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,un,2,0,"th",3),t.YNc(10,pn,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,mn,2,0,"th",3),t.YNc(13,_n,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,dn,1,0,"th",8),t.YNc(16,fn,1,0,"td",4),t.BQk(),t.YNc(17,gn,1,0,"tr",9),t.YNc(18,hn,1,0,"tr",10),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[_.rH,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A],encapsulation:2,changeDetection:0})}return e})();var N=f(9887),Q=f(6385);let B=(()=>{class e{transform(a){if(!a)return a;const n=a.match(/Chrome\/([a-zA-Z0-9\.]+)/),o=a.match(/Chromium\/([a-zA-Z0-9\.]+)/),s=a.match(/Edg\/([a-zA-Z0-9\.]+)/),c=a.match(/Firefox\/([a-zA-Z0-9\.]+)/),m=a.match(/OPR\/([a-zA-Z0-9\.]+)/),d=a.match(/Safari\/([a-zA-Z0-9\.]+)/),h=a.match(/Seamonkey\/([a-zA-Z0-9\.]+)/);let v,x;if(!d||n||o||s)!n||o||s?o?(v="Chromium",x=o[1]):c&&!h?(v="Firefox",x=c[1]):h?(v="Seamonkey",x=h[1]):m?(v="Opera",x=m[1]):s&&(v="Edge",x=s[1]):(v="Chrome",x=n[1]);else{v="Safari",x=d[1];const D=a.match(/Version\/([a-zA-Z0-9\.]+)/);D&&(x=D[1])}return v?`${v} ${x}`:a}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275pipe=t.Yjl({name:"userAgent",type:e,pure:!0})}return e})();function Tn(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dl",20)(2,"dt"),t._uU(3,"Cumulative read"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.ALo(6,"formatBytes"),t.qZA(),t.TgZ(7,"dt"),t._uU(8,"Cumulative written"),t.qZA(),t.TgZ(9,"dd"),t._uU(10),t.ALo(11,"formatBytes"),t.qZA(),t.TgZ(12,"dt"),t._uU(13,"Rx"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.ALo(16,"dataRate"),t.qZA(),t.TgZ(17,"dt"),t._uU(18,"Tx"),t.qZA(),t.TgZ(19,"dd"),t._uU(20),t.ALo(21,"dataRate"),t.qZA()(),t.BQk()),2&e){const a=i.ngIf;t.xp6(5),t.Oqu(t.lcZ(6,4,a.readBytes)),t.xp6(5),t.Oqu(t.lcZ(11,6,a.writtenBytes)),t.xp6(5),t.Oqu(t.lcZ(16,8,8*a.readThroughput)),t.xp6(5),t.Oqu(t.lcZ(21,10,8*a.writeThroughput))}}function Zn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Id"),t.qZA())}function bn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.id)}}function xn(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"User agent"),t.qZA())}function yn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"userAgent"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==a.httpRequest?null:a.httpRequest.userAgent)||"-")}}function An(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Protocol"),t.qZA())}function vn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu((null==a.httpRequest?null:a.httpRequest.protocol)||"-")}}function Un(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Remote address"),t.qZA())}function Cn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.remoteAddress||"-")}}function wn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Read"),t.qZA())}function qn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"formatBytes"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.readBytes)||"-")}}function Dn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Written"),t.qZA())}function Sn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"formatBytes"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.writtenBytes)||"-")}}function Pn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Rx"),t.qZA())}function Yn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,8*a.readThroughput))}}function Nn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Tx"),t.qZA())}function kn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,8*a.writeThroughput))}}function Qn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Request"),t.qZA())}function In(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.AsE(" ",null==a.httpRequest?null:a.httpRequest.method," ",null==a.httpRequest?null:a.httpRequest.uri," ")}}function Jn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Authorization"),t.qZA())}function On(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.username||"-"," ")}}function Rn(e,i){1&e&&t._UZ(0,"tr",24)}function $n(e,i){1&e&&t._UZ(0,"tr",25)}let At=(()=>{class e{constructor(a,n,o){this.yamcs=a,this.displayedColumns=["id","protocol","remoteAddress","readBytes","writtenBytes","readThroughput","writeThroughput","request","authorization","userAgent"],this.tableTrackerFn=(s,c)=>c.id,this.traffic$=new Z.X(null),this.dataSource=new r.by,n.setTitle("HTTP traffic"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getHttpTraffic().then(a=>{this.traffic$.next(a),this.dataSource.data=a.connections||[]})}ngOnDestroy(){this.syncSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&(t.Gf(g.YE,5),t.Gf(N.NW,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first),t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:44,vars:10,consts:[[1,"panel-content"],[4,"ngIf"],[1,"section-divider"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userAgent"],["mat-header-cell","","mat-sort-header","","class","expand",4,"matHeaderCellDef"],["matColumnDef","protocol"],["matColumnDef","remoteAddress"],["matColumnDef","readBytes"],["matColumnDef","writtenBytes"],["matColumnDef","readThroughput"],["matColumnDef","writeThroughput"],["matColumnDef","request"],["matColumnDef","authorization"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],[1,"dl-horizontal","no-lead"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," HTTP traffic "),t.qZA(),t.TgZ(3,"div",0),t.YNc(4,Tn,22,12,"ng-container",1),t.ALo(5,"async"),t.TgZ(6,"div",2),t._UZ(7,"mat-divider"),t.qZA(),t.TgZ(8,"h4"),t._uU(9,"Current connections"),t.qZA(),t.TgZ(10,"table",3),t.ynx(11,4),t.YNc(12,Zn,2,0,"th",5),t.YNc(13,bn,2,1,"td",6),t.BQk(),t.ynx(14,7),t.YNc(15,xn,2,0,"th",8),t.YNc(16,yn,3,3,"td",6),t.BQk(),t.ynx(17,9),t.YNc(18,An,2,0,"th",5),t.YNc(19,vn,2,1,"td",6),t.BQk(),t.ynx(20,10),t.YNc(21,Un,2,0,"th",5),t.YNc(22,Cn,2,1,"td",6),t.BQk(),t.ynx(23,11),t.YNc(24,wn,2,0,"th",5),t.YNc(25,qn,3,3,"td",6),t.BQk(),t.ynx(26,12),t.YNc(27,Dn,2,0,"th",5),t.YNc(28,Sn,3,3,"td",6),t.BQk(),t.ynx(29,13),t.YNc(30,Pn,2,0,"th",5),t.YNc(31,Yn,3,3,"td",6),t.BQk(),t.ynx(32,14),t.YNc(33,Nn,2,0,"th",5),t.YNc(34,kn,3,3,"td",6),t.BQk(),t.ynx(35,15),t.YNc(36,Qn,2,0,"th",5),t.YNc(37,In,2,2,"td",6),t.BQk(),t.ynx(38,16),t.YNc(39,Jn,2,0,"th",5),t.YNc(40,On,2,1,"td",6),t.BQk(),t.YNc(41,Rn,1,0,"tr",17),t.YNc(42,$n,1,0,"tr",18),t.qZA(),t._UZ(43,"mat-paginator",19),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,8,o.traffic$)),t.xp6(6),t.Q6J("dataSource",o.dataSource)("trackBy",o.tableTrackerFn),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},dependencies:[p.O5,Q.d,N.NW,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A,p.Ov,l.zs,l.bP,B],encapsulation:2,changeDetection:0})}return e})();function Ln(e,i){1&e&&t._UZ(0,"th",21)}function Mn(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",22)(1,"input",23),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=t.CHM(a).$implicit,m=t.oxw(2);return t.KtG(o?m.selection.toggle(c):null)}),t.qZA()()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("checked",n.selection.isSelected(a))}}function Fn(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Type"),t.qZA())}function Bn(e,i){1&e&&(t.TgZ(0,"mat-icon",27),t._uU(1,"person"),t.qZA())}function Hn(e,i){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,Bn,2,0,"mat-icon",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.user)}}function Gn(e,i){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Member"),t.qZA())}function En(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.label," ")}}function jn(e,i){1&e&&t._UZ(0,"tr",29)}function zn(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",30),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.ekj("selected",n.selection.isSelected(a))}}function Xn(e,i){if(1&e&&(t.TgZ(0,"table",10),t.ynx(1,11),t.YNc(2,Ln,1,0,"th",12),t.YNc(3,Mn,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,Fn,2,0,"th",15),t.YNc(6,Hn,2,1,"td",16),t.BQk(),t.ynx(7,17),t.YNc(8,Gn,2,0,"th",18),t.YNc(9,En,2,1,"td",16),t.BQk(),t.YNc(10,jn,1,0,"tr",19),t.YNc(11,zn,1,2,"tr",20),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function Vn(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let vt=(()=>{class e{constructor(a,n,o){this.dialogRef=a,this.data=o,this.displayedColumns=["select","type","name"],this.filterControl=new u.p4,this.dataSource=new r.by,this.selection=new F.Ov(!0,[]);const c=o.items.filter(m=>m.user).map(m=>m.user.name);n.yamcsClient.getUsers().then(m=>{const d=(m||[]).filter(h=>-1===c.indexOf(h.name)).map(h=>({label:h.displayName||h.name,user:h}));this.dataSource.data=d})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.dataSource.filterPredicate=(a,n)=>a.label.toLowerCase().indexOf(n)>=0,this.dataSource.paginator=this.paginator}toggleOne(a){(!this.selection.isSelected(a)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(a)}save(){this.dialogRef.close(this.selection.selected)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.so),t.Y36(l.C8),t.Y36(T.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-members-dialog"]],viewQuery:function(n,o){if(1&n&&t.Gf(N.NW,7),2&n){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"filter-bar",2,"margin-top","5px"],["placeholder","Filter users",3,"formControl"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","width","1"],["mat-cell",""],["matTooltip","User","style","vertical-align: middle",4,"ngIf"],["matTooltip","User",2,"vertical-align","middle"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Add members"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2),t._UZ(4,"ya-search-filter",3),t.qZA(),t.YNc(5,Xn,12,3,"table",4),t.YNc(6,Vn,2,0,"ya-empty-message",5),t._UZ(7,"mat-paginator",6),t.qZA(),t.TgZ(8,"mat-dialog-actions",7)(9,"button",8),t._uU(10,"CANCEL"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return o.save()}),t._uU(12,"ADD"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("ngIf",o.dataSource),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length),t.xp6(1),t.Q6J("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),t.xp6(4),t.Q6J("disabled",o.selection.isEmpty()))},dependencies:[p.O5,u.JJ,u.oH,T.ZT,T.uh,T.xY,T.H8,U.Hw,N.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,S.gM,l.RR,l.cF],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return e})();function Kn(e,i){1&e&&(t.TgZ(0,"tr")(1,"td",13),t._uU(2,"No rows to display"),t.qZA()())}function Wn(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-icon",14),t._uU(3,"person"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15)(7,"ya-text-action",16),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.deleteItem(s))}),t._uU(8,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(5),t.Oqu(a.label)}}function ti(e,i){if(1&e&&(t.TgZ(0,"table",9)(1,"tr")(2,"th",10),t._uU(3,"Type"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Member"),t.qZA(),t._UZ(6,"th"),t.qZA(),t.YNc(7,Kn,3,0,"tr",11),t.YNc(8,Wn,9,1,"tr",12),t.qZA()),2&e){const a=i.ngIf;t.xp6(7),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}let Ut=(()=>{class e{constructor(a,n,o,s,c,m,d,h){this.router=o,this.route=s,this.yamcs=c,this.dialog=m,this.messageService=d,this.location=h,this.memberItems$=new Z.X([]),n.setTitle("Create a Group"),this.form=a.group({name:new u.p4("",[u.kI.required]),description:new u.p4})}showAddMembersDialog(){this.dialog.open(vt,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(n=>{n&&this.updateMemberItems([...this.memberItems$.value,...n])})}updateMemberItems(a){a.sort((n,o)=>n.label<o.label?-1:n.label>o.label?1:0),this.memberItems$.next(a)}deleteItem(a){this.updateMemberItems(this.memberItems$.value.filter(n=>n!==a))}onConfirm(){const a={name:this.form.value.name,description:this.form.value.description,users:this.memberItems$.value.filter(n=>n.user).map(n=>n.user.name)};this.yamcs.yamcsClient.createGroup(a).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(T.uw),t.Y36(l.ez),t.Y36(p.Ye))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:33,vars:5,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],[1,"ya-button",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],["width","1"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create group "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Group name"),t._UZ(10,"br")(11,"input",3),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t._UZ(15,"textarea",4),t.qZA()(),t.TgZ(16,"p"),t._uU(17,"\xa0"),t.qZA(),t.TgZ(18,"button",5),t.NdJ("click",function(){return o.showAddMembersDialog()}),t.TgZ(19,"mat-icon"),t._uU(20,"add_circle_outline"),t.qZA(),t._uU(21," Add members "),t.qZA(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.YNc(24,ti,9,2,"table",6),t.ALo(25,"async"),t.TgZ(26,"p"),t._uU(27,"\xa0"),t.qZA(),t.TgZ(28,"div",7)(29,"button",5),t.NdJ("click",function(){return o.location.back()}),t._uU(30,"Cancel"),t.qZA(),t.TgZ(31,"button",8),t.NdJ("click",function(){return o.onConfirm()}),t._uU(32,"CREATE"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(17),t.Q6J("ngIf",t.lcZ(25,3,o.memberItems$)),t.xp6(7),t.Q6J("disabled",!o.form.valid))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,_.rH,l.Gj,C.o6,U.Hw,S.gM,l.ll,y,A,p.Ov],encapsulation:2,changeDetection:0})}return e})(),ei=(()=>{class e{constructor(a){this.data=a}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-application-credentials-dialog"]],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"dl-horizontal"],["align","end"],["mat-dialog-close","",1,"ya-button","primary"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Service account created"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"dl",2)(6,"dt"),t._uU(7,"Application ID"),t.qZA(),t.TgZ(8,"dd")(9,"pre"),t._uU(10),t.qZA()(),t.TgZ(11,"dt"),t._uU(12,"Application Secret"),t.qZA(),t.TgZ(13,"dd")(14,"pre"),t._uU(15),t.qZA()()(),t.TgZ(16,"strong"),t._uU(17,"Important: "),t.qZA(),t._uU(18," Take note of these application credentials. It is not possible to display them after closing this dialog.\n"),t.qZA(),t.TgZ(19,"mat-dialog-actions",3)(20,"button",4),t._uU(21,"CLOSE"),t.qZA()()),2&n&&(t.xp6(4),t.hij("The service account '",o.data.name,"' was created successfully. You can use this account to connect an application to Yamcs."),t.xp6(6),t.Oqu(o.data.applicationId),t.xp6(5),t.Oqu(o.data.applicationSecret))},dependencies:[T.ZT,T.uh,T.xY,T.H8],encapsulation:2,changeDetection:0})}return e})(),Ct=(()=>{class e{constructor(a,n,o,s,c,m,d,h){this.router=o,this.route=s,this.yamcs=c,this.messageService=m,this.location=d,this.dialog=h,n.setTitle("Create service account"),this.form=a.group({name:new u.p4("",[u.kI.required])})}onConfirm(){this.yamcs.yamcsClient.createServiceAccount({name:this.form.value.name}).then(n=>this.onServerConfirm(n)).catch(n=>this.messageService.showError(n))}onServerConfirm(a){this.dialog.open(ei,{disableClose:!0,closeOnNavigation:!1,data:a,width:"550px"}).afterClosed().subscribe(()=>{this.router.navigate([".."],{relativeTo:this.route})})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.ez),t.Y36(p.Ye),t.Y36(T.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:29,vars:4,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],[2,"margin-top","32px"],["type","checkbox",3,"disabled","checked"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create service account "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Service account name "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br")(13,"input",4),t.qZA(),t.TgZ(14,"h2",5),t._uU(15,"Scopes"),t.qZA(),t.TgZ(16,"label"),t._UZ(17,"input",6),t._uU(18," Impersonation"),t._UZ(19,"br"),t.TgZ(20,"span",3),t._uU(21,"Grants permission to access the API on behalf of any user in the system."),t.qZA()()(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.TgZ(24,"div",7)(25,"button",8),t.NdJ("click",function(){return o.location.back()}),t._uU(26,"Cancel"),t.qZA(),t.TgZ(27,"button",9),t.NdJ("click",function(){return o.onConfirm()}),t._uU(28,"CREATE"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("disabled",!0)("checked",!0),t.xp6(10),t.Q6J("disabled",!o.form.valid))},dependencies:[u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,_.rH,C.o6,U.Hw,y,A],encapsulation:2,changeDetection:0})}return e})(),wt=(()=>{class e{constructor(a,n,o,s,c){this.router=o,this.yamcs=s,this.messageService=c,n.setTitle("Create a User"),this.form=a.group({name:new u.p4("",[u.kI.required]),displayName:new u.p4,email:new u.p4,password:new u.p4,passwordConfirmation:new u.p4})}onConfirm(){const a=this.form.value,n={name:a.name};if(a.displayName&&(n.displayName=a.displayName),a.email&&(n.email=a.email),a.password){if(a.password!==a.passwordConfirmation)return void alert("Password confirmation does not match password");n.password=a.password}this.yamcs.yamcsClient.createUser(n).then(()=>this.router.navigateByUrl(`/admin/iam/users/${a.name}`)).catch(o=>this.messageService.showError(o))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(l.C8),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:53,vars:2,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],["formControlName","displayName","type","text"],["formControlName","email","type","text"],[1,"section-divider"],["formControlName","password","type","password"],["formControlName","passwordConfirmation","type","password"],[1,"action-bar"],["routerLink","..",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create user "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Username "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br")(13,"input",4),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"label"),t._uU(16," Display name "),t.TgZ(17,"span",3),t._uU(18,"(optional)"),t.qZA(),t._UZ(19,"br")(20,"input",5),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"label"),t._uU(23," Email "),t.TgZ(24,"span",3),t._uU(25,"(optional)"),t.qZA(),t._UZ(26,"br")(27,"input",6),t.qZA(),t.TgZ(28,"p"),t._uU(29,"\xa0"),t.qZA(),t.TgZ(30,"div",7),t._UZ(31,"mat-divider"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"label"),t._uU(34," Password "),t.TgZ(35,"span",3),t._uU(36,"(optional)"),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"span",3),t._uU(39,"User without a password may still be able to login if an external identity provider is configured."),t.qZA(),t._UZ(40,"input",8),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"label"),t._uU(43," Password confirmation"),t._UZ(44,"br")(45,"input",9),t.qZA()(),t.TgZ(46,"p"),t._uU(47,"\xa0"),t.qZA(),t.TgZ(48,"div",10)(49,"button",11),t._uU(50,"Cancel"),t.qZA(),t.TgZ(51,"button",12),t.NdJ("click",function(){return o.onConfirm()}),t._uU(52,"CREATE"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(44),t.Q6J("disabled",!o.form.valid))},dependencies:[u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,_.rH,C.o6,U.Hw,Q.d,y,A],encapsulation:2,changeDetection:0})}return e})();function ai(e,i){1&e&&(t.TgZ(0,"tr")(1,"td",13),t._uU(2,"No rows to display"),t.qZA()())}function ni(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-icon",14),t._uU(3,"person"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15)(7,"ya-text-action",16),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(3);return t.KtG(c.deleteItem(s))}),t._uU(8,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(5),t.Oqu(a.label)}}function ii(e,i){if(1&e&&(t.TgZ(0,"table",10)(1,"tr")(2,"th",11),t._uU(3,"Type"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Member"),t.qZA(),t._UZ(6,"th"),t.qZA(),t.YNc(7,ai,3,0,"tr",0),t.YNc(8,ni,9,1,"tr",12),t.qZA()),2&e){const a=i.ngIf;t.xp6(7),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}function oi(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"label"),t._uU(6," Name"),t._UZ(7,"br")(8,"input",3),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"label"),t._uU(11," Description "),t._UZ(12,"textarea",4),t.qZA()(),t.TgZ(13,"p"),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"button",5),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.showAddMembersDialog())}),t.TgZ(16,"mat-icon"),t._uU(17,"add_circle_outline"),t.qZA(),t._uU(18," Add members "),t.qZA(),t.TgZ(19,"p"),t._uU(20,"\xa0"),t.qZA(),t.YNc(21,ii,9,2,"table",6),t.ALo(22,"async"),t.TgZ(23,"p"),t._uU(24,"\xa0"),t.qZA(),t.TgZ(25,"div",7)(26,"button",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.location.back())}),t._uU(27,"Cancel"),t.qZA(),t.TgZ(28,"button",9),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onConfirm())}),t.ALo(29,"async"),t._uU(30,"SAVE CHANGES"),t.qZA()()()()}if(2&e){const a=i.ngIf,n=t.oxw();t.xp6(2),t.hij(" Edit Group: ",a.name," "),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(17),t.Q6J("ngIf",t.lcZ(22,4,n.memberItems$)),t.xp6(7),t.Q6J("disabled",!t.lcZ(29,6,n.dirty$)||!n.form.valid)}}let qt=(()=>{class e{constructor(a,n,o,s,c,m,d,h){this.router=o,this.yamcs=c,this.messageService=m,this.dialog=d,this.location=h,this.memberItems$=new Z.X([]),this.dirty$=new Z.X(!1),n.setTitle("Edit Group");const v=s.snapshot.paramMap.get("name");this.group$=c.yamcsClient.getGroup(v),this.group$.then(x=>{this.group=x,this.form=a.group({name:new u.p4(x.name),description:new u.p4(x.description)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});const D=[];if(x.users)for(const J of x.users)D.push({label:J.displayName||J.name,user:J});this.updateMemberItems(D,!1)})}showAddMembersDialog(){this.dialog.open(vt,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(n=>{n&&this.updateMemberItems([...this.memberItems$.value,...n])})}updateMemberItems(a,n=!0){a.sort((o,s)=>o.label<s.label?-1:o.label>s.label?1:0),this.memberItems$.next(a),this.dirty$.next(n)}deleteItem(a){this.updateMemberItems(this.memberItems$.value.filter(n=>n!==a))}onConfirm(){const a=this.form.value,n={newName:a.name,description:a.description,memberInfo:{users:this.memberItems$.value.filter(s=>s.user).map(s=>s.user.name)}},o=a.name;this.yamcs.yamcsClient.editGroup(this.group.name,n).then(()=>this.router.navigateByUrl(`/admin/iam/groups/${o}`)).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.ez),t.Y36(T.uw),t.Y36(p.Ye))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],["mat-stroked-button","",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],["width","1"],[4,"ngFor","ngForOf"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,oi,31,8,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.group$))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,l.Gj,C.lW,U.Hw,S.gM,l.ll,y,A,p.Ov],encapsulation:2,changeDetection:0})}return e})();function si(e,i){1&e&&t._UZ(0,"th",19)}function ri(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",20)(1,"input",21),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=t.CHM(a).$implicit,m=t.oxw(2);return t.KtG(o?m.selection.toggle(c):null)}),t.qZA()()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("checked",n.selection.isSelected(a))}}function ci(e,i){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Role"),t.qZA())}function li(e,i){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.label," ")}}function ui(e,i){1&e&&t._UZ(0,"tr",24)}function pi(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.ekj("selected",n.selection.isSelected(a))}}function mi(e,i){if(1&e&&(t.TgZ(0,"table",10),t.ynx(1,11),t.YNc(2,si,1,0,"th",12),t.YNc(3,ri,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,ci,2,0,"th",15),t.YNc(6,li,2,1,"td",16),t.BQk(),t.YNc(7,ui,1,0,"tr",17),t.YNc(8,pi,1,2,"tr",18),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function _i(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let di=(()=>{class e{constructor(a,n,o){this.dialogRef=a,this.data=o,this.displayedColumns=["select","name"],this.filterControl=new u.p4,this.dataSource=new r.by,this.selection=new F.Ov(!0,[]);const c=o.items.filter(m=>m.role).map(m=>m.role.name);n.yamcsClient.getRoles().then(m=>{const d=(m||[]).filter(h=>-1===c.indexOf(h.name)).map(h=>({label:h.name,role:h}));this.dataSource.data=d})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.dataSource.filterPredicate=(a,n)=>a.label.toLowerCase().indexOf(n)>=0,this.dataSource.paginator=this.paginator}toggleOne(a){(!this.selection.isSelected(a)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(a)}save(){this.dialogRef.close(this.selection.selected)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.so),t.Y36(l.C8),t.Y36(T.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-roles-dialog"]],viewQuery:function(n,o){if(1&n&&t.Gf(N.NW,7),2&n){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"filter-bar",2,"margin-top","5px"],["placeholder","Filter roles",3,"formControl"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Add roles"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2),t._UZ(4,"ya-search-filter",3),t.qZA(),t.YNc(5,mi,9,3,"table",4),t.YNc(6,_i,2,0,"ya-empty-message",5),t._UZ(7,"mat-paginator",6),t.qZA(),t.TgZ(8,"mat-dialog-actions",7)(9,"button",8),t._uU(10,"CANCEL"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return o.save()}),t._uU(12,"ADD"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("ngIf",o.dataSource),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length),t.xp6(1),t.Q6J("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),t.xp6(4),t.Q6J("disabled",o.selection.isEmpty()))},dependencies:[p.O5,u.JJ,u.oH,T.ZT,T.uh,T.xY,T.H8,N.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cF],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return e})();var fi=f(2599);function gi(e,i){1&e&&(t.TgZ(0,"span",9),t._uU(1," This user has an external identity. Changes to this field may get overwritten on next login. "),t.qZA())}function hi(e,i){1&e&&(t.TgZ(0,"span",9),t._uU(1," This user has an external identity. Changes to this field may get overwritten on next login. "),t.qZA())}function Ti(e,i){1&e&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2,"No rows to display"),t.qZA()())}function Zi(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",19)(4,"ya-text-action",20),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(3);return t.KtG(c.deleteItem(s))}),t._uU(5,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.label)}}function bi(e,i){if(1&e&&(t.TgZ(0,"table",16)(1,"tr")(2,"th"),t._uU(3,"Role"),t.qZA(),t._UZ(4,"th"),t.qZA(),t.YNc(5,Ti,3,0,"tr",0),t.YNc(6,Zi,6,1,"tr",17),t.qZA()),2&e){const a=i.ngIf;t.xp6(5),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}function xi(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"div",3),t._uU(6," Username"),t._UZ(7,"br")(8,"input",4),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"div",3),t._uU(11," Display name"),t._UZ(12,"br")(13,"input",5),t.YNc(14,gi,2,0,"span",6),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"div",3),t._uU(17," Email"),t._UZ(18,"br")(19,"input",7),t.YNc(20,hi,2,0,"span",6),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"div",3),t._uU(23," Active"),t._UZ(24,"br")(25,"mat-slide-toggle",8)(26,"br"),t.TgZ(27,"span",9),t._uU(28,'Inactive users are considered "blocked". They are not or no longer able to login.'),t.qZA()(),t._UZ(29,"br"),t.TgZ(30,"div",3),t._uU(31," Superuser"),t._UZ(32,"br")(33,"mat-slide-toggle",10)(34,"br"),t.TgZ(35,"span",9),t._uU(36,"Superusers bypass any permission checks. This attribute is intended for system administrators only."),t.qZA()(),t.TgZ(37,"p"),t._uU(38,"\xa0"),t.qZA(),t.TgZ(39,"button",11),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.showAddRolesDialog())}),t.TgZ(40,"mat-icon"),t._uU(41,"add_circle_outline"),t.qZA(),t._uU(42," Add roles "),t.qZA(),t.TgZ(43,"p"),t._uU(44,"\xa0"),t.qZA(),t.YNc(45,bi,7,2,"table",12),t.ALo(46,"async"),t.qZA(),t.TgZ(47,"p"),t._uU(48,"\xa0"),t.qZA(),t.TgZ(49,"div",13)(50,"button",14),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.location.back())}),t._uU(51,"Cancel"),t.qZA(),t.TgZ(52,"button",15),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onConfirm())}),t.ALo(53,"async"),t._uU(54,"SAVE CHANGES"),t.qZA()()()()}if(2&e){const a=i.ngIf,n=t.oxw();t.xp6(2),t.hij(" Edit User: ",a.displayName||a.name," "),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("value",a.name),t.xp6(6),t.Q6J("ngIf",a.identities&&a.identities.length>0),t.xp6(6),t.Q6J("ngIf",a.identities&&a.identities.length>0),t.xp6(25),t.Q6J("ngIf",t.lcZ(46,7,n.roleItems$)),t.xp6(7),t.Q6J("disabled",!t.lcZ(53,9,n.dirty$)||!n.form.valid)}}let Dt=(()=>{class e{constructor(a,n,o,s,c,m,d,h){this.router=o,this.route=s,this.yamcs=c,this.messageService=m,this.dialog=d,this.location=h,this.roleItems$=new Z.X([]),this.dirty$=new Z.X(!1),n.setTitle("Edit User");const v=s.snapshot.paramMap.get("username");this.user$=c.yamcsClient.getUser(v),this.user$.then(x=>{this.user=x,this.form=a.group({displayName:new u.p4(x.displayName),email:new u.p4(x.email),active:new u.p4(x.active),superuser:new u.p4(x.superuser)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});const D=[];if(x.roles)for(const J of x.roles)D.push({label:J.name,role:J});this.updateRoleItems(D,!1)})}showAddRolesDialog(){this.dialog.open(di,{data:{items:this.roleItems$.value},width:"600px"}).afterClosed().subscribe(n=>{n&&this.updateRoleItems([...this.roleItems$.value,...n])})}updateRoleItems(a,n=!0){a.sort((o,s)=>o.label<s.label?-1:o.label>s.label?1:0),this.roleItems$.next(a),this.dirty$.next(n)}deleteItem(a){this.updateRoleItems(this.roleItems$.value.filter(n=>n!==a))}onConfirm(){const a=this.form.value,n={roleAssignment:{roles:this.roleItems$.value.filter(o=>o.role).map(o=>o.role.name)}};a.displayName!==this.user.displayName&&(n.displayName=a.displayName),a.email!==this.user.email&&(n.email=a.email),a.active!==this.user.active&&(n.active=a.active),a.superuser!==this.user.superuser&&(n.superuser=a.superuser),this.yamcs.yamcsClient.editUser(this.user.name,n).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(o=>this.messageService.showError(o))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.ez),t.Y36(T.uw),t.Y36(p.Ye))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],["disabled","","type","text",3,"value"],["formControlName","displayName","type","text"],["class","hint",4,"ngIf"],["formControlName","email","type","text"],["formControlName","active"],[1,"hint"],["formControlName","superuser"],["mat-stroked-button","",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],[4,"ngFor","ngForOf"],["colspan","2"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,xi,55,11,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.user$))},dependencies:[p.sg,p.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,l.Gj,C.lW,U.Hw,fi.Rr,l.ll,y,A,p.Ov],encapsulation:2,changeDetection:0})}return e})();function yi(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"mat-divider"),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"Description"),t.qZA(),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(6),t.Oqu(a.description||"-")}}const Ai=function(e){return["/admin/iam/users",e]};function vi(e,i){if(1&e&&(t.TgZ(0,"div")(1,"mat-icon",6),t._uU(2,"person"),t.qZA(),t.TgZ(3,"a",7),t._uU(4),t.qZA()()),2&e){const a=i.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(2,Ai,a.name)),t.xp6(1),t.Oqu(a.displayName||a.name)}}function Ui(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.TgZ(3,"a",1)(4,"mat-icon"),t._uU(5,"edit"),t.qZA(),t._uU(6," Edit group "),t.qZA()(),t.TgZ(7,"div",2),t.YNc(8,yi,7,1,"ng-container",0),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"h4"),t._uU(13),t.qZA(),t.YNc(14,vi,5,4,"div",4),t.qZA()()),2&e){const a=i.ngIf;t.xp6(2),t.hij(" ",a.name," \xa0\xa0\xa0 "),t.xp6(6),t.Q6J("ngIf",a.description),t.xp6(5),t.hij("",(null==a.users?null:a.users.length)||0," members"),t.xp6(1),t.Q6J("ngForOf",a.users)}}let St=(()=>{class e{constructor(a,n,o){this.yamcs=n,this.title=o,this.group$=new Z.X(null),a.paramMap.subscribe(s=>{const c=s.get("name");this.changeGroup(c)})}changeGroup(a){this.yamcs.yamcsClient.getGroup(a).then(n=>{this.group$.next(n),this.title.setTitle(n.name)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-button","","color","primary","routerLink","edit"],[1,"panel-content","ya-link"],[1,"section-divider"],[4,"ngFor","ngForOf"],[2,"white-space","pre-wrap"],["matTooltip","User",1,"icon16",2,"vertical-align","middle"],[3,"routerLink"]],template:function(n,o){1&n&&(t.YNc(0,Ui,15,4,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.group$))},dependencies:[p.sg,p.O5,_.rH,C.zs,U.Hw,Q.d,S.gM,y,A,p.Ov],encapsulation:2,changeDetection:0})}return e})();var M=f(7988);function Ci(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Group"),t.qZA())}function wi(e,i){if(1&e&&(t.TgZ(0,"td",15)(1,"a",16),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.Oqu(a.name)}}function qi(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Members"),t.qZA())}function Di(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",18),t._uU(2,"person"),t.qZA(),t._uU(3),t._UZ(4,"br"),t.BQk()),2&e){const a=i.$implicit;t.xp6(3),t.hij(" ",a.displayName||a.name," ")}}function Si(e,i){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,Di,5,1,"ng-container",17),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a.users)}}function Pi(e,i){1&e&&t._UZ(0,"th",19)}const Yi=function(e){return[e,"edit"]};function Ni(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",15)(1,"ya-more")(2,"a",20),t._uU(3," Edit group "),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.deleteGroup(s.name))}),t._uU(5," Delete group "),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(1,Yi,a.name))}}function ki(e,i){1&e&&t._UZ(0,"tr",22)}function Qi(e,i){1&e&&t._UZ(0,"tr",23)}function Ii(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Pt=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.messageService=c,this.filterControl=new u.p4,this.displayedColumns=["name","members","actions"],this.dataSource=new r.by,n.setTitle("Groups"),this.dataSource.filterPredicate=(m,d)=>m.name.toLowerCase().indexOf(d)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getGroups().then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteGroup(a){confirm(`Are you sure you want to delete group ${a}`)&&this.yamcs.yamcsClient.deleteGroup(a).then(()=>this.refresh()).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:23,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter groups",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","members"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[4,"ngFor","ngForOf"],[1,"icon16",2,"vertical-align","middle"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Groups \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create group "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,Ci,2,0,"th",6),t.YNc(13,wi,3,2,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,qi,2,0,"th",6),t.YNc(16,Si,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,Pi,1,0,"th",10),t.YNc(19,Ni,6,3,"td",7),t.BQk(),t.YNc(20,ki,1,0,"tr",11),t.YNc(21,Qi,1,0,"tr",12),t.qZA(),t.YNc(22,Ii,2,0,"ya-empty-message",13),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[p.sg,p.O5,u.JJ,u.oH,_.rH,C.zs,U.Hw,M.OP,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cQ,l.cF,y,A],encapsulation:2,changeDetection:0})}return e})();function Ji(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a," ")}}function Oi(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.type),t.xp6(2),t.Oqu(a.object)}}function Ri(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"h4"),t._uU(5,"Description"),t.qZA(),t.TgZ(6,"div",2),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"div",3),t._UZ(10,"mat-divider"),t.qZA(),t.TgZ(11,"h4"),t._uU(12),t.qZA(),t.YNc(13,Ji,2,1,"div",4),t._UZ(14,"br"),t.TgZ(15,"div",3),t._UZ(16,"mat-divider"),t.qZA(),t.TgZ(17,"h4"),t._uU(18),t.qZA(),t.TgZ(19,"dl"),t.YNc(20,Oi,5,2,"ng-container",4),t.qZA()()()),2&e){const a=i.ngIf;t.xp6(2),t.hij(" ",a.name," "),t.xp6(5),t.Oqu(a.description||"-"),t.xp6(5),t.hij("",(null==a.systemPrivileges?null:a.systemPrivileges.length)||0," assigned system privileges"),t.xp6(1),t.Q6J("ngForOf",a.systemPrivileges),t.xp6(5),t.hij("",(null==a.objectPrivileges?null:a.objectPrivileges.length)||0," assigned object privileges"),t.xp6(2),t.Q6J("ngForOf",a.objectPrivileges)}}let Yt=(()=>{class e{constructor(a,n,o){this.yamcs=n,this.title=o,this.role$=new Z.X(null),a.paramMap.subscribe(s=>{const c=s.get("name");this.changeRole(c)})}changeRole(a){this.yamcs.yamcsClient.getRole(a).then(n=>{this.role$.next(n),this.title.setTitle(n.name)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"panel-content","ya-link"],[2,"white-space","pre-wrap"],[1,"section-divider"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.YNc(0,Ri,21,6,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.role$))},dependencies:[p.sg,p.O5,Q.d,y,A,p.Ov],encapsulation:2,changeDetection:0})}return e})();function $i(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Role"),t.qZA())}function Li(e,i){if(1&e&&(t.TgZ(0,"td",15)(1,"a",16),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.Oqu(a.name)}}function Mi(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Default"),t.qZA())}function Fi(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function Bi(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"close"),t.qZA())}function Hi(e,i){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,Fi,2,0,"mat-icon",13),t.YNc(2,Bi,2,0,"mat-icon",13),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.default),t.xp6(1),t.Q6J("ngIf",!a.default)}}function Gi(e,i){1&e&&t._UZ(0,"th",18)}function Ei(e,i){1&e&&t._UZ(0,"td",15)}function ji(e,i){1&e&&t._UZ(0,"tr",19)}function zi(e,i){1&e&&t._UZ(0,"tr",20)}function Xi(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Nt=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.route=o,this.router=s,this.filterControl=new u.p4,this.displayedColumns=["name","default","actions"],this.dataSource=new r.by,n.setTitle("Roles"),this.dataSource.filterPredicate=(c,m)=>c.name.toLowerCase().indexOf(m)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoles().then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:19,vars:5,consts:[[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","default"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Roles "),t.qZA(),t.TgZ(3,"div",0)(4,"div",1),t._UZ(5,"ya-search-filter",2),t.qZA(),t.TgZ(6,"table",3),t.ynx(7,4),t.YNc(8,$i,2,0,"th",5),t.YNc(9,Li,3,2,"td",6),t.BQk(),t.ynx(10,7),t.YNc(11,Mi,2,0,"th",8),t.YNc(12,Hi,3,2,"td",6),t.BQk(),t.ynx(13,9),t.YNc(14,Gi,1,0,"th",10),t.YNc(15,Ei,1,0,"td",6),t.BQk(),t.YNc(16,ji,1,0,"tr",11),t.YNc(17,zi,1,0,"tr",12),t.qZA(),t.YNc(18,Xi,2,0,"ya-empty-message",13),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[p.O5,u.JJ,u.oH,_.rH,U.Hw,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cF,y,A],encapsulation:2,changeDetection:0})}return e})();function Vi(e,i){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Service account"),t.qZA())}function Ki(e,i){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function Wi(e,i){1&e&&t._UZ(0,"th",15)}function to(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",14)(1,"ya-more")(2,"button",16),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.deleteServiceAccount(s.name))}),t._uU(3," Delete service account "),t.qZA()()()}}function eo(e,i){1&e&&t._UZ(0,"tr",17)}function ao(e,i){1&e&&t._UZ(0,"tr",18)}function no(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let kt=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.messageService=c,this.filterControl=new u.p4,this.displayedColumns=["name","actions"],this.dataSource=new r.by,n.setTitle("Service accounts"),this.dataSource.filterPredicate=(m,d)=>m.name.toLowerCase().indexOf(d)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getServiceAccounts().then(a=>{this.dataSource.data=a.serviceAccounts||[]})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteServiceAccount(a){confirm(`Are you sure you want to delete service account ${a}`)&&this.yamcs.yamcsClient.deleteServiceAccount(a).then(()=>this.refresh()).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:20,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter service accounts",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Service accounts \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create service account "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,Vi,2,0,"th",6),t.YNc(13,Ki,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,Wi,1,0,"th",9),t.YNc(16,to,4,0,"td",7),t.BQk(),t.YNc(17,eo,1,0,"tr",10),t.YNc(18,ao,1,0,"tr",11),t.qZA(),t.YNc(19,no,2,0,"ya-empty-message",12),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[p.O5,u.JJ,u.oH,_.rH,C.zs,U.Hw,M.OP,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cQ,l.cF,y,A],encapsulation:2,changeDetection:0})}return e})();function io(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"Confirmation does not match password"),t.qZA())}const oo=e=>{const i=e.get("password").value,a=e.get("passwordConfirmation").value;return i&&a&&i!==a?{passwordMismatch:!0}:null};let so=(()=>{class e{constructor(a,n,o){this.data=a,this.yamcs=n,this.user=a.user,this.form=o.group({password:new u.p4(null,u.kI.required),passwordConfirmation:new u.p4(null,u.kI.required)},{validator:oo})}changePassword(){this.yamcs.yamcsClient.editUser(this.user.name,{password:this.form.value.password})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.WI),t.Y36(l.C8),t.Y36(u.QS))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-change-user-password-dialog"]],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","password","formControlName","password"],["type","password","formControlName","passwordConfirmation"],[4,"ngIf"],["align","end"],["mat-dialog-close","",1,"ya-button"],["mat-dialog-close","",1,"ya-button","primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"label"),t._uU(5," Password"),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Password confirmation"),t._UZ(11,"br")(12,"input",4),t.qZA()(),t.YNc(13,io,2,0,"p",5),t.qZA(),t.TgZ(14,"mat-dialog-actions",6)(15,"button",7),t._uU(16,"CANCEL"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return o.changePassword()}),t._uU(18,"OK"),t.qZA()()),2&n&&(t.xp6(1),t.hij("Change password of ",o.user.name,""),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",null==o.form.errors?null:o.form.errors.passwordMismatch),t.xp6(4),t.Q6J("disabled",!o.form.valid))},dependencies:[p.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,T.ZT,T.uh,T.xY,T.H8],encapsulation:2,changeDetection:0})}return e})();const ro=function(e){return[e]};function co(e,i){if(1&e&&(t.TgZ(0,"a",9),t._uU(1),t.qZA()),2&e){const a=t.oxw().ngIf;t.Q6J("routerLink",t.VKq(2,ro,"../"+a.createdBy.name)),t.xp6(1),t.Oqu(a.createdBy.name||"-")}}function lo(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function uo(e,i){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.name,"")}}function po(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"ya-text-action",11),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(3);return t.KtG(c.deleteIdentity(s))}),t._uU(7,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.identity),t.xp6(2),t.Oqu(a.provider)}}function mo(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",7),t._UZ(2,"mat-divider"),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"External Identities"),t.qZA(),t.TgZ(5,"table",10)(6,"tr")(7,"th"),t._uU(8,"Identity"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Provider"),t.qZA(),t._UZ(11,"th"),t.qZA(),t.YNc(12,po,8,2,"tr",8),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(12),t.Q6J("ngForOf",a.identities)}}function _o(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5),t.TgZ(6,"a",2)(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t._uU(9," Edit user "),t.qZA(),t.TgZ(10,"a",3),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.showChangeUserPasswordDialog())}),t.TgZ(11,"mat-icon"),t._uU(12,"account_box"),t.qZA(),t._uU(13," Change password "),t.qZA()(),t.TgZ(14,"div",4)(15,"dl",5)(16,"dt"),t._uU(17,"Username"),t.qZA(),t.TgZ(18,"dd"),t._uU(19),t.qZA(),t.TgZ(20,"dt"),t._uU(21,"Display name"),t.qZA(),t.TgZ(22,"dd"),t._uU(23),t.qZA(),t.TgZ(24,"dt"),t._uU(25,"Email"),t.qZA(),t.TgZ(26,"dd"),t._uU(27),t.qZA(),t.TgZ(28,"dt"),t._uU(29,"Joined"),t.qZA(),t.TgZ(30,"dd"),t._uU(31),t.ALo(32,"datetime"),t.qZA(),t.TgZ(33,"dt"),t._uU(34,"Confirmed at"),t.qZA(),t.TgZ(35,"dd"),t._uU(36),t.ALo(37,"datetime"),t.qZA(),t.TgZ(38,"dt"),t._uU(39,"Last login"),t.qZA(),t.TgZ(40,"dd"),t._uU(41),t.ALo(42,"datetime"),t.qZA(),t.TgZ(43,"dt"),t._uU(44,"Active"),t.qZA(),t.TgZ(45,"dd"),t._uU(46),t.qZA(),t.TgZ(47,"dt"),t._uU(48,"Superuser"),t.qZA(),t.TgZ(49,"dd"),t._uU(50),t.qZA(),t.TgZ(51,"dt"),t._uU(52,"Created by"),t.qZA(),t.TgZ(53,"dd"),t.YNc(54,co,2,4,"a",6),t.YNc(55,lo,2,0,"ng-container",0),t.qZA()(),t.TgZ(56,"div",7),t._UZ(57,"mat-divider"),t.qZA(),t.TgZ(58,"h4"),t._uU(59),t.qZA(),t.YNc(60,uo,3,1,"ng-container",8),t.YNc(61,mo,13,1,"ng-container",0),t.qZA()()}if(2&e){const a=i.ngIf;t.xp6(5),t.hij(" ",a.displayName||a.name," \xa0\xa0\xa0 "),t.xp6(5),t.Q6J("disabled",null==a.identities?null:a.identities.length),t.xp6(9),t.Oqu(a.name),t.xp6(4),t.Oqu(a.displayName||"-"),t.xp6(4),t.Oqu(a.email||"-"),t.xp6(4),t.Oqu(t.lcZ(32,15,a.creationTime)),t.xp6(5),t.Oqu(t.lcZ(37,17,a.confirmationTime)||"never"),t.xp6(5),t.Oqu(t.lcZ(42,19,a.lastLoginTime)||"never"),t.xp6(5),t.Oqu(a.active),t.xp6(4),t.Oqu(a.superuser),t.xp6(4),t.Q6J("ngIf",a.createdBy),t.xp6(1),t.Q6J("ngIf",!a.createdBy),t.xp6(4),t.hij("",(null==a.roles?null:a.roles.length)||"0"," assigned roles"),t.xp6(1),t.Q6J("ngForOf",a.roles),t.xp6(1),t.Q6J("ngIf",a.identities)}}let Qt=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=n,this.title=o,this.dialog=s,this.messageService=c,this.user$=new Z.X(null),a.paramMap.subscribe(m=>{const d=m.get("username");this.changeUser(d)})}changeUser(a){this.yamcs.yamcsClient.getUser(a).then(n=>{this.user$.next(n),this.title.setTitle(n.name)})}deleteIdentity(a){if(confirm(`Are you sure you want to delete the ${a.provider} identity?`)){const n=this.user$.value.name;this.yamcs.yamcsClient.deleteIdentity(n,a.provider).then(()=>this.changeUser(n)).catch(o=>this.messageService.showError(o))}}showChangeUserPasswordDialog(){this.dialog.open(so,{data:{user:this.user$.value},width:"400px"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx),t.Y36(T.uw),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","..","color","primary"],["mat-button","","color","primary","routerLink","edit"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],[3,"routerLink",4,"ngIf"],[1,"section-divider"],[4,"ngFor","ngForOf"],[3,"routerLink"],["yaDataTable",""],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,_o,62,21,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.user$))},dependencies:[p.sg,p.O5,_.rH,l.Gj,C.zs,C.o6,U.Hw,Q.d,l.ll,y,A,p.Ov,l.id],encapsulation:2,changeDetection:0})}return e})();var w=f(7398);function fo(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Username"),t.qZA())}function go(e,i){if(1&e&&(t.TgZ(0,"td",16)(1,"a",17),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function ho(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Display name"),t.qZA())}function To(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.displayName||"-"," ")}}function Zo(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Groups"),t.qZA())}function bo(e,i){1&e&&(t.ynx(0),t._uU(1,", "),t.BQk())}function xo(e,i){if(1&e&&(t.ynx(0),t.YNc(1,bo,2,0,"ng-container",1),t._uU(2),t.BQk()),2&e){const a=i.$implicit,n=i.first;t.xp6(1),t.Q6J("ngIf",!n),t.xp6(1),t.hij("",a.name," ")}}function yo(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Ao(e,i){if(1&e&&(t.TgZ(0,"td",16),t.YNc(1,xo,3,2,"ng-container",19),t.YNc(2,yo,2,0,"ng-container",1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a.groups),t.xp6(1),t.Q6J("ngIf",!a.groups)}}function vo(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Registered"),t.qZA())}function Uo(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.creationTime)||"never")}}function Co(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Last Login"),t.qZA())}function wo(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.lastLoginTime)||"never")}}function qo(e,i){1&e&&t._UZ(0,"th",20)}const Do=function(e){return[e,"edit"]};function So(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",16)(1,"ya-more")(2,"a",21),t._uU(3," Edit user "),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.deleteUser.next(s.name))}),t._uU(5," Delete user "),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(1,Do,a.name))}}function Po(e,i){1&e&&t._UZ(0,"tr",23)}function Yo(e,i){1&e&&t._UZ(0,"tr",24)}function No(e,i){if(1&e&&(t.TgZ(0,"table",2),t.ynx(1,3),t.YNc(2,fo,2,0,"th",4),t.YNc(3,go,3,2,"td",5),t.BQk(),t.ynx(4,6),t.YNc(5,ho,2,0,"th",4),t.YNc(6,To,2,1,"td",5),t.BQk(),t.ynx(7,7),t.YNc(8,Zo,2,0,"th",8),t.YNc(9,Ao,3,2,"td",5),t.BQk(),t.ynx(10,9),t.YNc(11,vo,2,0,"th",4),t.YNc(12,Uo,3,3,"td",5),t.BQk(),t.ynx(13,10),t.YNc(14,Co,2,0,"th",4),t.YNc(15,wo,3,3,"td",5),t.BQk(),t.ynx(16,11),t.YNc(17,qo,1,0,"th",12),t.YNc(18,So,6,3,"td",5),t.BQk(),t.YNc(19,Po,1,0,"tr",13),t.YNc(20,Yo,1,0,"tr",14),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function ko(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display\n"),t.qZA())}let Qo=(()=>{class e{constructor(){this.displayedColumns=["name","displayName","groups","actions"],this.deleteUser=new t.vpe,this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.filterPredicate=(a,n)=>a.name.toLowerCase().indexOf(n)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.users||[],this.dataSource.filter=this.filter}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-users-table"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,5),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},inputs:{users:"users",filter:"filter"},outputs:{deleteUser:"deleteUser"},features:[t.TTD],decls:2,vars:2,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["matColumnDef","groups"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","registered"],["matColumnDef","lastLogin"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],[4,"ngFor","ngForOf"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.YNc(0,No,21,3,"table",0),t.YNc(1,ko,2,0,"ya-empty-message",1)),2&n&&(t.Q6J("ngIf",o.dataSource),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[p.sg,p.O5,_.rH,M.OP,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cQ,l.id],encapsulation:2,changeDetection:0})}return e})();function Io(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" ACTIVE (",t.lcZ(1,1,a.activeUserCount$),") ")}}function Jo(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" SUPERUSERS (",t.lcZ(1,1,a.superUserCount$),") ")}}function Oo(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" INTERNAL (",t.lcZ(1,1,a.internalUserCount$),") ")}}function Ro(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" BLOCKED (",t.lcZ(1,1,a.blockedUserCount$),") ")}}let It=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.messageService=c,this.filterControl=new u.p4,this.filterValue$=new Z.X(null),this.users$=new Z.X([]),n.setTitle("Users")}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.filterValue$.next(a.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.filterValue$.next((this.filterControl.value||"").toLowerCase())}),this.activeUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>o.active))),this.activeUserCount$=this.activeUsers$.pipe((0,w.U)(n=>n.length)),this.superUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>o.superuser))),this.superUserCount$=this.superUsers$.pipe((0,w.U)(n=>n.length)),this.internalUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>!o.identities))),this.internalUserCount$=this.internalUsers$.pipe((0,w.U)(n=>n.length)),this.blockedUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>!o.active))),this.blockedUserCount$=this.blockedUsers$.pipe((0,w.U)(n=>n.length)),this.refresh()}refresh(){this.yamcs.yamcsClient.getUsers().then(a=>{this.users$.next(a)})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteUser(a){confirm(`Are you sure you want to delete the user account '${a}'`)&&this.yamcs.yamcsClient.deleteUser(a).then(()=>this.refresh()).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:35,vars:26,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"users","filter","deleteUser"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Users \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create user "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"mat-tab-group",4)(11,"mat-tab"),t.YNc(12,Io,2,3,"ng-template",5),t._UZ(13,"br"),t.TgZ(14,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA()(),t.TgZ(17,"mat-tab"),t.YNc(18,Jo,2,3,"ng-template",5),t._UZ(19,"br"),t.TgZ(20,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA()(),t.TgZ(23,"mat-tab"),t.YNc(24,Oo,2,3,"ng-template",5),t._UZ(25,"br"),t.TgZ(26,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(27,"async"),t.ALo(28,"async"),t.qZA()(),t.TgZ(29,"mat-tab"),t.YNc(30,Ro,2,3,"ng-template",5),t._UZ(31,"br"),t.TgZ(32,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(33,"async"),t.ALo(34,"async"),t.qZA()()()()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("mat-stretch-tabs",!1),t.xp6(4),t.Q6J("users",t.lcZ(15,10,o.activeUsers$))("filter",t.lcZ(16,12,o.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(21,14,o.superUsers$))("filter",t.lcZ(22,16,o.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(27,18,o.internalUsers$))("filter",t.lcZ(28,20,o.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(33,22,o.blockedUsers$))("filter",t.lcZ(34,24,o.filterValue$)))},dependencies:[u.JJ,u.oH,_.rH,C.zs,U.Hw,P.uD,P.uX,P.SP,l.cF,y,A,Qo,p.Ov],encapsulation:2,changeDetection:0})}return e})();function $o(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Valid period (at 0h UTC)"),t.qZA())}function Lo(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.AsE(" ",t.xi3(2,2,a.start,"y-MM-dd")," \u2013 ",t.xi3(3,5,a.stop,"y-MM-dd")," ")}}function Mo(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Leap seconds"),t.qZA())}function Fo(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.leapSeconds)}}function Bo(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"TAI - UTC"),t.qZA())}function Ho(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij("",a.taiDifference," s")}}function Go(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"UTC - TAI"),t.qZA())}function Eo(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij("",-a.taiDifference," s")}}function jo(e,i){1&e&&t._UZ(0,"th",14)}function zo(e,i){1&e&&t._UZ(0,"td",13)}function Xo(e,i){1&e&&t._UZ(0,"tr",15)}function Vo(e,i){1&e&&t._UZ(0,"tr",16)}let Jt=(()=>{class e{constructor(a,n){this.displayedColumns=["period","leap-seconds","tai-utc","actions"],this.dataSource=new r.by,n.setTitle("Leap seconds"),a.yamcsClient.getLeapSeconds().then(o=>{this.dataSource.data=o.ranges})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:22,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","period"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","leap-seconds"],["matColumnDef","tai-utc"],["matColumnDef","utc-tai"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Leap seconds "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,$o,2,0,"th",3),t.YNc(7,Lo,4,8,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,Mo,2,0,"th",3),t.YNc(10,Fo,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,Bo,2,0,"th",3),t.YNc(13,Ho,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,Go,2,0,"th",3),t.YNc(16,Eo,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,jo,1,0,"th",9),t.YNc(19,zo,1,0,"td",4),t.BQk(),t.YNc(20,Xo,1,0,"tr",10),t.YNc(21,Vo,1,0,"tr",11),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A,p.uU],encapsulation:2,changeDetection:0})}return e})();function Ko(e,i){1&e&&(t.TgZ(0,"th",7),t._uU(1,"Name"),t.qZA())}function Wo(e,i){if(1&e&&(t.TgZ(0,"td",8),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a)}}function ts(e,i){1&e&&t._UZ(0,"tr",9)}function es(e,i){1&e&&t._UZ(0,"tr",10)}let Ot=(()=>{class e{constructor(a,n){this.displayedColumns=["name"],this.dataSource=new r.by,n.setTitle("Processor types"),a.yamcsClient.getProcessorTypes().then(o=>{this.dataSource.data=o.types||[]})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Processor types "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,Ko,2,0,"th",3),t.YNc(7,Wo,2,1,"td",4),t.BQk(),t.YNc(8,ts,1,0,"tr",5),t.YNc(9,es,1,0,"tr",6),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A],encapsulation:2,changeDetection:0})}return e})();function as(e,i){1&e&&(t.TgZ(0,"mat-icon",2),t._uU(1," check_circle\n"),t.qZA())}function ns(e,i){1&e&&(t.TgZ(0,"mat-icon",3),t._uU(1," lens\n"),t.qZA())}let is=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-replication-state"]],inputs:{connected:"connected"},decls:2,vars:2,consts:[["class","success",4,"ngIf"],["class","down",4,"ngIf"],[1,"success"],[1,"down"]],template:function(n,o){1&n&&(t.YNc(0,as,2,0,"mat-icon",0),t.YNc(1,ns,2,0,"mat-icon",1)),2&n&&(t.Q6J("ngIf",!0===o.connected),t.xp6(1),t.Q6J("ngIf",!1===o.connected))},dependencies:[p.O5,U.Hw],encapsulation:2,changeDetection:0})}return e})();function os(e,i){1&e&&t._UZ(0,"th",23)}function ss(e,i){if(1&e&&(t.TgZ(0,"td",24),t._UZ(1,"app-replication-state",25),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("connected",!!a.localAddress&&!!a.remoteAddress)}}function rs(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Instance"),t.qZA())}function cs(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.instance)}}function ls(e,i){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Streams"),t.qZA())}function us(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu((null==a.streams?null:a.streams.join(", "))||"-")}}function ps(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Mode"),t.qZA())}function ms(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.push?"PUSH":"PULL"," ")}}function _s(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Local Address"),t.qZA())}function ds(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.localAddress||"-"," ")}}function fs(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Remote Address"),t.qZA())}function gs(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.remoteAddress||"-"," ")}}function hs(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Pull From"),t.qZA())}function Ts(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.pullFrom||"-")}}function Zs(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"TX"),t.qZA())}function bs(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.tx)||"-")}}function xs(e,i){1&e&&t._UZ(0,"tr",32)}function ys(e,i){1&e&&t._UZ(0,"tr",33)}function As(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"table",4),t.ynx(2,5),t.YNc(3,os,1,0,"th",6),t.YNc(4,ss,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,rs,2,0,"th",9),t.YNc(7,cs,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,ls,2,0,"th",12),t.YNc(10,us,2,1,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,ps,2,0,"th",14),t.YNc(13,ms,2,1,"td",15),t.BQk(),t.ynx(14,16),t.YNc(15,_s,2,0,"th",17),t.YNc(16,ds,2,1,"td",10),t.BQk(),t.ynx(17,18),t.YNc(18,fs,2,0,"th",17),t.YNc(19,gs,2,1,"td",10),t.BQk(),t.ynx(20,19),t.YNc(21,hs,2,0,"th",9),t.YNc(22,Ts,2,1,"td",10),t.BQk(),t.ynx(23,20),t.YNc(24,Zs,2,0,"th",14),t.YNc(25,bs,3,3,"td",10),t.BQk(),t.YNc(26,xs,1,0,"tr",21),t.YNc(27,ys,1,0,"tr",22),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.slavesDataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.slaveColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.slaveColumns)}}function vs(e,i){1&e&&t._UZ(0,"th",23)}function Us(e,i){if(1&e&&(t.TgZ(0,"td",24),t._UZ(1,"app-replication-state",25),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("connected",!!a.localAddress&&!!a.remoteAddress)}}function Cs(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Instance"),t.qZA())}function ws(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.instance)}}function qs(e,i){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Streams"),t.qZA())}function Ds(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu((null==a.streams?null:a.streams.join(", "))||"-")}}function Ss(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Mode"),t.qZA())}function Ps(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.push?"PUSH":"PULL"," ")}}function Ys(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Local Address"),t.qZA())}function Ns(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.localAddress||"-"," ")}}function ks(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Remote Address"),t.qZA())}function Qs(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.remoteAddress||"-"," ")}}function Is(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Push To"),t.qZA())}function Js(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.pushTo||"-")}}function Os(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Local\xa0TX"),t.qZA())}function Rs(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.localTx)||"-")}}function $s(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Next\xa0TX"),t.qZA())}function Ls(e,i){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.nextTx)||"-")}}function Ms(e,i){1&e&&t._UZ(0,"tr",32)}function Fs(e,i){1&e&&t._UZ(0,"tr",33)}function Bs(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"table",4),t.ynx(2,5),t.YNc(3,vs,1,0,"th",6),t.YNc(4,Us,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,Cs,2,0,"th",9),t.YNc(7,ws,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,qs,2,0,"th",12),t.YNc(10,Ds,2,1,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,Ss,2,0,"th",14),t.YNc(13,Ps,2,1,"td",15),t.BQk(),t.ynx(14,16),t.YNc(15,Ys,2,0,"th",17),t.YNc(16,Ns,2,1,"td",10),t.BQk(),t.ynx(17,18),t.YNc(18,ks,2,0,"th",17),t.YNc(19,Qs,2,1,"td",10),t.BQk(),t.ynx(20,34),t.YNc(21,Is,2,0,"th",9),t.YNc(22,Js,2,1,"td",10),t.BQk(),t.ynx(23,35),t.YNc(24,Os,2,0,"th",14),t.YNc(25,Rs,3,3,"td",10),t.BQk(),t.ynx(26,36),t.YNc(27,$s,2,0,"th",14),t.YNc(28,Ls,3,3,"td",10),t.BQk(),t.YNc(29,Ms,1,0,"tr",21),t.YNc(30,Fs,1,0,"tr",22),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.mastersDataSource),t.xp6(28),t.Q6J("matHeaderRowDef",a.masterColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.masterColumns)}}function Hs(e,i){1&e&&(t.TgZ(0,"ya-empty-message",37),t._uU(1,"Not configured"),t.qZA())}let Rt=(()=>{class e{constructor(a,n){this.slaveColumns=["state","instance","streams","mode","localAddress","remoteAddress","pullFrom","tx"],this.masterColumns=["state","instance","streams","mode","localAddress","remoteAddress","pushTo","localTx","nextTx"],this.slavesDataSource=new r.by,this.mastersDataSource=new r.by,this.hasSlaves$=new Z.X(!1),this.hasMasters$=new Z.X(!1),n.setTitle("Replication"),this.replicationInfoSubscription=a.yamcsClient.createReplicationInfoSubscription(o=>{this.slavesDataSource.data=o.slaves||[],this.mastersDataSource.data=o.masters||[],this.hasSlaves$.next(this.slavesDataSource.data.length>0),this.hasMasters$.next(this.mastersDataSource.data.length>0)})}ngOnDestroy(){this.replicationInfoSubscription?.cancel()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:18,vars:8,consts:[[1,"panel-content"],[4,"ngIf","ngIfElse"],[1,"section-divider"],["nodata",""],["mat-table","",1,"ya-data-table",3,"dataSource"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","instance"],["mat-header-cell","","style","width: 130px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","streams"],["mat-header-cell","","style","width: 250px",4,"matHeaderCellDef"],["matColumnDef","mode"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","localAddress"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","remoteAddress"],["matColumnDef","pullFrom"],["matColumnDef","tx"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"connected"],["mat-header-cell","",2,"width","130px"],["mat-cell",""],["mat-header-cell","",2,"width","250px"],["mat-header-cell","","width","1"],["mat-cell","",2,"text-align","center"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],["matColumnDef","pushTo"],["matColumnDef","localTx"],["matColumnDef","nextTx"],["marginTop","0"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Replication "),t.qZA(),t.TgZ(3,"div",0)(4,"h4"),t._uU(5,"Inbound"),t.qZA(),t.YNc(6,As,28,3,"ng-container",1),t.ALo(7,"async"),t.TgZ(8,"p"),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"div",2),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"h4"),t._uU(13,"Outbound"),t.qZA(),t.YNc(14,Bs,31,3,"ng-container",1),t.ALo(15,"async"),t.qZA()(),t.YNc(16,Hs,2,0,"ng-template",null,3,t.W1O)),2&n){const s=t.MAs(17);t.xp6(6),t.Q6J("ngIf",t.lcZ(7,4,o.hasSlaves$))("ngIfElse",s),t.xp6(8),t.Q6J("ngIf",t.lcZ(15,6,o.hasMasters$))("ngIfElse",s)}},dependencies:[p.O5,Q.d,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,y,A,is,p.Ov,p.JJ],encapsulation:2,changeDetection:0})}return e})();var Gs=f(2939);function Es(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5),t.TgZ(6,"button",2),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.compact())}),t.TgZ(7,"mat-icon"),t._uU(8,"fullscreen_exit"),t.qZA(),t._uU(9," Compact "),t.qZA()(),t.TgZ(10,"div",3)(11,"dl",4)(12,"dt"),t._uU(13,"Tablespace"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.qZA(),t.TgZ(16,"dt"),t._uU(17,"DB Path"),t.qZA(),t.TgZ(18,"dd"),t._uU(19),t.qZA()(),t.TgZ(20,"pre",5),t._uU(21),t.qZA()()()}if(2&e){const a=i.ngIf,n=t.oxw();t.xp6(5),t.AsE(" ",n.tablespace,"://",n.dbPath," \xa0\xa0\xa0 "),t.xp6(10),t.Oqu(n.tablespace||"-"),t.xp6(4),t.Oqu(n.dbPath||"-"),t.xp6(2),t.Oqu(a)}}let $t=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.snackBar=s,this.tablespace=o.snapshot.paramMap.get("tablespace");const c=o.snapshot.url;this.dbPath=c.length?c.map(m=>m.path).join("/"):"",n.setTitle(this.tablespace+"://"+this.dbPath),this.properties$=a.yamcsClient.getRocksDbDatabaseProperties(this.tablespace,this.dbPath)}compact(){this.snackBar.open(`Compacting ${this.tablespace}://${this.dbPath}...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.compactRocksDbDatabase(this.tablespace,this.dbPath).then(()=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(a=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(Gs.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","/admin/rocksdb/databases","color","primary"],["mat-button","","color","primary",3,"click"],[1,"panel-content"],[1,"dl-horizontal"],[2,"font-size","10px","margin","0"]],template:function(n,o){1&n&&(t.YNc(0,Es,22,5,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.properties$))},dependencies:[p.O5,_.rH,C.lW,C.o6,U.Hw,y,A,p.Ov],encapsulation:2,changeDetection:0})}return e})();function js(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Tablespace"),t.qZA())}function zs(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.tablespace||"-")}}function Xs(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Data Dir"),t.qZA())}function Vs(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij("/",a.dbPath,"")}}const Ks=function(e,i){return[e,i]};function Ws(e,i){if(1&e&&(t.TgZ(0,"td",12)(1,"a",13),t._uU(2),t.YNc(3,Vs,2,1,"ng-container",14),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(3,Ks,a.tablespace,a.dbPath)),t.xp6(1),t.hij(" ",a.dataDir,""),t.xp6(1),t.Q6J("ngIf",a.dbPath)}}function tr(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"DB Path"),t.qZA())}function er(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.dbPath||"(root)")}}function ar(e,i){1&e&&t._UZ(0,"th",15)}function nr(e,i){1&e&&t._UZ(0,"td",12)}function ir(e,i){1&e&&t._UZ(0,"tr",16)}function or(e,i){1&e&&t._UZ(0,"tr",17)}let Lt=(()=>{class e{constructor(a,n){this.displayedColumns=["dataDir","tablespace","dbPath","actions"],this.dataSource=new r.by,n.setTitle("Open Databases"),a.yamcsClient.getRocksDbDatabases().then(o=>{this.dataSource.data=o})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","tablespace"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataDir"],["matColumnDef","dbPath"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"routerLink"],[4,"ngIf"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Open databases "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,js,2,0,"th",3),t.YNc(7,zs,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,Xs,2,0,"th",3),t.YNc(10,Ws,4,6,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,tr,2,0,"th",3),t.YNc(13,er,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,ar,1,0,"th",8),t.YNc(16,nr,1,0,"td",4),t.BQk(),t.YNc(17,ir,1,0,"tr",9),t.YNc(18,or,1,0,"tr",10),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[p.O5,_.rH,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A],encapsulation:2,changeDetection:0})}return e})(),sr=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-route-detail"]],inputs:{route:"route"},decls:12,vars:3,consts:[[1,"block-title"],[1,"block"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._uU(1,"Input Type"),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",0),t._uU(5,"Output Type"),t.qZA(),t.TgZ(6,"div",1),t._uU(7),t.qZA(),t.TgZ(8,"div",0),t._uU(9,"Log Format"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",o.route.inputType,"\n"),t.xp6(4),t.hij(" ",o.route.outputType,"\n"),t.xp6(4),t.hij(" ",o.route.logFormat||"-","\n"))},encapsulation:2,changeDetection:0})}return e})();function rr(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-toolbar"),t._uU(2," Route Detail "),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"app-route-detail",20),t.qZA(),t.BQk()),2&e){const a=i.ngIf;t.xp6(4),t.Q6J("route",a)}}function cr(e,i){1&e&&(t.TgZ(0,"ya-detail-toolbar"),t._uU(1," Select a route "),t.qZA())}function lr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Service"),t.qZA())}function ur(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.service||"Other")}}function pr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Method"),t.qZA())}function mr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.description||"-")}}function _r(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Requests"),t.qZA())}function dr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.requestCount)}}function fr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Errors"),t.qZA())}function gr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.errorCount)}}function hr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"HTTP"),t.qZA())}function Tr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.AsE("",a.httpMethod," ",a.url,"")}}function Zr(e,i){1&e&&t._UZ(0,"th",23)}function br(e,i){1&e&&t._UZ(0,"td",22)}function xr(e,i){1&e&&t._UZ(0,"tr",24)}const yr=function(e){return{selected:e}};function Ar(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.selectRoute(s))}),t.ALo(1,"async"),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw();t.ekj("deprecated",a.deprecated),t.Q6J("ngClass",t.VKq(5,yr,a===t.lcZ(1,3,n.selectedRoute$)))}}let Mt=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.route=o,this.router=s,this.filterControl=new u.p4,this.displayedColumns=["method","requestCount","errorCount","http","actions"],this.dataSource=new r.by,this.selectedRoute$=new Z.X(null),n.setTitle("API routes"),this.dataSource.filterPredicate=(c,m)=>c.url.toLowerCase().indexOf(m)>=0||c.description.toLowerCase().indexOf(m)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoutes().then(a=>{this.dataSource.data=a.routes||[]})}selectRoute(a){this.selectedRoute$.next(a)}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:36,vars:8,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[4,"ngIf","ngIfElse"],["noSelection",""],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter routes",3,"formControl"],["mat-table","","matSort","","matSortActive","requestCount","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","requestCount"],["matColumnDef","errorCount"],["matColumnDef","http"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","deprecated","click",4,"matRowDef","matRowDefColumns"],[2,"padding","0 16px"],[3,"route"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," API routes \xa0\xa0\xa0 "),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.refresh()}),t.TgZ(4,"mat-icon"),t._uU(5,"refresh"),t.qZA()()(),t.TgZ(6,"ya-detail-pane"),t.YNc(7,rr,5,1,"ng-container",1),t.ALo(8,"async"),t.YNc(9,cr,2,0,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(11,"div",3)(12,"div",4)(13,"div",5),t._UZ(14,"ya-search-filter",6),t.qZA(),t.TgZ(15,"table",7),t.ynx(16,8),t.YNc(17,lr,2,0,"th",9),t.YNc(18,ur,2,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,pr,2,0,"th",9),t.YNc(21,mr,2,1,"td",10),t.BQk(),t.ynx(22,12),t.YNc(23,_r,2,0,"th",9),t.YNc(24,dr,2,1,"td",10),t.BQk(),t.ynx(25,13),t.YNc(26,fr,2,0,"th",9),t.YNc(27,gr,2,1,"td",10),t.BQk(),t.ynx(28,14),t.YNc(29,hr,2,0,"th",9),t.YNc(30,Tr,2,2,"td",10),t.BQk(),t.ynx(31,15),t.YNc(32,Zr,1,0,"th",16),t.YNc(33,br,1,0,"td",10),t.BQk(),t.YNc(34,xr,1,0,"tr",17),t.YNc(35,Ar,2,7,"tr",18),t.qZA()()()()),2&n){const s=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,6,o.selectedRoute$))("ngIfElse",s),t.xp6(7),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns)}},dependencies:[p.mk,p.O5,u.JJ,u.oH,C.RK,U.Hw,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,S.gM,l.J8,l.MD,l.cF,y,A,sr,p.Ov],styles:[".deprecated[_ngcontent-%COMP%]{text-decoration:line-through}.detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return e})();function vr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",4),t._uU(1," check_circle\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function Ur(e,i){if(1&e&&(t.TgZ(0,"mat-icon",5),t._uU(1," check_circle\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function Cr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",6),t._uU(1," highlight_off\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function wr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1," lens\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}let qr=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-service-state"]],inputs:{service:"service"},decls:4,vars:4,consts:[["style","color: lightgreen",3,"matTooltip",4,"ngIf"],["class","success",3,"matTooltip",4,"ngIf"],["class","alert",3,"matTooltip",4,"ngIf"],["class","down",3,"matTooltip",4,"ngIf"],[2,"color","lightgreen",3,"matTooltip"],[1,"success",3,"matTooltip"],[1,"alert",3,"matTooltip"],[1,"down",3,"matTooltip"]],template:function(n,o){1&n&&(t.YNc(0,vr,2,1,"mat-icon",0),t.YNc(1,Ur,2,1,"mat-icon",1),t.YNc(2,Cr,2,1,"mat-icon",2),t.YNc(3,wr,2,1,"mat-icon",3)),2&n&&(t.Q6J("ngIf","STARTING"===o.service.state),t.xp6(1),t.Q6J("ngIf","RUNNING"===o.service.state),t.xp6(1),t.Q6J("ngIf","STOPPING"===o.service.state||"FAILED"===o.service.state),t.xp6(1),t.Q6J("ngIf","TERMINATED"===o.service.state||"NEW"===o.service.state))},dependencies:[p.O5,U.Hw,S.gM],encapsulation:2,changeDetection:0})}return e})();function Dr(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Name"),t.qZA())}function Sr(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.name)}}function Pr(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Class"),t.qZA())}function Yr(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.className)}}function Nr(e,i){1&e&&t._UZ(0,"th",17)}function kr(e,i){if(1&e&&(t.TgZ(0,"td",18),t._UZ(1,"app-service-state",19),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("service",a)}}function Qr(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Failure"),t.qZA())}function Ir(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-icon-action",23),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2).$implicit;return t.KtG(o.expanded=!0)}),t.qZA()}}function Jr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-icon-action",24),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2).$implicit;return t.KtG(o.expanded=!1)}),t.qZA()}}function Or(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Ir,1,0,"ya-icon-action",21),t.YNc(2,Jr,1,0,"ya-icon-action",22),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!a.expanded),t.xp6(1),t.Q6J("ngIf",a.expanded)}}function Rr(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.YNc(2,Or,3,2,"ng-container",20),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.failureMessage||"-"," "),t.xp6(1),t.Q6J("ngIf",a.failureCause)}}function $r(e,i){if(1&e&&(t.TgZ(0,"td",16)(1,"pre"),t._uU(2),t.qZA()()),2&e){const a=i.$implicit,n=t.oxw();t.uIk("colspan",n.displayedColumns.length),t.xp6(2),t.Oqu(a.failureCause||"-")}}function Lr(e,i){1&e&&t._UZ(0,"th",25)}function Mr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-more")(1,"button",26),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.startService.emit(o.name))}),t._uU(2," Start service "),t.qZA(),t.TgZ(3,"button",26),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.stopService.emit(o.name))}),t._uU(4," Stop service "),t.qZA()()}if(2&e){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled","TERMINATED"!==a.state&&"NEW"!==a.state),t.xp6(2),t.Q6J("disabled","RUNNING"!==a.state)}}function Fr(e,i){if(1&e&&(t.TgZ(0,"td",16),t.YNc(1,Mr,5,2,"ya-more",20),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",!a.readonly)}}function Br(e,i){1&e&&t._UZ(0,"tr",27)}function Hr(e,i){1&e&&t._UZ(0,"tr",28)}function Gr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",29),t.NdJ("click",function(){const s=t.CHM(a).$implicit;return t.KtG(s.expanded=!s.expanded)}),t.qZA()}2&e&&t.ekj("expanded",i.$implicit.expanded)}const Er=function(){return["detail"]};let jr=(()=>{class e{constructor(){this.displayedColumns=["state","name","className","failureMessage","actions"],this.dataSource=new r.by,this.readonly=!1,this.startService=new t.vpe,this.stopService=new t.vpe}ngAfterViewInit(){this.dataSource.sort=this.sort}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-services-table"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},inputs:{dataSource:"dataSource",readonly:"readonly"},outputs:{startService:"startService",stopService:"stopService"},decls:21,vars:5,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","","multiTemplateDataRows","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","className"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","failureMessage"],["matColumnDef","detail"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"service"],[4,"ngIf"],["icon","expand_more",3,"click",4,"ngIf"],["icon","expand_less",3,"click",4,"ngIf"],["icon","expand_more",3,"click"],["icon","expand_less",3,"click"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"item-detail",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,Dr,2,0,"th",2),t.YNc(3,Sr,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,Pr,2,0,"th",2),t.YNc(6,Yr,2,1,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,Nr,1,0,"th",6),t.YNc(9,kr,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,Qr,2,0,"th",2),t.YNc(12,Rr,3,2,"td",3),t.BQk(),t.ynx(13,9),t.YNc(14,$r,3,2,"td",3),t.BQk(),t.ynx(15,10),t.YNc(16,Lr,1,0,"th",11),t.YNc(17,Fr,2,1,"td",3),t.BQk(),t.YNc(18,Br,1,0,"tr",12),t.YNc(19,Hr,1,0,"tr",13),t.YNc(20,Gr,1,2,"tr",14),t.qZA()),2&n&&(t.Q6J("dataSource",o.dataSource),t.xp6(18),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,Er)))},dependencies:[p.O5,M.OP,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.J5,l.cQ,qr],styles:["tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}"],changeDetection:0})}return e})(),Ft=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.router=n,this.route=o,this.instance="_global",this.filterForm=new u.nJ({instance:new u.p4("_global")}),this.instanceOptions$=new Z.X([{id:"_global",label:"_global"}]),this.dataSource=new r.by,s.setTitle("Services"),a.yamcsClient.getInstances({filter:"state=RUNNING"}).then(c=>{for(const m of c)this.instanceOptions$.next([...this.instanceOptions$.value,{id:m.name,label:m.name}])}),this.initializeOptions(),this.refresh(),this.filterForm.get("instance").valueChanges.forEach(c=>{this.instance=c,this.refresh()})}initializeOptions(){const a=this.route.snapshot.queryParamMap;a.has("instance")&&(this.instance=a.get("instance"),this.filterForm.get("instance").setValue(this.instance))}startService(a){if(confirm(`Are you sure you want to start ${a} ?`)){const n=this.filterForm.get("instance").value;this.yamcs.yamcsClient.startService(n,a).then(()=>this.refresh())}}stopService(a){if(confirm(`Are you sure you want to stop ${a} ?`)){const n=this.filterForm.get("instance").value;this.yamcs.yamcsClient.stopService(n,a).then(()=>this.refresh())}}refresh(){this.updateURL();const a=this.filterForm.get("instance").value;this.yamcs.yamcsClient.getServices(a).then(n=>{this.dataSource.data=n})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{instance:this.instance||null},queryParamsHandling:"merge"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(_.F0),t.Y36(_.gz),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:12,vars:5,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","instance",3,"options"],[3,"dataSource","startService","stopService"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Services \xa0\xa0\xa0 "),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.refresh()}),t.TgZ(4,"mat-icon"),t._uU(5,"refresh"),t.qZA()()(),t.TgZ(6,"div",1)(7,"form",2)(8,"div",3),t._UZ(9,"ya-select",4),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"app-services-table",5),t.NdJ("startService",function(c){return o.startService(c)})("stopService",function(c){return o.stopService(c)}),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.filterForm),t.xp6(2),t.Q6J("options",t.lcZ(10,3,o.instanceOptions$)),t.xp6(2),t.Q6J("dataSource",o.dataSource))},dependencies:[u._Y,u.JJ,u.JL,u.sg,u.u,C.RK,U.Hw,S.gM,l.Hr,y,A,jr,p.Ov],encapsulation:2,changeDetection:0})}return e})();var zr=f(2268);function Xr(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Id"),t.qZA())}function Vr(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.id)}}function Kr(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"User"),t.qZA())}function Wr(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.username||"-")}}function tc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"IP address"),t.qZA())}function ec(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.ipAddress||"-")}}function ac(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Hostname"),t.qZA())}function nc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.hostname||"-")}}function ic(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Started"),t.qZA())}function oc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.startTime)||"-")}}function sc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Last renewed"),t.qZA())}function rc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._UZ(1,"app-ago",18),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("time",a.lastAccessTime)("useMissionTime",!1)}}function cc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Expires in"),t.qZA())}function lc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._UZ(1,"app-ago",18),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("time",a.expirationTime)("useMissionTime",!1)}}function uc(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Client"),t.qZA())}function pc(e,i){1&e&&(t.ynx(0),t._uU(1,", "),t.BQk())}function mc(e,i){if(1&e&&(t.ynx(0),t.YNc(1,pc,2,0,"ng-container",21),t._uU(2),t.ALo(3,"userAgent"),t.BQk()),2&e){const a=i.$implicit,n=i.first;t.xp6(1),t.Q6J("ngIf",!n),t.xp6(1),t.hij("",t.lcZ(3,2,a)," ")}}function _c(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}const dc=function(){return[]};function fc(e,i){if(1&e&&(t.TgZ(0,"td",17),t.YNc(1,mc,4,4,"ng-container",20),t.YNc(2,_c,2,0,"ng-container",21),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a.clients||t.DdM(2,dc)),t.xp6(1),t.Q6J("ngIf",!a.clients)}}function gc(e,i){1&e&&t._UZ(0,"tr",22)}function hc(e,i){1&e&&t._UZ(0,"tr",23)}let Bt=(()=>{class e{constructor(a,n,o){this.yamcs=a,this.displayedColumns=["id","user","ipAddress","hostname","started","lastAccessTime","expirationTime","clients"],this.tableTrackerFn=(s,c)=>c.id,this.dataSource=new r.by,n.setTitle("Sessions"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getSessions().then(a=>{this.dataSource.data=a||[]})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&(t.Gf(g.YE,5),t.Gf(N.NW,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first),t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:32,vars:7,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","started","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","ipAddress"],["matColumnDef","hostname"],["matColumnDef","started"],["matColumnDef","lastAccessTime"],["matColumnDef","expirationTime"],["matColumnDef","clients"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"time","useMissionTime"],["mat-header-cell","",1,"expand"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Sessions "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,Xr,2,0,"th",3),t.YNc(7,Vr,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,Kr,2,0,"th",3),t.YNc(10,Wr,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,tc,2,0,"th",3),t.YNc(13,ec,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,ac,2,0,"th",3),t.YNc(16,nc,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,ic,2,0,"th",3),t.YNc(19,oc,3,3,"td",4),t.BQk(),t.ynx(20,9),t.YNc(21,sc,2,0,"th",3),t.YNc(22,rc,2,2,"td",4),t.BQk(),t.ynx(23,10),t.YNc(24,cc,2,0,"th",3),t.YNc(25,lc,2,2,"td",4),t.BQk(),t.ynx(26,11),t.YNc(27,uc,2,0,"th",12),t.YNc(28,fc,3,3,"td",4),t.BQk(),t.YNc(29,gc,1,0,"tr",13),t.YNc(30,hc,1,0,"tr",14),t.qZA(),t._UZ(31,"mat-paginator",15),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource)("trackBy",o.tableTrackerFn),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},dependencies:[p.sg,p.O5,N.NW,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,zr.E,y,A,l.id,B],encapsulation:2,changeDetection:0})}return e})();var Tc=f(9038),H=f(2651);function Zc(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-sidebar-nav-group",23),t.NdJ("toggle",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.toggleUserManagementGroup())}),t.TgZ(1,"ya-sidebar-nav-item",24),t._uU(2," Users "),t.qZA(),t.TgZ(3,"ya-sidebar-nav-item",25),t._uU(4," Service accounts "),t.qZA(),t.TgZ(5,"ya-sidebar-nav-item",26),t._uU(6," Groups "),t.qZA(),t.TgZ(7,"ya-sidebar-nav-item",27),t._uU(8," Roles "),t.qZA()()}if(2&e){const a=t.oxw();t.Q6J("active",a.userManagementActive)("expanded",a.userManagementExpanded),t.xp6(1),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0)}}function bc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",28)(1,"mat-icon",8),t._uU(2,"devices"),t.qZA(),t._uU(3," Sessions "),t.qZA())}function xc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",29)(1,"mat-icon",8),t._uU(2,"attractions"),t.qZA(),t._uU(3," Services "),t.qZA())}function yc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",30)(1,"mat-icon",8),t._uU(2,"flip_camera_android"),t.qZA(),t._uU(3," Processor types "),t.qZA())}function Ac(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",31)(1,"mat-icon",8),t._uU(2,"share"),t.qZA(),t._uU(3," Replication "),t.qZA())}function vc(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-sidebar-nav-group",32),t.NdJ("toggle",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.toggleRocksDbGroup())}),t.TgZ(1,"ya-sidebar-nav-item",33),t._uU(2," Open databases "),t.qZA()()}if(2&e){const a=t.oxw();t.Q6J("active",a.rocksDbActive)("expanded",a.rocksDbExpanded),t.xp6(1),t.Q6J("subitem",!0)}}function Uc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",34)(1,"mat-icon",8),t._uU(2,"traffic"),t.qZA(),t._uU(3," HTTP traffic "),t.qZA())}function Cc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",35)(1,"mat-icon",8),t._uU(2,"api"),t.qZA(),t._uU(3," API routes "),t.qZA())}function wc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",36)(1,"mat-icon",8),t._uU(2,"access_time"),t.qZA(),t._uU(3," Leap seconds "),t.qZA())}function qc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",37)(1,"mat-icon",8),t._uU(2,"receipt"),t.qZA(),t._uU(3," Threads "),t.qZA())}function Dc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",38)(1,"mat-icon",8),t._uU(2,"memory"),t.qZA(),t._uU(3," System "),t.qZA())}function Sc(e,i){if(1&e&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("src",a.config.logo,t.LSH)}}let Ht=(()=>{class e{constructor(a,n,o,s,c,m,d){this.userManagementActive=!1,this.userManagementExpanded=!1,this.rocksDbActive=!1,this.rocksDbExpanded=!1,this.config=n.getConfig(),this.user=o.getUser();const v=c.bypassSecurityTrustResourceUrl(`${d}rocksdb.svg`);s.addSvgIcon("rocksdb",v),this.routerSubscription=m.events.pipe((0,at.h)(x=>x instanceof _.m2)).subscribe(x=>{const D=x.url;this.collapseAllGroups(),this.userManagementActive=!1,this.rocksDbActive=!1,D.match(/\/iam.*/)?(this.userManagementActive=!0,this.userManagementExpanded=!0):D.match(/\/rocksdb.*/)&&(this.rocksDbActive=!0,this.rocksDbExpanded=!0)})}collapseAllGroups(){this.userManagementExpanded=!1,this.rocksDbExpanded=!1}toggleUserManagementGroup(){const a=this.userManagementExpanded;this.collapseAllGroups(),this.userManagementExpanded=!a}toggleRocksDbGroup(){const a=this.rocksDbExpanded;this.collapseAllGroups(),this.rocksDbExpanded=!a}showRocksDbItem(){return this.user.hasSystemPrivilege("ControlArchiving")}showAccessControlItem(){return this.user.hasSystemPrivilege("ControlAccess")}showServicesItem(){return this.user.hasSystemPrivilege("ControlServices")}showSystemInfo(){return this.user.hasSystemPrivilege("ReadSystemInfo")}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.Vi),t.Y36(l.E4),t.Y36(k.e),t.Y36(U.jv),t.Y36(b.H7),t.Y36(_.F0),t.Y36(p.mr))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:35,vars:19,consts:[["messageBar",""],[1,"mat-typography"],["mode","side",3,"opened","disableClose"],[1,"sidenav-content"],[1,"top","module-title"],[1,"icon32",2,"margin-right","16px"],["dense",""],["routerLink","/admin",3,"exact"],[1,"item-icon"],["label","Access control","icon","supervised_user_circle",3,"active","expanded","toggle",4,"ngIf"],["routerLink","/admin/sessions",4,"ngIf"],["routerLink","/admin/services",4,"ngIf"],["routerLink","/admin/processor-types",4,"ngIf"],["routerLink","/admin/databases"],["routerLink","/admin/replication",4,"ngIf"],["label","RocksDB","svgIcon","rocksdb",3,"active","expanded","toggle",4,"ngIf"],["routerLink","/admin/http-traffic",4,"ngIf"],["routerLink","/admin/routes",4,"ngIf"],["routerLink","/admin/leap-seconds",4,"ngIf"],["routerLink","/admin/threads",4,"ngIf"],["routerLink","/admin/system",4,"ngIf"],[2,"flex","1 1 auto"],["class","navbar-logo",4,"ngIf"],["label","Access control","icon","supervised_user_circle",3,"active","expanded","toggle"],["routerLink","/admin/iam/users",3,"subitem"],["routerLink","/admin/iam/service-accounts",3,"subitem"],["routerLink","/admin/iam/groups",3,"subitem"],["routerLink","/admin/iam/roles",3,"subitem"],["routerLink","/admin/sessions"],["routerLink","/admin/services"],["routerLink","/admin/processor-types"],["routerLink","/admin/replication"],["label","RocksDB","svgIcon","rocksdb",3,"active","expanded","toggle"],["routerLink","/admin/rocksdb/databases",3,"subitem"],["routerLink","/admin/http-traffic"],["routerLink","/admin/routes"],["routerLink","/admin/leap-seconds"],["routerLink","/admin/threads"],["routerLink","/admin/system"],[1,"navbar-logo"],[3,"src"]],template:function(n,o){if(1&n&&(t._UZ(0,"ya-message-bar",null,0),t.TgZ(2,"mat-sidenav-container",1),t.ALo(3,"async"),t.TgZ(4,"mat-sidenav",2)(5,"div",3)(6,"mat-toolbar",4)(7,"mat-toolbar-row")(8,"mat-icon",5),t._uU(9,"security"),t.qZA(),t._uU(10," Admin Area "),t.qZA()(),t.TgZ(11,"mat-nav-list",6)(12,"ya-sidebar-nav-item",7)(13,"mat-icon",8),t._uU(14,"recent_actors"),t.qZA(),t._uU(15," Activity "),t.qZA(),t.YNc(16,Zc,9,6,"ya-sidebar-nav-group",9),t.YNc(17,bc,4,0,"ya-sidebar-nav-item",10),t.YNc(18,xc,4,0,"ya-sidebar-nav-item",11),t.YNc(19,yc,4,0,"ya-sidebar-nav-item",12),t.TgZ(20,"ya-sidebar-nav-item",13)(21,"mat-icon",8),t._uU(22,"storage"),t.qZA(),t._uU(23," Databases "),t.qZA(),t.YNc(24,Ac,4,0,"ya-sidebar-nav-item",14),t.YNc(25,vc,3,3,"ya-sidebar-nav-group",15),t.YNc(26,Uc,4,0,"ya-sidebar-nav-item",16),t.YNc(27,Cc,4,0,"ya-sidebar-nav-item",17),t.YNc(28,wc,4,0,"ya-sidebar-nav-item",18),t.YNc(29,qc,4,0,"ya-sidebar-nav-item",19),t.YNc(30,Dc,4,0,"ya-sidebar-nav-item",20),t.qZA(),t._UZ(31,"div",21),t.YNc(32,Sc,2,1,"div",22),t.qZA()(),t.TgZ(33,"mat-sidenav-content"),t._UZ(34,"router-outlet"),t.qZA()()),2&n){const s=t.MAs(1);t.xp6(2),t.ekj("message-bar-visible",t.lcZ(3,17,s.show$)),t.xp6(2),t.Q6J("opened",!0)("disableClose",!0),t.xp6(8),t.Q6J("exact",!0),t.xp6(4),t.Q6J("ngIf",o.showAccessControlItem()),t.xp6(1),t.Q6J("ngIf",o.showAccessControlItem()),t.xp6(1),t.Q6J("ngIf",o.showServicesItem()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(5),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showRocksDbItem()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(2),t.Q6J("ngIf",o.config.logo)}},dependencies:[p.O5,_.lC,_.rH,U.Hw,Tc.Hk,H.JX,H.TM,H.Rh,O.Ye,O.rD,l.pc,l.vN,l.Ss,p.Ov],styles:["mat-sidenav-container[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:#f7f7f7}mat-sidenav-container.message-bar-visible[_ngcontent-%COMP%]{top:96px}mat-sidenav[_ngcontent-%COMP%]{width:250px;background-color:#181818;border-right:0!important}.sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}mat-toolbar[_ngcontent-%COMP%]{background-color:#181818;border-bottom:1px solid rgba(255,255,255,.1);box-sizing:content-box;color:#d3d3d3;font-weight:300;font-size:14px}.navbar-logo[_ngcontent-%COMP%]{text-align:center;line-height:0}.navbar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"],changeDetection:0})}return e})();function Pc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",10),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t._UZ(9,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.description||"-"),t.xp6(2),t.Oqu(a.version||"-"),t.xp6(2),t.Oqu(a.vendor||"-")}}function Yc(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"h4"),t._uU(2,"Plugins"),t.qZA(),t.TgZ(3,"table",6)(4,"tr")(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Description"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Version"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Maintainer"),t.qZA(),t._UZ(13,"th",7),t.qZA(),t.YNc(14,Pc,10,4,"tr",8),t.qZA(),t._UZ(15,"br"),t.BQk()),2&e){const a=i.ngIf;t.xp6(14),t.Q6J("ngForOf",a)}}function Nc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"formatBytes"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"formatBytes"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"formatBytes"),t.qZA(),t._UZ(14,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.directory),t.xp6(2),t.Oqu(a.type||"-"),t.xp6(2),t.Oqu(t.lcZ(7,5,a.totalSpace)),t.xp6(3),t.Oqu(t.lcZ(10,7,a.unallocatedSpace)),t.xp6(3),t.Oqu(t.lcZ(13,9,a.usableSpace))}}function kc(e,i){1&e&&t.GkF(0)}const Qc=function(e){return{process:e,indent:0,last:!1}};function Ic(e,i){if(1&e&&(t.TgZ(0,"div",2)(1,"dl",3)(2,"dt"),t._uU(3,"Yamcs version"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.qZA(),t.TgZ(6,"dt"),t._uU(7,"Build"),t.qZA(),t.TgZ(8,"dd"),t._uU(9),t.qZA(),t.TgZ(10,"dt"),t._uU(11,"Server ID"),t.qZA(),t.TgZ(12,"dd"),t._uU(13),t.qZA()(),t.TgZ(14,"dl",4)(15,"dt"),t._uU(16,"OS"),t.qZA(),t.TgZ(17,"dd"),t._uU(18),t.qZA(),t.TgZ(19,"dt"),t._uU(20,"Architecture"),t.qZA(),t.TgZ(21,"dd"),t._uU(22),t.qZA(),t.TgZ(23,"dt"),t._uU(24,"JVM"),t.qZA(),t.TgZ(25,"dd"),t._uU(26),t.qZA()(),t.TgZ(27,"dl",4)(28,"dt"),t._uU(29,"Working directory"),t.qZA(),t.TgZ(30,"dd"),t._uU(31),t.qZA(),t.TgZ(32,"dt"),t._uU(33,"Config directory"),t.qZA(),t.TgZ(34,"dd"),t._uU(35),t.qZA(),t.TgZ(36,"dt"),t._uU(37,"Cache directory"),t.qZA(),t.TgZ(38,"dd"),t._uU(39),t.qZA(),t.TgZ(40,"dt"),t._uU(41,"Data directory"),t.qZA(),t.TgZ(42,"dd"),t._uU(43),t.qZA()(),t.TgZ(44,"dl",4)(45,"dt"),t._uU(46,"Uptime"),t.qZA(),t.TgZ(47,"dd"),t._uU(48),t.ALo(49,"duration"),t.qZA(),t.TgZ(50,"dt"),t._uU(51,"Load average"),t.qZA(),t.TgZ(52,"dd"),t._uU(53),t.ALo(54,"number"),t.qZA(),t.TgZ(55,"dt"),t._uU(56,"Available processors"),t.qZA(),t.TgZ(57,"dd"),t._uU(58),t.qZA(),t.TgZ(59,"dt"),t._uU(60,"Heap memory"),t.qZA(),t.TgZ(61,"dd"),t._uU(62),t.ALo(63,"formatBytes"),t.ALo(64,"formatBytes"),t.ALo(65,"formatBytes"),t.qZA(),t.TgZ(66,"dt"),t._uU(67,"Non-heap memory"),t.qZA(),t.TgZ(68,"dd"),t._uU(69),t.ALo(70,"formatBytes"),t.ALo(71,"formatBytes"),t.ALo(72,"formatBytes"),t.qZA(),t.TgZ(73,"dt"),t._uU(74,"Thread count"),t.qZA(),t.TgZ(75,"dd"),t._uU(76),t.qZA()(),t.YNc(77,Yc,16,1,"ng-container",5),t.ALo(78,"async"),t.TgZ(79,"h4"),t._uU(80,"Root directories"),t.qZA(),t.TgZ(81,"table",6)(82,"tr")(83,"th"),t._uU(84,"Directory"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Type"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Total space"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Unallocated space"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Usable space"),t.qZA(),t._UZ(93,"th",7),t.qZA(),t.YNc(94,Nc,15,11,"tr",8),t.qZA(),t._UZ(95,"br"),t.TgZ(96,"h4"),t._uU(97,"Process tree"),t.qZA(),t.TgZ(98,"table",6)(99,"tr")(100,"th"),t._uU(101,"PID"),t.qZA(),t.TgZ(102,"th"),t._uU(103,"User"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Start time"),t.qZA(),t.TgZ(106,"th",7),t._uU(107,"Command"),t.qZA()(),t.YNc(108,kc,1,0,"ng-container",9),t.qZA()()),2&e){const a=i.ngIf,n=t.oxw(),o=t.MAs(6);t.xp6(5),t.Oqu(a.yamcsVersion||"-"),t.xp6(4),t.Oqu(a.revision||"-"),t.xp6(4),t.Oqu(a.serverId||"-"),t.xp6(5),t.Oqu(a.os),t.xp6(4),t.Oqu(a.arch),t.xp6(4),t.Oqu(a.jvm),t.xp6(5),t.Oqu(a.workingDirectory),t.xp6(4),t.Oqu(a.configDirectory),t.xp6(4),t.Oqu(a.cacheDirectory),t.xp6(4),t.Oqu(a.dataDirectory),t.xp6(5),t.Oqu(t.lcZ(49,24,a.uptime)),t.xp6(5),t.Oqu(t.xi3(54,26,a.loadAverage,"1.2-2")||"-"),t.xp6(5),t.Oqu(a.availableProcessors),t.xp6(4),t.lnq(" ",t.lcZ(63,29,a.heapMemory)," (used: ",t.lcZ(64,31,a.heapMemory-a.usedHeapMemory),", limit: ",t.lcZ(65,33,a.maxHeapMemory)||"n/a",")"),t.xp6(7),t.lnq(" ",t.lcZ(70,35,a.nonHeapMemory)," (used: ",t.lcZ(71,37,a.nonHeapMemory-a.usedNonHeapMemory),", limit: ",t.lcZ(72,39,a.maxNonHeapMemory)||"n/a",")"),t.xp6(7),t.Oqu(a.jvmThreadCount),t.xp6(1),t.Q6J("ngIf",t.lcZ(78,41,n.plugins$)),t.xp6(17),t.Q6J("ngForOf",a.rootDirectories),t.xp6(14),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(43,Qc,a.process))}}function Jc(e,i){1&e&&(t.TgZ(0,"span",11),t._uU(1,"\u251c\u2500\u2500"),t.qZA())}function Oc(e,i){1&e&&(t.TgZ(0,"span",11),t._uU(1,"\u2514\u2500\u2500"),t.qZA())}function Rc(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",11),t._uU(2),t.qZA(),t.YNc(3,Jc,2,0,"span",12),t.YNc(4,Oc,2,0,"span",12),t.BQk()),2&e){const a=t.oxw(),n=a.indent,o=a.last;t.xp6(2),t.Oqu(" ".repeat(n)),t.xp6(1),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",o)}}function $c(e,i){1&e&&t.GkF(0)}const Lc=function(e,i,a){return{process:e,indent:i,last:a}};function Mc(e,i){if(1&e&&(t.ynx(0),t.YNc(1,$c,1,0,"ng-container",9),t.BQk()),2&e){const a=i.$implicit,n=i.last,o=t.oxw().indent;t.oxw();const s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.kEZ(2,Lc,a,o+2,n))}}const Fc=function(){return[]};function Bc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"datetime"),t.qZA(),t.TgZ(8,"td"),t.YNc(9,Rc,5,3,"ng-container",5),t._uU(10),t.qZA()(),t.YNc(11,Mc,2,6,"ng-container",8)),2&e){const a=i.process,n=i.indent;t.xp6(2),t.Oqu(a.pid),t.xp6(2),t.Oqu(a.user),t.xp6(2),t.Oqu(t.lcZ(7,6,a.startTime)||"-"),t.xp6(3),t.Q6J("ngIf",n),t.xp6(1),t.hij(" ",a.command," "),t.xp6(1),t.Q6J("ngForOf",a.children||t.DdM(8,Fc))}}let Gt=(()=>{class e{constructor(a,n){this.yamcs=a,this.info$=new Z.X(null),this.plugins$=new Z.X([]),n.setTitle("System"),this.yamcs.yamcsClient.getGeneralInfo().then(o=>this.plugins$.next(o.plugins||[])),this.systemInfoSubscription=a.yamcsClient.createSystemInfoSubscription(o=>{this.info$.next(o)})}ngOnDestroy(){this.systemInfoSubscription?.cancel()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:7,vars:3,consts:[["class","panel-content",4,"ngIf"],["processTemplate",""],[1,"panel-content"],[1,"dl-horizontal",2,"margin-top","0"],[1,"dl-horizontal"],[4,"ngIf"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"wrap200"],[1,"tree","mono"],["class","tree mono",4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," System "),t.qZA(),t.YNc(3,Ic,109,45,"div",0),t.ALo(4,"async"),t.qZA(),t.YNc(5,Bc,12,9,"ng-template",null,1,t.W1O)),2&n&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,o.info$)))},dependencies:[p.sg,p.O5,p.tP,l.Gj,y,A,p.Ov,p.JJ,l.id,l.uG,l.bP],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.tree[_ngcontent-%COMP%]{white-space:pre;color:var(--y-accent)}"],changeDetection:0})}return e})();function Hc(e,i){if(1&e&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij("(line: ",a.element.lineNumber,")")}}let Et=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-trace-element"]],inputs:{element:"element"},decls:4,vars:5,consts:[[3,"innerHTML"],[4,"ngIf"]],template:function(n,o){1&n&&(t._UZ(0,"span",0),t.ALo(1,"classNameHtml"),t._uU(2),t.YNc(3,Hc,2,1,"small",1)),2&n&&(t.Q6J("innerHTML",t.lcZ(1,3,o.element.className),t.oJD),t.xp6(2),t.hij(".",o.element.methodName,"\n"),t.xp6(1),t.Q6J("ngIf",o.element.lineNumber))},dependencies:[p.O5,l.f8],encapsulation:2,changeDetection:0})}return e})();function Gc(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"check"),t.qZA())}function Ec(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"close"),t.qZA())}function jc(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"check"),t.qZA())}function zc(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"close"),t.qZA())}function Xc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"app-trace-element",10),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Q6J("element",a)}}function Vc(e,i){if(1&e&&(t.TgZ(0,"table",8),t.YNc(1,Xc,3,1,"tr",9),t.qZA()),2&e){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",a.trace)}}function Kc(e,i){1&e&&(t.ynx(0),t._uU(1,"Information not available"),t.BQk())}function Wc(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5),t.qZA(),t.TgZ(6,"div",2)(7,"dl",3)(8,"dt"),t._uU(9,"ID"),t.qZA(),t.TgZ(10,"dd"),t._uU(11),t.qZA(),t.TgZ(12,"dt"),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.qZA(),t.TgZ(16,"dt"),t._uU(17,"Native"),t.qZA(),t.TgZ(18,"dd"),t.YNc(19,Gc,2,0,"mat-icon",4),t.YNc(20,Ec,2,0,"mat-icon",4),t.qZA(),t.TgZ(21,"dt"),t._uU(22,"Suspended"),t.qZA(),t.TgZ(23,"dd"),t.YNc(24,jc,2,0,"mat-icon",4),t.YNc(25,zc,2,0,"mat-icon",4),t.qZA(),t.TgZ(26,"dt"),t._uU(27,"Group"),t.qZA(),t.TgZ(28,"dd"),t._uU(29),t.qZA()(),t.TgZ(30,"div",5),t._UZ(31,"mat-divider"),t.qZA(),t.TgZ(32,"h4"),t._uU(33,"Stack trace"),t.qZA(),t.YNc(34,Vc,2,1,"table",6),t.YNc(35,Kc,2,0,"ng-container",0),t.qZA()()),2&e){const a=i.ngIf;t.xp6(5),t.hij(" ",a.name," "),t.xp6(6),t.Oqu(a.id),t.xp6(4),t.Oqu(a.name),t.xp6(4),t.Q6J("ngIf",a.native),t.xp6(1),t.Q6J("ngIf",!a.native),t.xp6(4),t.Q6J("ngIf",a.suspended),t.xp6(1),t.Q6J("ngIf",!a.suspended),t.xp6(4),t.Oqu((null==a.group?null:a.group.name)||"-"),t.xp6(5),t.Q6J("ngIf",a.trace),t.xp6(1),t.Q6J("ngIf",!a.trace)}}let jt=(()=>{class e{constructor(a,n,o){this.yamcs=n,this.title=o,this.thread$=new Z.X(null),a.paramMap.subscribe(s=>{const c=s.get("id");this.changeThread(Number(c))})}changeThread(a){this.yamcs.yamcsClient.getThread(a).then(n=>{this.thread$.next(n),this.title.setTitle(n.name)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","..","color","primary"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],["class","icon14",4,"ngIf"],[1,"section-divider"],["yaDataTable","",4,"ngIf"],[1,"icon14"],["yaDataTable",""],[4,"ngFor","ngForOf"],[3,"element"]],template:function(n,o){1&n&&(t.YNc(0,Wc,36,10,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.thread$))},dependencies:[p.sg,p.O5,_.rH,l.Gj,C.o6,U.Hw,Q.d,y,A,Et,p.Ov],encapsulation:2,changeDetection:0})}return e})();var tl=f(8645);function el(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1,"ID"),t.qZA())}function al(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.id)}}function nl(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Name"),t.qZA())}function il(e,i){if(1&e&&(t.TgZ(0,"td",19)(1,"a",20),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.id),t.xp6(1),t.hij(" ",a.name," ")}}function ol(e,i){1&e&&t._UZ(0,"th",21)}function sl(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"playlist_play"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function rl(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"timer"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function cl(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"pause"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function ll(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"block"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function ul(e,i){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,sl,2,1,"mat-icon",23),t.YNc(2,rl,2,1,"mat-icon",23),t.YNc(3,cl,2,1,"mat-icon",23),t.YNc(4,ll,2,1,"mat-icon",23),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf","RUNNABLE"===a.state),t.xp6(1),t.Q6J("ngIf","TIMED_WAITING"===a.state),t.xp6(1),t.Q6J("ngIf","WAITING"===a.state),t.xp6(1),t.Q6J("ngIf","BLOCKED"===a.state)}}function pl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Native"),t.qZA())}function ml(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function _l(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function dl(e,i){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,ml,2,0,"mat-icon",26),t.YNc(2,_l,2,0,"ng-container",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.native),t.xp6(1),t.Q6J("ngIf",!a.native)}}function fl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Suspended"),t.qZA())}function gl(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function hl(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Tl(e,i){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,gl,2,0,"mat-icon",26),t.YNc(2,hl,2,0,"ng-container",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.suspended),t.xp6(1),t.Q6J("ngIf",!a.suspended)}}function Zl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Group"),t.qZA())}function bl(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",(null==a.group?null:a.group.name)||"-"," ")}}function xl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Frame"),t.qZA())}function yl(e,i){if(1&e&&t._UZ(0,"app-trace-element",28),2&e){const a=t.oxw().$implicit;t.Q6J("element",a.trace[0])}}function Al(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function vl(e,i){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,yl,1,1,"app-trace-element",27),t.YNc(2,Al,2,0,"ng-container",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.trace),t.xp6(1),t.Q6J("ngIf",!a.trace)}}function Ul(e,i){1&e&&t._UZ(0,"th",29)}function Cl(e,i){1&e&&t._UZ(0,"td",19)}function wl(e,i){1&e&&t._UZ(0,"tr",30)}function ql(e,i){1&e&&t._UZ(0,"tr",31)}function Dl(e,i){if(1&e&&(t.TgZ(0,"table",1),t.ynx(1,2),t.YNc(2,el,2,0,"th",3),t.YNc(3,al,2,1,"td",4),t.BQk(),t.ynx(4,5),t.YNc(5,nl,2,0,"th",3),t.YNc(6,il,3,2,"td",4),t.BQk(),t.ynx(7,6),t.YNc(8,ol,1,0,"th",7),t.YNc(9,ul,5,4,"td",8),t.BQk(),t.ynx(10,9),t.YNc(11,pl,2,0,"th",10),t.YNc(12,dl,3,2,"td",4),t.BQk(),t.ynx(13,11),t.YNc(14,fl,2,0,"th",10),t.YNc(15,Tl,3,2,"td",4),t.BQk(),t.ynx(16,12),t.YNc(17,Zl,2,0,"th",10),t.YNc(18,bl,2,1,"td",4),t.BQk(),t.ynx(19,13),t.YNc(20,xl,2,0,"th",10),t.YNc(21,vl,3,2,"td",4),t.BQk(),t.ynx(22,14),t.YNc(23,Ul,1,0,"th",15),t.YNc(24,Cl,1,0,"td",4),t.BQk(),t.YNc(25,wl,1,0,"tr",16),t.YNc(26,ql,1,0,"tr",17),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}let Sl=(()=>{class e{constructor(){this.displayedColumns=["id","state","name","trace","native","suspended","group","actions"],this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.filterPredicate=(a,n)=>a.name.toLowerCase().indexOf(n)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.threads||[],this.dataSource.filter=this.filter}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-threads-table"]],viewQuery:function(n,o){if(1&n&&t.Gf(g.YE,5),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},inputs:{threads:"threads",filter:"filter"},features:[t.TTD],decls:1,vars:1,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",3,"dataSource",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","native"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","suspended"],["matColumnDef","group"],["matColumnDef","trace"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],["mat-header-cell",""],[4,"ngIf"],[3,"element",4,"ngIf"],[3,"element"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&t.YNc(0,Dl,27,3,"table",0),2&n&&t.Q6J("ngIf",o.dataSource)},dependencies:[p.O5,_.rH,U.Hw,g.YE,g.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,S.gM,Et],encapsulation:2,changeDetection:0})}return e})();function Pl(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" ALL (",t.lcZ(1,1,a.allThreadCount$),") ")}}function Yl(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" RUNNABLE (",t.lcZ(1,1,a.runnableThreadCount$),") ")}}function Nl(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" TIMED WAITING (",t.lcZ(1,1,a.timedWaitingThreadCount$),") ")}}function kl(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" WAITING (",t.lcZ(1,1,a.waitingThreadCount$),") ")}}function Ql(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" BLOCKED (",t.lcZ(1,1,a.blockedThreadCount$),") ")}}const Il=[{path:"",canActivate:[j.r,Xt.h,(e,i)=>(0,t.f3M)(z).canActivate(e,i)],canActivateChild:[j.q],runGuardsAndResolvers:"always",component:Ht,children:[{path:"",pathMatch:"full",component:et},{path:"http-traffic",canActivate:[Y],component:At},{path:"sessions",canActivate:[q],component:Bt},{path:"routes",canActivate:[Y],component:Mt},{path:"leap-seconds",canActivate:[Y],component:Jt},{path:"processor-types",canActivate:[Y],component:Ot},{path:"replication",canActivate:[Y],component:Rt},{path:"services",canActivate:[(e,i)=>(0,t.f3M)(W).canActivate(e,i)],component:Ft},{path:"databases",canActivate:[V],children:[{path:"",pathMatch:"full",component:yt},{path:":database",component:ot,children:[{path:"",pathMatch:"full",redirectTo:"tables"},{path:"tables",pathMatch:"full",component:xt},{path:"tables/:table",component:Zt,children:[{path:"",pathMatch:"full",redirectTo:"info"},{path:"info",component:Tt},{path:"data",component:ht},{path:"script",component:bt}]},{path:"shell",pathMatch:"full",component:ct},{path:"streams",pathMatch:"full",component:gt},{path:"streams/:stream",component:mt,children:[{path:"",pathMatch:"full",redirectTo:"columns"},{path:"columns",component:lt},{path:"data",component:pt},{path:"script",component:ft}]}]}]},{path:"rocksdb",runGuardsAndResolvers:"always",canActivate:[V],children:[{path:"",pathMatch:"full",redirectTo:"databases"},{path:"databases",pathMatch:"full",component:Lt},{path:"databases/:tablespace",children:[{path:"**",component:$t}]}]},{path:"iam/service-accounts",pathMatch:"full",component:kt,canActivate:[q]},{path:"iam/service-accounts/create",pathMatch:"full",component:Ct,canActivate:[q]},{path:"iam/users",pathMatch:"full",component:It,canActivate:[q]},{path:"iam/users/create",pathMatch:"full",component:wt,canActivate:[q]},{path:"iam/users/:username",pathMatch:"full",component:Qt,canActivate:[q]},{path:"iam/users/:username/edit",pathMatch:"full",component:Dt,canActivate:[q]},{path:"iam/groups",pathMatch:"full",component:Pt,canActivate:[q]},{path:"iam/groups/create",pathMatch:"full",component:Ut,canActivate:[q]},{path:"iam/groups/:name",pathMatch:"full",component:St,canActivate:[q]},{path:"iam/groups/:name/edit",pathMatch:"full",component:qt,canActivate:[q]},{path:"iam/roles",pathMatch:"full",component:Nt,canActivate:[q]},{path:"iam/roles/:name",pathMatch:"full",component:Yt,canActivate:[q]},{path:"threads",pathMatch:"full",component:(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.filterControl=new u.p4,this.filterValue$=new Z.X(null),this.allThreads$=new tl.x,this.allThreadCount$=this.allThreads$.pipe((0,w.U)(m=>m.length)),this.runnableThreads$=this.allThreads$.pipe((0,w.U)(m=>m.filter(d=>"RUNNABLE"===d.state))),this.runnableThreadCount$=this.runnableThreads$.pipe((0,w.U)(m=>m.length)),this.timedWaitingThreads$=this.allThreads$.pipe((0,w.U)(m=>m.filter(d=>"TIMED_WAITING"===d.state))),this.timedWaitingThreadCount$=this.timedWaitingThreads$.pipe((0,w.U)(m=>m.length)),this.waitingThreads$=this.allThreads$.pipe((0,w.U)(m=>m.filter(d=>"WAITING"===d.state))),this.waitingThreadCount$=this.waitingThreads$.pipe((0,w.U)(m=>m.length)),this.blockedThreads$=this.allThreads$.pipe((0,w.U)(m=>m.filter(d=>"BLOCKED"===d.state))),this.blockedThreadCount$=this.blockedThreads$.pipe((0,w.U)(m=>m.length)),n.setTitle("Threads"),this.threadDumpURL=a.yamcsClient.getThreadDumpURL(),this.refresh(),this.syncSubscription=c.syncSlow(()=>this.refresh())}refresh(){this.yamcs.yamcsClient.getThreads().then(a=>{this.allThreads$.next(a.threads||[])})}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.filterValue$.next(a.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.filterValue$.next((this.filterControl.value||"").toLowerCase())})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:41,vars:33,consts:[["mat-button","","color","primary",3,"href"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter threads",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"threads","filter"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Threads \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"notes"),t.qZA(),t._uU(6," Text dump "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"mat-tab-group",4)(11,"mat-tab"),t.YNc(12,Pl,2,3,"ng-template",5),t._UZ(13,"br")(14,"app-threads-table",6),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA(),t.TgZ(17,"mat-tab"),t.YNc(18,Yl,2,3,"ng-template",5),t._UZ(19,"br")(20,"app-threads-table",6),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA(),t.TgZ(23,"mat-tab"),t.YNc(24,Nl,2,3,"ng-template",5),t._UZ(25,"br")(26,"app-threads-table",6),t.ALo(27,"async"),t.ALo(28,"async"),t.qZA(),t.TgZ(29,"mat-tab"),t.YNc(30,kl,2,3,"ng-template",5),t._UZ(31,"br")(32,"app-threads-table",6),t.ALo(33,"async"),t.ALo(34,"async"),t.qZA(),t.TgZ(35,"mat-tab"),t.YNc(36,Ql,2,3,"ng-template",5),t._UZ(37,"br")(38,"app-threads-table",6),t.ALo(39,"async"),t.ALo(40,"async"),t.qZA()()()()),2&n&&(t.xp6(3),t.Q6J("href",o.threadDumpURL,t.LSH),t.xp6(6),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("mat-stretch-tabs",!1),t.xp6(4),t.Q6J("threads",t.lcZ(15,13,o.allThreads$))("filter",t.lcZ(16,15,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(21,17,o.runnableThreads$))("filter",t.lcZ(22,19,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(27,21,o.timedWaitingThreads$))("filter",t.lcZ(28,23,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(33,25,o.waitingThreads$))("filter",t.lcZ(34,27,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(39,29,o.blockedThreads$))("filter",t.lcZ(40,31,o.filterValue$)))},dependencies:[u.JJ,u.oH,C.zs,U.Hw,P.uD,P.uX,P.SP,l.cF,y,A,Sl,p.Ov],encapsulation:2,changeDetection:0})}return e})(),canActivate:[Y]},{path:"threads/:id",component:jt,canActivate:[Y]},{path:"system",pathMatch:"full",component:Gt,canActivate:[Y]}]}];let Jl=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(Il),_.Bz]})}return e})(),Rl=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[E.m]})}return e})(),$l=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[E.m,Rl,Jl]})}return e})()}}]);