"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[376],{7376:(vt,B,h)=>{h.r(B),h.d(B,{ArchiveModule:()=>yt});var F=h(7216),S=h(1896),G=h(3906),D=h(7914),H=h(4529),Q=h(8484),t=h(5879),u=h(6223),y=h(347),m=h(6516),P=h(5619),W=h(3620),j=h(7561),d=h(7700),U=h(6814);let V=(()=>{class a{constructor(e,i,o,n){this.dialogRef=e,this.yamcs=i,this.downloadURL$=new P.X(null),this.form=o.group({start:[null,u.kI.required],stop:[null,u.kI.required]}),this.form.valueChanges.subscribe(g=>{if(this.form.valid){const b=i.yamcsClient.getPacketsDownloadURL(i.instance,{start:m.P6.toISOString(g.start),stop:m.P6.toISOString(g.stop),format:"raw"});this.downloadURL$.next(b)}else this.downloadURL$.next(null)});let s=n.start,c=n.stop;(!s||!c)&&(c=this.yamcs.getMissionTime(),s=m.P6.subtractDuration(c,"PT1H")),this.form.setValue({start:m.P6.toISOString(s),stop:m.P6.toISOString(c)})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(d.so),t.Y36(m.C8),t.Y36(u.QS),t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-download-dump-dialog"]],decls:16,vars:6,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["formControlName","start"],["formControlName","stop"],["align","end"],["mat-dialog-close","",1,"ya-button"],[3,"link","disabled","primary","click"]],template:function(i,o){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Download Packet Dump"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"label"),t._uU(5," Start "),t._UZ(6,"ya-date-time-input",3),t.qZA(),t.TgZ(7,"label"),t._uU(8," Stop "),t._UZ(9,"ya-date-time-input",4),t.qZA()()(),t.TgZ(10,"mat-dialog-actions",5)(11,"button",6),t._uU(12,"CANCEL"),t.qZA(),t.TgZ(13,"ya-download-button",7),t.NdJ("click",function(){return o.closeDialog()}),t.ALo(14,"async"),t._uU(15," DOWNLOAD "),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("link",t.lcZ(14,4,o.downloadURL$))("disabled",!o.form.valid)("primary",!0))},dependencies:[u._Y,u.JJ,u.JL,u.sg,u.u,d.ZT,d.uh,d.xY,d.H8,m.t,m.NA,U.Ov],encapsulation:2})}return a})();class Z extends y.rK{constructor(p,e){super(p),this.label=e,this.borderWidth=0,this.multiline=!1,this.itemBorderColor="rgba(0, 0, 0, 0.1)",this.itemBorderWidth=1,this.itemCornerRadius=0,this.itemTextOverflow="hide",this.itemHeight=20,this.addItemClickListener(i=>{const{start:o,stop:n}=i.item;o&&n?this.timeline.setSelection(o,n):this.timeline.clearSelection()})}setupTooltip(p,e){this.addItemMouseMoveListener(i=>{const{start:o,stop:n,data:s}=i.item;let c=s.name+"<br>";c+=`Start: ${e.transform(new Date(o))}<br>`,c+=`Stop:&nbsp; ${e.transform(new Date(n))}<br>`,s.count>=0?(c+=`Count: ${s.count}`,s.count>1&&(c+=` (${(s.count/((n-o)/1e3)).toFixed(3)} Hz)`)):s.description&&(c+=s.description),p.show(c,i.clientX,i.clientY)}),this.addItemMouseLeaveListener(i=>{p.hide()})}loadData(p){const e=[];for(const i of p.entry){const o=m.P6.toDate(i.start).getTime(),n=m.P6.toDate(i.stop).getTime(),s={start:o,stop:n,data:{name:p.id.name,count:i.count}};i.count>1&&(s.label=`${(i.count/((n-o)/1e3)).toFixed(1)} Hz`),e.push(s)}this.items=e}}let X=(()=>{class a{constructor(e,i){this.dialogRef=e,this.data=i,this.date=new u.p4(null,[u.kI.required]),this.data.date&&this.date.setValue(m.P6.toISOString(this.data.date))}select(){const e=m.P6.toDate(this.date.value);this.dialogRef.close({date:e})}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(d.so),t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-jump-to-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"ya-form","mat-typography"],[3,"formControl"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Jump to date"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"label"),t._uU(4," Date "),t._UZ(5,"ya-date-time-input",2),t.qZA()(),t.TgZ(6,"mat-dialog-actions",3)(7,"button",4),t._uU(8,"CANCEL"),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return o.select()}),t._uU(10,"OK"),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("formControl",o.date))},dependencies:[u.JJ,u.oH,d.ZT,d.uh,d.xY,d.H8,m.t],encapsulation:2})}return a})(),K=(()=>{class a{constructor(e,i,o,n){this.dialogRef=e,this.yamcs=o,this.data=n;let c,s=o.getMissionTime();this.data&&(this.data.start&&(s=this.data.start),this.data.stop&&(c=this.data.stop)),this.form=i.group({start:[m.P6.toISOString(s),[u.kI.required]],stop:[c?m.P6.toISOString(c):""]})}submit(){const e={start:m.P6.toISOString(this.form.value.start)};this.form.value.stop&&(e.stop=m.P6.toISOString(this.form.value.stop)),this.dialogRef.close(e)}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(d.so),t.Y36(u.QS),t.Y36(m.C8),t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-modify-replay-dialog"]],decls:20,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["formControlName","start"],[1,"hint"],["formControlName","stop"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(i,o){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Configure replay"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"label"),t._uU(5," Start time"),t._UZ(6,"br")(7,"ya-date-time-input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Stop time "),t.TgZ(11,"span",4),t._uU(12,"(optional)"),t.qZA(),t._UZ(13,"ya-date-time-input",5),t.qZA(),t._UZ(14,"br"),t.qZA()(),t.TgZ(15,"mat-dialog-actions",6)(16,"button",7),t._uU(17,"CANCEL"),t.qZA(),t.TgZ(18,"button",8),t.NdJ("click",function(){return o.submit()}),t._uU(19,"SUBMIT"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(15),t.Q6J("disabled",!o.form.valid))},dependencies:[u._Y,u.JJ,u.JL,u.sg,u.u,d.ZT,d.uh,d.xY,d.H8,m.t],encapsulation:2})}return a})();class tt extends y.Qu{constructor(p){super(p);const e=document.createElement("canvas");e.width=30,e.height=30;const i=e.getContext("2d");i.fillStyle="rgba(148, 0, 211, 0.07)",i.fillRect(0,0,30,30),i.beginPath(),i.moveTo(30,0),i.lineTo(0,30),i.strokeStyle="rgba(221, 221, 221, 0.2)",i.stroke(),this.pattern=i.createPattern(e,"repeat")}drawOverlay(p){if(!this.replayRequest)return;const{start:e,stop:i,endAction:o}=this.replayRequest;if(e&&i){const n=Math.round(this.timeline.positionTime(new Date(e).getTime())),s=Math.round(this.timeline.positionTime(new Date(i).getTime()));if(p.fillRect({x:n+.5,y:0,width:s-n,height:p.ctx.canvas.height,fill:this.pattern}),p.strokePath({color:"rgba(148, 0, 211, 0.3)",lineWidth:1,path:new y.y$(n+.5,0).lineTo(n+.5,p.ctx.canvas.height)}),p.strokePath({color:"rgba(148, 0, 211, 0.3)",lineWidth:1,path:new y.y$(s+.5,0).lineTo(s+.5,p.ctx.canvas.height)}),"LOOP"===o){const{fontFamily:c,textSize:g}=this.timeline;p.fillText({x:s-3,y:0,align:"right",baseline:"top",text:"\u221e",color:"darkviolet",font:`${g}px ${c}`})}}}get replayRequest(){return this._replayRequest}set replayRequest(p){this._replayRequest=p,this.reportMutation()}}const et=["tt"];let it=(()=>{class a{show(e,i,o){const n=this.tt.nativeElement;n.style.left=i+"px",n.style.top=o+"px",n.style.display="block",n.innerHTML=e}hide(){this.tt.nativeElement.style.display="none"}static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],viewQuery:function(i,o){if(1&i&&t.Gf(et,7),2&i){let n;t.iGM(n=t.CRH())&&(o.tt=n.first)}},decls:2,vars:0,consts:[[1,"ya-tooltip"],["tt",""]],template:function(i,o){1&i&&t._UZ(0,"div",0,1)},styles:[".ya-tooltip[_ngcontent-%COMP%]{position:absolute;display:none;white-space:nowrap;color:#fff;border-radius:2px;max-width:250px;padding:6px 8px;margin-top:14px;background:rgba(97,97,97,.9);font-family:Roboto Mono,monospace;font-size:10px}"]})}return a})();class k extends y.jL{constructor(p,e){super(p),this.label=e,this.background="#f5f5f5",this.contentHeight=20}}var ot=h(6593),nt=h(3651),st=h(2939),x=h(2296),at=h(617),rt=h(2596),lt=h(3422),ct=h(858);const mt=["container"];function pt(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){const n=t.CHM(e).ngIf,s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.enableLoop(s,"LOOP"!==n.endAction))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t._uU(3),t.qZA()}if(2&a){const e=p.ngIf;t.Q6J("disabled",!e.start||!e.stop),t.xp6(2),t.Oqu("LOOP"===e.endAction?"repeat_on":"repeat"),t.xp6(1),t.hij(" Repeat: ","LOOP"===e.endAction?"on":"off"," ")}}function ut(a,p){if(1&a&&(t.ynx(0),t.YNc(1,pt,4,3,"button",18),t.BQk()),2&a){const e=p.ngIf;t.xp6(1),t.Q6J("ngIf",e.replayRequest)}}function ht(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"label",19)(1,"input",20),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateLegend())}),t.qZA(),t._uU(2),t.qZA()}if(2&a){const e=p.$implicit;t.Udp("background-color",e.bg)("color",e.fg),t.xp6(1),t.Q6J("formControlName",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function dt(a,p){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"datetime"),t.ALo(3,"datetime"),t.qZA()),2&a){const e=p.ngIf;t.xp6(1),t.AsE(" ",t.xi3(2,2,null==e?null:e.start,!1)," \u2013 ",t.lcZ(3,5,null==e?null:e.stop)," ")}}const R="#ffcc00",I="#1c4b8b",O="orange",J="rgb(173, 94, 0)",M="#ffff66",N="#1c4b8b",q="palegoldenrod",L="#555",z="navajowhite",Y="#1c4b8b";const gt=[{path:"",canActivate:[D.r,G._],canActivateChild:[D.q],runGuardsAndResolvers:"always",component:H.K,children:[{path:"",pathMatch:"full",component:(()=>{class a{constructor(e,i,o,n,s,c,g,b,T,_){this.yamcs=i,this.route=o,this.router=n,this.overlay=s,this.dialog=c,this.snackBar=g,this.dateTimePipe=b,this.messageService=T,this.synchronizer=_,this.legendOptions=[{id:"packets",name:"Packets",bg:q,fg:L,checked:!0},{id:"parameters",name:"Parameter Groups",bg:z,fg:Y,checked:!0},{id:"commands",name:"Commands",bg:R,fg:I,checked:!1},{id:"events",name:"Events",bg:M,fg:N,checked:!1}],this.processor$=new P.X(null),this.rangeSelection$=new P.X(null),this.viewportRange$=new P.X(null),this.tool$=new P.X("hand"),this.packetNames=[],this.subscriptions=[],e.setTitle("Archive browser"),-1!==(i.connectionInfo$.value?.instance?.capabilities||[]).indexOf("ccsds-completeness")&&(this.legendOptions=[{id:"completeness",name:"Completeness",bg:O,fg:J,checked:!0},...this.legendOptions]),this.processor$.next(i.getProcessor()),i.processor&&(this.processorSubscription=this.yamcs.yamcsClient.createProcessorSubscription({instance:i.instance,processor:i.processor},r=>{this.processor$.next(r)})),this.filterForm=new u.nJ({});const v=this.route.snapshot.queryParamMap;for(const r of this.legendOptions){let C=r.checked;v.has(r.id)&&(C="true"===v.get(r.id)),this.filterForm.addControl(r.id,new u.p4(C))}const w=new t.SBq(document.body),A=this.overlay.position().flexibleConnectedTo(w).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withPush(!1),l=this.overlay.create({positionStrategy:A}),f=new Q.C5(it);this.tooltipInstance=l.attach(f).instance}hideTooltip(){this.tooltipInstance.hide()}ngAfterViewInit(){this.yamcs.yamcsClient.getPacketNames(this.yamcs.instance).then(e=>{this.packetNames=e.packets||[],this.initializeTimeline()})}initializeTimeline(){this.timeline=new y.TY(this.container.nativeElement),this.timeline.addViewportChangeListener(s=>{this.viewportRange$.next({start:new Date(s.start),stop:new Date(s.stop)})}),this.viewportRange$.pipe((0,W.b)(400)).forEach(s=>{this.refreshData();const c={};for(const g of this.legendOptions)c[g.id]=this.filterForm.value[g.id];this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge",queryParams:{start:new Date(s.start).toISOString(),stop:new Date(s.stop).toISOString(),...c}})}),this.timeline.addViewportDoubleClickListener(s=>{this.yamcs.getProcessor()?.replay&&this.yamcs.yamcsClient.editReplayProcessor(this.yamcs.instance,this.yamcs.processor,{seek:new Date(s.time).toISOString()}).catch(g=>this.messageService.showError(g))});const e=this.route.snapshot.queryParamMap;if(e.get("start")&&e.get("stop")){const s=m.P6.toDate(e.get("start")),c=m.P6.toDate(e.get("stop"));this.timeline.setViewRange(s.getTime(),c.getTime())}else{const s=this.yamcs.getMissionTime();s.setUTCHours(0,0,0,0);const c=new Date(s.getTime());c.setUTCDate(s.getUTCDate()+1),this.timeline.setViewRange(s.getTime(),c.getTime())}const i=new y._G(this.timeline);i.time=this.yamcs.getMissionTime().getTime();const o=new tt(this.timeline);this.subscriptions.push(this.synchronizer.sync(()=>{i.time=this.yamcs.getMissionTime().getTime();const s=this.processor$.value?.replayRequest;o.replayRequest=s})),new y.zp(this.timeline);const n=new y.nY(this.timeline);n.contentHeight=20,n.label="UTC",n.timezone="UTC",n.frozen=!0,n.fullHeight=!0,this.timeline.addViewportSelectionListener(s=>{this.rangeSelection$.next(s.selection?{start:new Date(s.selection.start),stop:new Date(s.selection.stop)}:null)})}fitAll(){const e=[];e.push(this.yamcs.yamcsClient.getPackets(this.yamcs.instance,{limit:1,order:"asc"})),e.push(this.yamcs.yamcsClient.getPackets(this.yamcs.instance,{limit:1,order:"desc"})),Promise.all(e).then(i=>{const o=i[0],n=i[1];if(o.packet?.length&&n.packet?.length){const s=m.P6.toDate(o.packet[0].generationTime),c=m.P6.toDate(n.packet[0].generationTime);this.timeline.setViewRange(s.getTime(),c.getTime())}}).catch(i=>this.messageService.showError(i))}jumpToToday(){const e=this.yamcs.getMissionTime();e.setUTCHours(0,0,0,0);const i=e.getTime();e.setUTCDate(e.getUTCDate()+1);const o=e.getTime();this.timeline.setViewRange(i,o)}jumpToNow(){const e=this.yamcs.getMissionTime();this.timeline.panTo(e.getTime())}openJumpToDialog(){this.dialog.open(X,{width:"400px",data:{date:new Date(this.timeline.center)}}).afterClosed().subscribe(o=>{o&&this.timeline.panTo(o.date.getTime())})}toggleMove(e){this.timeline.panBy(e),window.clearInterval(this.moveInterval),this.moveInterval=window.setInterval(()=>this.timeline.panBy(e),50)}untoggleMove(){window.clearInterval(this.moveInterval),this.moveInterval=void 0}pageLeft(){const{start:e,stop:i}=this.timeline,o=this.timeline.distanceBetween(e,i);this.timeline.panBy(-o)}pageRight(){const{start:e,stop:i}=this.timeline,o=this.timeline.distanceBetween(e,i);this.timeline.panBy(o)}zoomIn(){this.timeline.zoomIn()}zoomOut(){this.timeline.zoomOut()}setTool(e){this.tool$.next(e),this.timeline.tool=e}replayRange(){const e=this.rangeSelection$.value;if(e){const i=this.processor$.value;i?.replay?this.modifyReplay(i,e):this.startReplay(e)}}startReplay(e){this.dialog.open(j.N,{width:"400px",data:{start:e.start,stop:e.stop}}).afterClosed().subscribe(i=>{i&&(this.snackBar.open("Initializing replay...",void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.createProcessor(i).then(()=>{this.yamcs.switchContext(this.yamcs.instance,i.name),this.snackBar.open("Joining replay",void 0,{duration:3e3,horizontalPosition:"end"})}).catch(o=>{this.snackBar.open("Failed to initialize replay",void 0,{duration:3e3,horizontalPosition:"end"})}))})}modifyReplay(e,i){this.dialog.open(K,{width:"400px",data:{start:i.start,stop:i.stop}}).afterClosed().subscribe(o=>{o&&(this.snackBar.open("Updating replay...",void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.editReplayProcessor(e.instance,e.name,o).catch(n=>{this.messageService.showError(n)}).finally(()=>this.snackBar.dismiss()))})}enableLoop(e,i){this.yamcs.yamcsClient.editReplayProcessor(e.instance,e.name,{loop:i}).catch(o=>this.messageService.showError(o))}downloadDump(){const e=this.rangeSelection$.value;e&&this.dialog.open(V,{width:"400px",data:{start:e.start,stop:e.stop}})}updateLegend(){this.refreshData()}refreshData(){const e=this.timeline.stop-this.timeline.start,i=new Date(this.timeline.start-e).toISOString(),o=new Date(this.timeline.stop+e).toISOString();let n=Promise.resolve([]);this.filterForm.value.completeness&&(n=this.yamcs.yamcsClient.getCompletenessIndex(this.yamcs.instance,{start:i,stop:o,limit:1e3}));let s=Promise.resolve([]);this.filterForm.value.packets&&(s=this.yamcs.yamcsClient.getPacketIndex(this.yamcs.instance,{start:i,stop:o,limit:1e3}));let c=Promise.resolve([]);this.filterForm.value.parameters&&(c=this.yamcs.yamcsClient.getParameterIndex(this.yamcs.instance,{start:i,stop:o,limit:1e3}));let g=Promise.resolve([]);this.filterForm.value.commands&&(g=this.yamcs.yamcsClient.getCommandIndex(this.yamcs.instance,{start:i,stop:o,limit:1e3}));let b=Promise.resolve([]);this.filterForm.value.events&&(b=this.yamcs.yamcsClient.getEventIndex(this.yamcs.instance,{start:i,stop:o,limit:1e3})),Promise.all([n,s,c,g,b]).then(T=>{const _=T[0],E=T[1],v=T[2],w=T[3],A=T[4];for(const l of this.timeline.getBands())l instanceof y.nY||this.timeline.removeChild(l);for(let l=0;l<_.length;l++){0===l&&new k(this.timeline,"Completeness");const f=_[l],r=new Z(this.timeline,f.id.name);r.itemBackground=O,r.itemTextColor=J,r.borderWidth=l===_.length-1?1:0,r.marginBottom=l===_.length-1?20:0,r.setupTooltip(this.tooltipInstance,this.dateTimePipe),r.loadData(f)}if(this.filterForm.value.packets)for(let l=0;l<this.packetNames.length;l++){0===l&&new k(this.timeline,"Packets");const f=this.packetNames[l],r=new Z(this.timeline,f);r.itemBackground=q,r.itemTextColor=L,r.borderWidth=l===this.packetNames.length-1?1:0,r.marginBottom=l===this.packetNames.length-1?20:0,r.setupTooltip(this.tooltipInstance,this.dateTimePipe);const C=E.find(Tt=>Tt.id.name===f);C&&r.loadData(C)}for(let l=0;l<v.length;l++){0===l&&new k(this.timeline,"Parameter Groups");const f=v[l],r=new Z(this.timeline,f.id.name);r.itemBackground=z,r.itemTextColor=Y,r.borderWidth=l===v.length-1?1:0,r.marginBottom=l===v.length-1?20:0,r.setupTooltip(this.tooltipInstance,this.dateTimePipe),r.loadData(f)}for(let l=0;l<w.length;l++){0===l&&new k(this.timeline,"Commands");const f=w[l],r=new Z(this.timeline,f.id.name);r.itemBackground=R,r.itemTextColor=I,r.borderWidth=l===w.length-1?1:0,r.marginBottom=l===w.length-1?30:0,r.setupTooltip(this.tooltipInstance,this.dateTimePipe),r.loadData(f)}for(let l=0;l<A.length;l++){0===l&&new k(this.timeline,"Events");const f=A[l],r=new Z(this.timeline,f.id.name);r.itemBackground=M,r.itemTextColor=N,r.borderWidth=l===A.length-1?1:0,r.marginBottom=l===A.length-1?20:0,r.setupTooltip(this.tooltipInstance,this.dateTimePipe),r.loadData(f)}})}ngOnDestroy(){this.processorSubscription?.cancel(),this.subscriptions.forEach(e=>e.unsubscribe()),this.timeline.disconnect()}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(ot.Dx),t.Y36(m.C8),t.Y36(S.gz),t.Y36(S.F0),t.Y36(nt.aV),t.Y36(d.uw),t.Y36(st.ux),t.Y36(m.id),t.Y36(m.ez),t.Y36(m.jF))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],viewQuery:function(i,o){if(1&i&&t.Gf(mt,7),2&i){let n;t.iGM(n=t.CRH())&&(o.container=n.first)}},hostBindings:function(i,o){1&i&&t.NdJ("mouseleave",function(){return o.hideTooltip()})},decls:86,vars:22,consts:[["noscroll","true"],["mat-button","","color","primary",3,"disabled","click"],[4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[2,"height","24px","margin","6px"],[3,"formGroup"],[1,"ya-button",3,"click"],[1,"ya-button",3,"mousedown","mouseup","mouseleave"],["matTooltip","Use pan tool",1,"ya-button",3,"click"],["matTooltip","Use range selection tool",1,"ya-button",3,"click"],["class","legend no-select",3,"backgroundColor","color",4,"ngFor","ngForOf"],[1,"timeline-container"],["container",""],[1,"zoom-actions"],[1,"zoom-actions-inner","mat-elevation-z1"],["mat-button","",3,"click"],[1,"separator"],[1,"info"],["mat-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"legend","no-select"],["type","checkbox",3,"formControlName","change"]],template:function(i,o){1&i&&(t.TgZ(0,"app-instance-page",0)(1,"app-instance-toolbar"),t._uU(2," Archive browser \xa0\xa0\xa0 "),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.replayRange()}),t.ALo(4,"async"),t.TgZ(5,"mat-icon"),t._uU(6,"video_settings"),t.qZA(),t._uU(7," Replay range "),t.qZA(),t.YNc(8,ut,2,1,"ng-container",2),t.ALo(9,"async"),t.TgZ(10,"button",1),t.NdJ("click",function(){return o.downloadDump()}),t.ALo(11,"async"),t.TgZ(12,"mat-icon"),t._uU(13,"file_download"),t.qZA(),t._uU(14," Download dump "),t.qZA(),t.TgZ(15,"button",3),t.NdJ("click",function(){return o.refreshData()}),t.TgZ(16,"mat-icon"),t._uU(17,"refresh"),t.qZA()()(),t.TgZ(18,"div",4)(19,"form",5)(20,"button",6),t.NdJ("click",function(){return o.pageLeft()}),t.TgZ(21,"mat-icon"),t._uU(22,"west"),t.qZA()(),t.TgZ(23,"button",7),t.NdJ("mousedown",function(){return o.toggleMove(-50)})("mouseup",function(){return o.untoggleMove()})("mouseleave",function(){return o.untoggleMove()}),t.TgZ(24,"mat-icon"),t._uU(25,"chevron_left"),t.qZA()(),t.TgZ(26,"button",7),t.NdJ("mousedown",function(){return o.toggleMove(50)})("mouseup",function(){return o.untoggleMove()})("mouseleave",function(){return o.untoggleMove()}),t.TgZ(27,"mat-icon"),t._uU(28,"chevron_right"),t.qZA()(),t.TgZ(29,"button",6),t.NdJ("click",function(){return o.pageRight()}),t.TgZ(30,"mat-icon"),t._uU(31,"east"),t.qZA()(),t._uU(32," \xa0 "),t.TgZ(33,"button",6),t.NdJ("click",function(){return o.fitAll()}),t.TgZ(34,"mat-icon"),t._uU(35,"fit_screen"),t.qZA(),t._uU(36," Fit all "),t.qZA(),t.TgZ(37,"button",6),t.NdJ("click",function(){return o.jumpToToday()}),t.TgZ(38,"mat-icon"),t._uU(39,"today"),t.qZA(),t._uU(40," Today "),t.qZA(),t.TgZ(41,"button",6),t.NdJ("click",function(){return o.jumpToNow()}),t.TgZ(42,"mat-icon"),t._uU(43,"my_location"),t.qZA()(),t.TgZ(44,"button",6),t.NdJ("click",function(){return o.openJumpToDialog()}),t.TgZ(45,"mat-icon"),t._uU(46,"directions"),t.qZA(),t._uU(47," Jump to... "),t.qZA(),t._uU(48," \xa0 "),t.TgZ(49,"button",6),t.NdJ("click",function(){return o.zoomIn()}),t.TgZ(50,"mat-icon"),t._uU(51,"add"),t.qZA()(),t.TgZ(52,"button",6),t.NdJ("click",function(){return o.zoomOut()}),t.TgZ(53,"mat-icon"),t._uU(54,"remove"),t.qZA()(),t._uU(55," \xa0 "),t.TgZ(56,"button",8),t.NdJ("click",function(){return o.setTool("hand")}),t.ALo(57,"async"),t.TgZ(58,"mat-icon"),t._uU(59,"pan_tool"),t.qZA()(),t.TgZ(60,"button",9),t.NdJ("click",function(){return o.setTool("range-select")}),t.ALo(61,"async"),t.TgZ(62,"mat-icon"),t._uU(63,"highlight_alt"),t.qZA()(),t._uU(64," \xa0\xa0\xa0\xa0 "),t.YNc(65,ht,3,6,"label",10),t.qZA()(),t._UZ(66,"div",11,12),t.TgZ(68,"div",13)(69,"div",14)(70,"button",15),t.NdJ("click",function(){return o.zoomIn()}),t.TgZ(71,"mat-icon"),t._uU(72,"add"),t.qZA()(),t._UZ(73,"span",16),t.TgZ(74,"button",15),t.NdJ("click",function(){return o.zoomOut()}),t.TgZ(75,"mat-icon"),t._uU(76,"remove"),t.qZA()()()(),t.TgZ(77,"div",17),t.YNc(78,dt,4,7,"span",2),t.ALo(79,"async"),t._uU(80," \xa0\xa0 "),t.TgZ(81,"ya-help")(82,"p"),t._uU(83,"This view allows inspecting the content of the TM Archive, as well as retrieving data as packets. Data is grouped by packet name in bands. For each band, index blocks indicate the presence of data at a particular time range. Note that a single index block does not necessarily mean that there was no gap in the data. When zooming in, more gaps may appear."),t.qZA(),t.TgZ(84,"p"),t._uU(85,"Pan around by grabbing the canvas."),t.qZA()()()()),2&i&&(t.xp6(3),t.Q6J("disabled",!t.lcZ(4,10,o.rangeSelection$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(9,12,o.processor$)),t.xp6(2),t.Q6J("disabled",!t.lcZ(11,14,o.rangeSelection$)),t.xp6(9),t.Q6J("formGroup",o.filterForm),t.xp6(37),t.ekj("active","hand"===t.lcZ(57,16,o.tool$)),t.xp6(4),t.ekj("active","range-select"===t.lcZ(61,18,o.tool$)),t.xp6(5),t.Q6J("ngForOf",o.legendOptions),t.xp6(13),t.Q6J("ngIf",t.lcZ(79,20,o.viewportRange$)))},dependencies:[U.sg,U.O5,u._Y,u.Wl,u.JJ,u.JL,u.sg,u.u,x.lW,x.RK,at.Hw,rt.gM,m.IR,lt.a,ct.k,U.Ov,m.id],styles:[".tooltip[_ngcontent-%COMP%]{position:absolute}.ya-button.active[_ngcontent-%COMP%]{color:#009e87}.timeline-container[_ngcontent-%COMP%]{line-height:0;border-top:1px solid rgba(0,0,0,.1);position:absolute;inset:36px 0 0}.zoom-actions[_ngcontent-%COMP%]{position:absolute;bottom:35px;left:201px;right:0;margin:0 auto;text-align:center}.zoom-actions-inner[_ngcontent-%COMP%]{display:inline-block;background-color:#fafafa}.zoom-actions[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{line-height:inherit;min-width:0}.info[_ngcontent-%COMP%]{position:absolute;bottom:35px;right:0;padding:0 16px;opacity:.75;font-size:small}label.legend[_ngcontent-%COMP%]{font-size:small;padding:3px 5px;margin-right:10px;border:1px solid rgba(0,0,0,.1)}"],changeDetection:0})}return a})()}]}];let ft=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[S.Bz.forChild(gt),S.Bz]})}return a})(),yt=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#i=this.\u0275inj=t.cJS({imports:[F.m,ft]})}return a})()}}]);