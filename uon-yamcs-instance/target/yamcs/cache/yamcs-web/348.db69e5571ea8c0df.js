"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[348],{9348:(kn,V,p)=>{p.r(V),p.d(V,{TimelineModule:()=>qn});var Zt=p(7216),Z=p(5619),t=p(5879),l=p(6516),u=p(6814),o=p(6223);function yt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"form",1)(2,"label"),t._uU(3," Label "),t.TgZ(4,"span",2),t._uU(5,"(required)"),t.qZA(),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Description "),t.TgZ(11,"span",2),t._uU(12,"(optional)"),t.qZA(),t._UZ(13,"br")(14,"textarea",4),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form)}}let L=(()=>{class n{constructor(e,i){this.yamcs=e,this.changeDetection=i,this.formConfigured$=new Z.X(!1)}ngAfterViewInit(){this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-command-band"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"]],template:function(i,a){1&i&&(t.YNc(0,yt,15,1,"ng-container",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.formConfigured$))},dependencies:[u.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,u.Ov],encapsulation:2,changeDetection:0})}return n})();var _=p(7700);function Ct(n,r){if(1&n&&t._UZ(0,"app-edit-item-band",8),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function xt(n,r){if(1&n&&t._UZ(0,"app-edit-spacer",8),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function wt(n,r){if(1&n&&t._UZ(0,"app-edit-time-ruler",8),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function vt(n,r){if(1&n&&t._UZ(0,"app-edit-command-band",8),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function At(n,r){if(1&n&&(t.TgZ(0,"div",5)(1,"h2"),t._uU(2,"Edit Band"),t.qZA(),t.TgZ(3,"form",6),t.YNc(4,Ct,1,2,"app-edit-item-band",7),t.YNc(5,xt,1,2,"app-edit-spacer",7),t.YNc(6,wt,1,2,"app-edit-time-ruler",7),t.YNc(7,vt,1,2,"app-edit-command-band",7),t.qZA()()),2&n){const e=r.ngIf,i=t.oxw();t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf","ITEM_BAND"===e.type),t.xp6(1),t.Q6J("ngIf","SPACER"===e.type),t.xp6(1),t.Q6J("ngIf","TIME_RULER"===e.type),t.xp6(1),t.Q6J("ngIf","COMMAND_BAND"===e.type)}}let R=(()=>{class n{constructor(e,i,a,s,c){this.dialogRef=e,this.yamcs=i,this.messageService=a,this.data=c,this.dirty$=new Z.X(!1);const m=c.band;this.form=s.group({name:[m.name,[o.kI.required]],description:[m.description||""],tags:[m.tags||[]],properties:s.group({})}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}doOnConfirm(){const e=this.form.value;this.yamcs.yamcsClient.updateTimelineBand(this.yamcs.instance,this.data.band.id,{name:e.name,description:e.description,shared:this.data.band.shared,tags:e.tags,properties:e.properties}).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.so),t.Y36(l.C8),t.Y36(l.ez),t.Y36(o.QS),t.Y36(_.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:11,vars:4,consts:[[1,"central-pane"],["class","mat-typography ya-form","style","max-width: 600px;",4,"ngIf"],[1,"footer","mat-typography"],["mat-dialog-close","",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"disabled","click"],[1,"mat-typography","ya-form",2,"max-width","600px"],["novalidate","","autocomplete","off",3,"formGroup"],[3,"form","band",4,"ngIf"],[3,"form","band"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t.YNc(1,At,8,5,"div",1),t.qZA(),t.TgZ(2,"div",2)(3,"mat-toolbar")(4,"mat-toolbar-row")(5,"button",3),t._uU(6,"Cancel"),t.qZA(),t._uU(7,"\xa0\xa0 "),t.TgZ(8,"button",4),t.NdJ("click",function(){return a.doOnConfirm()}),t.ALo(9,"async"),t._uU(10,"SAVE CHANGES"),t.qZA()()()()),2&i&&(t.xp6(1),t.Q6J("ngIf",a.data.band),t.xp6(7),t.Q6J("disabled",!t.lcZ(9,2,a.dirty$)||!a.form.valid))},styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.central-pane[_ngcontent-%COMP%]{position:absolute;inset:0 0 64px;overflow:auto;padding:24px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}"],changeDetection:0})}return n})();const $={};function Ut(n){let r=$[n];if(!r){const e=document.createElement("canvas").getContext("2d");e.fillStyle=n,r=String(e.fillStyle),$[n]=r}return r}var q=function(n){return n[n.BOOLEAN=0]="BOOLEAN",n[n.COLOR=1]="COLOR",n[n.NUMBER=2]="NUMBER",n[n.SELECT=3]="SELECT",n[n.TEXT=4]="TEXT",n}(q||{});class F{constructor(r){this.inputType=q.BOOLEAN,this.defaultValue=r}}class N{constructor(r){this.inputType=q.COLOR,this.defaultValue=r}}class U{constructor(r){this.inputType=q.NUMBER,this.defaultValue=r}}function Y(n,r){const e={};for(const i in n)e[i]=n.defaultValue;return{...e,...kt(n,r)}}function kt(n,r){const e={...r};for(const i in r){const a=n[i];a?.inputType===q.BOOLEAN?e[i]="true"===r[i]:a?.inputType===q.NUMBER?e[i]=Number(r[i]):a?.inputType===q.COLOR&&(e[i]=Ut(r[i]))}return e}var B=p(347),w=p(6385),k=p(617);function St(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ya-label",5),t._uU(1),t.TgZ(2,"mat-icon",6),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.removeTag(s))}),t._uU(3,"close"),t.qZA()()}if(2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Bt(n,r){1&n&&(t.ynx(0),t._uU(1,"\xa0"),t.BQk())}function Dt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,St,4,1,"ya-label",4),t.YNc(2,Bt,2,0,"ng-container",1),t.BQk()),2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",e.length)}}let P=(()=>{class n{constructor(){this.control=new o.p4(null),this.onChange=e=>{},this.tags$=new Z.X([])}addTag(){const e=this.control.value;if(e){const i=[...this.tags$.value];-1===i.indexOf(e)&&i.push(e),i.sort(),this.tags$.next(i)}this.control.setValue(""),this.onChange(this.tags$.value)}removeTag(e){const i=[...this.tags$.value],a=i.indexOf(e);-1!==a&&i.splice(a,1),this.tags$.next(i),this.onChange(i)}writeValue(e){this.tags$.next(e||[])}registerOnChange(e){this.onChange=e}registerOnTouched(e){}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tag-select"]],features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}])],decls:6,vars:5,consts:[[1,"tag-select"],[4,"ngIf"],["type","text","placeholder","my-tag",2,"width","120px",3,"formControl","keydown.enter"],[1,"ya-button",3,"disabled","click"],["backgroundColor","#cdeefd",4,"ngFor","ngForOf"],["backgroundColor","#cdeefd"],[1,"tag-icon",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t.YNc(1,Dt,3,2,"ng-container",1),t.ALo(2,"async"),t.TgZ(3,"input",2),t.NdJ("keydown.enter",function(c){return a.addTag(),c.preventDefault()}),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return a.addTag()}),t._uU(5,"Add"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,a.tags$)),t.xp6(2),t.Q6J("formControl",a.control),t.xp6(1),t.Q6J("disabled",!a.control.value))},dependencies:[u.sg,u.O5,o.Fj,o.JJ,o.oH,k.Hw,l._n,u.Ov],styles:[".tag-select[_ngcontent-%COMP%]{display:flex;align-items:center}.tag-select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px}.tag-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:12px!important;line-height:16px;height:16px;width:16px;color:gray;cursor:pointer}.tag-icon[_ngcontent-%COMP%]:hover{color:inherit}"],changeDetection:0})}return n})(),Pt=(()=>{class n{constructor(e,i,a,s,c){this.dialogRef=e,this.yamcs=a,this.messageService=s,this.data=c,this.resolutionOptions=[{id:"seconds",label:"seconds"},{id:"minutes",label:"minutes"},{id:"hours",label:"hours"}],this.startConstraintOptions=[{id:"START_ON",label:"Start on"}];const m=c.item;this.form=i.group({name:[m.name,o.kI.required],start:[m.start,o.kI.required],duration:[m.duration,o.kI.required],tags:[m.tags||[],[]]})}save(){const e=this.form.value,i={name:e.name,start:l.P6.toISOString(e.start),duration:e.duration,tags:e.tags};this.yamcs.yamcsClient.updateTimelineItem(this.yamcs.instance,this.data.item.id,i).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}delete(){confirm("Are you sure you want to delete this item?")&&this.yamcs.yamcsClient.deleteTimelineItem(this.yamcs.instance,this.data.item.id).then(()=>this.dialogRef.close()).catch(e=>this.messageService.showError(e))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.so),t.Y36(o.QS),t.Y36(l.C8),t.Y36(l.ez),t.Y36(_.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:35,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name",2,"width","100%"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider"],["formControlName","start"],["align","end"],[1,"ya-button",3,"click"],[2,"flex","1 1 auto"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Update item"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"label"),t._uU(5," Name"),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Tags "),t.TgZ(11,"ya-help",4),t._uU(12," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),t.qZA(),t._UZ(13,"br")(14,"app-tag-select",5),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"label"),t._uU(17," Duration "),t._UZ(18,"ya-duration-input",6),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",7),t._UZ(21,"mat-divider"),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"label"),t._uU(24," Start"),t._UZ(25,"br")(26,"ya-date-time-input",8),t.qZA()()(),t.TgZ(27,"mat-dialog-actions",9)(28,"button",10),t.NdJ("click",function(){return a.delete()}),t._uU(29,"DELETE THIS ITEM"),t.qZA(),t._UZ(30,"div",11),t.TgZ(31,"button",12),t._uU(32,"CANCEL"),t.qZA(),t.TgZ(33,"button",13),t.NdJ("click",function(){return a.save()}),t._uU(34,"SAVE"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(30),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,_.ZT,_.uh,_.xY,_.H8,w.d,l.t,l.JD,l.IR,P],encapsulation:2,changeDetection:0})}return n})();const f={frozen:new F(!1),itemBackgroundColor:new N("#77b1e1"),itemBorderColor:new N("#3d94c7"),itemBorderWidth:new U(1),itemCornerRadius:new U(0),itemHeight:new U(20),itemMarginLeft:new U(5),itemTextColor:new N("#333333"),itemTextOverflow:new class qt{constructor(r){this.inputType=q.SELECT,this.defaultValue=r}}("show"),itemTextSize:new U(10),marginBottom:new U(7),marginTop:new U(7),multiline:new F(!0),spaceBetweenItems:new U(0),spaceBetweenLines:new U(2)};class H extends B.rK{constructor(r,e,i){super(r.timeline),this.label=e.name,this.data={band:e};const a=Y(f,e.properties||{});this.frozen=a.frozen,this.itemBackground=a.itemBackgroundColor,this.itemBorderColor=a.itemBorderColor,this.itemBorderWidth=a.itemBorderWidth,this.itemCornerRadius=a.itemCornerRadius,this.itemHeight=a.itemHeight,this.itemMarginLeft=a.itemMarginLeft,this.itemTextColor=a.itemTextColor,this.itemTextOverflow=a.itemTextOverflow,this.itemTextSize=a.itemTextSize,this.marginBottom=a.marginBottom,this.marginTop=a.marginTop,this.multiline=a.multiline,this.spaceBetween=a.spaceBetweenItems,this.lineSpacing=a.spaceBetweenLines,this.addItemClickListener(s=>{i.open(Pt,{width:"600px",data:{item:s.item.data.item}}).afterClosed().subscribe(()=>r.refreshData())})}}var It=p(2599);let G=(()=>{class n{constructor(){this.itemTextOverflowOptions=[{id:"show",label:"Show"},{id:"clip",label:"Clip"},{id:"hide",label:"Hide"}]}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-item-band-styles"]],inputs:{form:"form"},decls:85,vars:2,consts:[[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],["dialogTitle","Frozen"],[1,"widget"],["formControlName","frozen"],["dialogTitle","Multiline"],["formControlName","multiline"],["dialogTitle","Space Between Lines"],["type","number","formControlName","spaceBetweenLines","min","0",2,"width","100px"],["dialogTitle","Space Between Items"],["type","number","formControlName","spaceBetweenItems","min","0",2,"width","100px"],["type","number","formControlName","marginTop","min","0",2,"width","100px"],["type","number","formControlName","marginBottom","min","0",2,"width","100px"],["type","number","formControlName","itemHeight","min","0",2,"width","100px"],["type","color","formControlName","itemBackgroundColor"],["type","color","formControlName","itemTextColor"],["formControlName","itemTextOverflow",3,"options"],["type","number","formControlName","itemTextSize","min","0",2,"width","100px"],["type","number","formControlName","itemMarginLeft","min","0",2,"width","100px"],["type","color","formControlName","itemBorderColor"],["type","number","formControlName","itemBorderWidth","min","0",2,"width","100px"],["type","number","formControlName","itemCornerRadius","min","0",2,"width","100px"]],template:function(i,a){1&i&&(t.TgZ(0,"form",0)(1,"table",1)(2,"tr")(3,"td",2),t._uU(4," Frozen "),t.TgZ(5,"ya-help",3),t._uU(6," Fix this line to the top of the view. Frozen bands are always rendered above other bands. "),t.qZA()(),t.TgZ(7,"td",4),t._UZ(8,"mat-slide-toggle",5),t.qZA()(),t.TgZ(9,"tr")(10,"td",2),t._uU(11," Multiline "),t.TgZ(12,"ya-help",6),t._uU(13," Draw items on multiple lines if otherwise there would be collisions. "),t.qZA()(),t.TgZ(14,"td",4),t._UZ(15,"mat-slide-toggle",7),t.qZA()(),t.TgZ(16,"tr")(17,"td",2),t._uU(18," Space Between Lines "),t.TgZ(19,"ya-help",8),t._uU(20," In case of multilining, this indicates the vertical space between lines. "),t.qZA()(),t.TgZ(21,"td",4),t._UZ(22,"input",9),t.qZA()(),t.TgZ(23,"tr")(24,"td",2),t._uU(25," Space Between Items "),t.TgZ(26,"ya-help",10),t._uU(27," In case of multilining, this indicates the minimum horizontal space between items. If an item does not meet this treshold, it gets rendered on a different line. "),t.qZA()(),t.TgZ(28,"td",4),t._UZ(29,"input",11),t.qZA()(),t.TgZ(30,"tr")(31,"td",2),t._uU(32," Margin Top "),t.qZA(),t.TgZ(33,"td",4),t._UZ(34,"input",12),t.qZA()(),t.TgZ(35,"tr")(36,"td",2),t._uU(37," Margin Bottom "),t.qZA(),t.TgZ(38,"td",4),t._UZ(39,"input",13),t.qZA()(),t.TgZ(40,"tr")(41,"td",2),t._uU(42," Item Height "),t.qZA(),t.TgZ(43,"td",4),t._UZ(44,"input",14),t.qZA()(),t.TgZ(45,"tr")(46,"td",2),t._uU(47," Item Background Color "),t.qZA(),t.TgZ(48,"td",4),t._UZ(49,"input",15),t.qZA()(),t.TgZ(50,"tr")(51,"td",2),t._uU(52," Item Text Color "),t.qZA(),t.TgZ(53,"td",4),t._UZ(54,"input",16),t.qZA()(),t.TgZ(55,"tr")(56,"td",2),t._uU(57," Item Text Overflow "),t.qZA(),t.TgZ(58,"td",4),t._UZ(59,"ya-select",17),t.qZA()(),t.TgZ(60,"tr")(61,"td",2),t._uU(62," Item Text Size "),t.qZA(),t.TgZ(63,"td",4),t._UZ(64,"input",18),t.qZA()(),t.TgZ(65,"tr")(66,"td",2),t._uU(67," Item Margin Left "),t.qZA(),t.TgZ(68,"td",4),t._UZ(69,"input",19),t.qZA()(),t.TgZ(70,"tr")(71,"td",2),t._uU(72," Item Border Color "),t.qZA(),t.TgZ(73,"td",4),t._UZ(74,"input",20),t.qZA()(),t.TgZ(75,"tr")(76,"td",2),t._uU(77," Item Border Width "),t.qZA(),t.TgZ(78,"td",4),t._UZ(79,"input",21),t.qZA()(),t.TgZ(80,"tr")(81,"td",2),t._uU(82," Item Corner Radius "),t.qZA(),t.TgZ(83,"td",4),t._UZ(84,"input",22),t.qZA()()()()),2&i&&(t.Q6J("formGroup",a.form),t.xp6(59),t.Q6J("options",a.itemTextOverflowOptions))},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u,o.x0,l.Vy,It.Rr,l.IR,l.Hr],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}"],changeDetection:0})}return n})();function Jt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"form",1)(2,"label"),t._uU(3," Label "),t.TgZ(4,"span",2),t._uU(5,"(required)"),t.qZA(),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Description "),t.TgZ(11,"span",2),t._uU(12,"(optional)"),t.qZA(),t._UZ(13,"br")(14,"textarea",4),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"label"),t._uU(17," Tags"),t._UZ(18,"br")(19,"app-tag-select",5),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"div",6),t._UZ(22,"mat-divider"),t.qZA(),t.TgZ(23,"h4"),t._uU(24,"Styles"),t.qZA(),t._UZ(25,"app-item-band-styles",7),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(24),t.Q6J("form",e.form)}}let z=(()=>{class n{constructor(e,i){this.yamcs=e,this.changeDetection=i,this.formConfigured$=new Z.X(!1)}ngAfterViewInit(){const e=Y(f,this.band.properties||{}),i={frozen:[e.frozen,[o.kI.required]],itemBackgroundColor:[e.itemBackgroundColor,[o.kI.required]],itemBorderColor:[e.itemBorderColor,[o.kI.required]],itemBorderWidth:[e.itemBorderWidth,[o.kI.required]],itemCornerRadius:[e.itemCornerRadius,[o.kI.required]],itemHeight:[e.itemHeight,[o.kI.required]],itemMarginLeft:[e.itemMarginLeft,[o.kI.required]],itemTextColor:[e.itemTextColor,[o.kI.required]],itemTextOverflow:[e.itemTextOverflow,[o.kI.required]],itemTextSize:[e.itemTextSize,[o.kI.required]],marginBottom:[e.marginBottom,[o.kI.required]],marginTop:[e.marginTop,[o.kI.required]],multiline:[e.multiline,[o.kI.required]],spaceBetweenItems:[e.spaceBetweenItems,[o.kI.required]],spaceBetweenLines:[e.spaceBetweenLines,[o.kI.required]]},a=this.form.get("properties");for(const s in i){const c=i[s];a.addControl(s,new o.p4(c[0],c[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-item-band"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],["formControlName","description","rows","3"],["formControlName","tags"],[1,"section-divider"],[3,"form"]],template:function(i,a){1&i&&(t.YNc(0,Jt,26,2,"ng-container",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.formConfigured$))},dependencies:[u.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,w.d,G,P,u.Ov],encapsulation:2,changeDetection:0})}return n})();const Q={height:new U(34)};let X=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-spacer-styles"]],inputs:{form:"form"},decls:7,vars:1,consts:[[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],[1,"widget"],["type","number","formControlName","height","min","0",2,"width","100px"]],template:function(i,a){1&i&&(t.TgZ(0,"form",0)(1,"table",1)(2,"tr")(3,"td",2),t._uU(4," Height "),t.qZA(),t.TgZ(5,"td",3),t._UZ(6,"input",4),t.qZA()()()()),2&i&&t.Q6J("formGroup",a.form)},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u,o.x0,l.Vy],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}"],changeDetection:0})}return n})();function Nt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"form",1)(2,"label"),t._uU(3," Label "),t.TgZ(4,"span",2),t._uU(5,"(optional)"),t.qZA(),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Description "),t.TgZ(11,"span",2),t._uU(12,"(optional)"),t.qZA(),t._UZ(13,"br")(14,"textarea",4),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"div",5),t._UZ(17,"mat-divider"),t.qZA(),t.TgZ(18,"h4"),t._uU(19,"Styles"),t.qZA(),t._UZ(20,"app-spacer-styles",6),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(19),t.Q6J("form",e.form)}}let K=(()=>{class n{constructor(e,i){this.yamcs=e,this.changeDetection=i,this.formConfigured$=new Z.X(!1)}ngAfterViewInit(){const i={height:[Y(Q,this.band.properties||{}).height,[o.kI.required]]},a=this.form.get("properties");for(const s in i){const c=i[s];a.addControl(s,new o.p4(c[0],c[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-spacer"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[3,"form"]],template:function(i,a){1&i&&(t.YNc(0,Nt,21,2,"ng-container",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.formConfigured$))},dependencies:[u.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,w.d,X,u.Ov],encapsulation:2,changeDetection:0})}return n})();var g=p(1896),Yt=p(3906),j=p(7914),Qt=p(4529),S=p(3566),d=p(9538),O=p(2645),y=p(6593),T=p(4643),A=p(2296),C=p(3422),x=p(858);function Ot(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",21)(1,"input",22),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(a?s.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())}}function Et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"input",24),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(a?m.selection.toggle(c):null)}),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))}}function Mt(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Label"),t.qZA())}function Vt(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function Lt(n,r){1&n&&(t.TgZ(0,"i"),t._uU(1,"(none)"),t.qZA())}const W=function(n){return{c:n}};function Rt(n,r){if(1&n&&(t.TgZ(0,"td",26)(1,"a",27),t.YNc(2,Vt,2,1,"ng-container",28),t.YNc(3,Lt,2,0,"i",28),t.qZA()()),2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("routerLink",e.id)("queryParams",t.VKq(4,W,i.yamcs.context)),t.xp6(1),t.Q6J("ngIf",e.name),t.xp6(1),t.Q6J("ngIf",!e.name)}}function $t(n,r){1&n&&(t.TgZ(0,"th",29),t._uU(1,"Description"),t.qZA())}function Ft(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.description||"-"," ")}}function Ht(n,r){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Tags"),t.qZA())}function Gt(n,r){if(1&n&&(t.TgZ(0,"ya-label",32),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e)}}function zt(n,r){1&n&&(t.ynx(0),t._uU(1,"-"),t.BQk())}const Xt=function(){return[]};function Kt(n,r){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,Gt,2,1,"ya-label",31),t.YNc(2,zt,2,0,"ng-container",28),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.tags||t.DdM(2,Xt)),t.xp6(1),t.Q6J("ngIf",!e.tags)}}function jt(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Type"),t.qZA())}function Wt(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.type," ")}}function te(n,r){1&n&&t._UZ(0,"th",33)}function ee(n,r){1&n&&t._UZ(0,"td",26)}function ne(n,r){1&n&&t._UZ(0,"tr",34)}function ie(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("selected",i.selection.isSelected(e))}}function ae(n,r){if(1&n&&(t.TgZ(0,"table",4),t.ynx(1,5),t.YNc(2,Ot,2,1,"th",6),t.YNc(3,Et,2,1,"td",7),t.BQk(),t.ynx(4,8),t.YNc(5,Mt,2,0,"th",9),t.YNc(6,Rt,4,6,"td",10),t.BQk(),t.ynx(7,11),t.YNc(8,$t,2,0,"th",12),t.YNc(9,Ft,2,1,"td",10),t.BQk(),t.ynx(10,13),t.YNc(11,Ht,2,0,"th",14),t.YNc(12,Kt,3,3,"td",15),t.BQk(),t.ynx(13,16),t.YNc(14,jt,2,0,"th",9),t.YNc(15,Wt,2,1,"td",10),t.BQk(),t.ynx(16,17),t.YNc(17,te,1,0,"th",18),t.YNc(18,ee,1,0,"td",10),t.BQk(),t.YNc(19,ne,1,0,"tr",19),t.YNc(20,ie,1,2,"tr",20),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.dataSource)("trackBy",e.tableTrackerFn),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let tt=(()=>{class n{constructor(e,i,a){this.yamcs=e,this.messageService=a,this.displayedColumns=["select","name","description","tags","type","actions"],this.tableTrackerFn=(s,c)=>c.id,this.dataSource=new d.by,this.selection=new O.O(this.tableTrackerFn,!0,[]),i.setTitle("Timeline Bands"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){const i=this.dataSource.filteredData.length;return this.selection.selected.length===i&&i>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(e=>this.selection.select(e))}toggleOne(e){(!this.selection.isSelected(e)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(e)}deleteSelectedBands(){if(confirm("Are you sure you want to delete the selected bands?"))for(const e of this.selection.selected)this.deleteBand(e.id,!1)}deleteBand(e,i=!0){(!i||confirm("Are you sure you want to delete the selected band?"))&&this.yamcs.yamcsClient.deleteTimelineBand(this.yamcs.instance,e).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}refreshData(){this.yamcs.yamcsClient.getTimelineBands(this.yamcs.instance).then(e=>{this.selection.matchNewValues(e.bands||[]),this.dataSource.data=e.bands||[]}).catch(e=>this.messageService.showError(e))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(y.Dx),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(i,a){if(1&i&&t.Gf(S.YE,5),2&i){let s;t.iGM(s=t.CRH())&&(a.sort=s.first)}},decls:13,vars:5,consts:[["mat-button","","color","primary","routerLink","create",3,"queryParams"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource","trackBy",4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","","class","wrap200",4,"matHeaderCellDef"],["cdkColumnDef","tags"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],[4,"ngIf"],["mat-header-cell","",1,"wrap200"],["mat-header-cell",""],["backgroundColor","#cdeefd",4,"ngFor","ngForOf"],["backgroundColor","#cdeefd"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Bands \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create band "),t.qZA(),t.TgZ(7,"button",1),t.NdJ("click",function(){return a.deleteSelectedBands()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t._uU(10," Delete "),t.qZA()(),t.TgZ(11,"div",2),t.YNc(12,ae,21,4,"table",3),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("queryParams",t.VKq(3,W,a.yamcs.context)),t.xp6(4),t.Q6J("disabled",!a.isGroupDeleteEnabled()),t.xp6(5),t.Q6J("ngIf",a.dataSource))},dependencies:[u.sg,u.O5,g.rH,T.O_,T.D5,T.fo,A.zs,A.lW,k.Hw,S.YE,S.nU,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,l._n,C.a,x.k],encapsulation:2,changeDetection:0})}return n})();var D=p(1274);let I=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-band-wizard-step"]],inputs:{step:"step"},decls:8,vars:4,consts:[[1,"sub"]],template:function(i,a){1&i&&(t.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row")(2,"span")(3,"span"),t._uU(4,"1. Select band type"),t.qZA(),t._uU(5," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.TgZ(6,"span"),t._uU(7,"2. Configure band"),t.qZA()()()()),2&i&&(t.xp6(3),t.ekj("active","1"===a.step),t.xp6(3),t.ekj("active","2"===a.step))},dependencies:[D.Ye,D.rD],styles:["span[_ngcontent-%COMP%]{cursor:default}span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.3}span[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{opacity:1}mat-toolbar.sub[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;font-size:12px}.mat-toolbar-row[_ngcontent-%COMP%]{height:32px;padding:0 24px}.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:32px}"],changeDetection:0})}return n})();const J=function(n){return{c:n}};let et=(()=>{class n{constructor(e,i){this.yamcs=i,e.setTitle("Create a Band")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:40,vars:15,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],["step","1"],[1,"panel-content"],[1,"category-title"],[1,"band-type-list"],["routerLink","time-ruler",1,"band-type",3,"queryParams"],[1,"card"],[1,"card-title"],[1,"card-content"],["routerLink","item-band",1,"band-type",3,"queryParams"],["routerLink","spacer",1,"band-type",3,"queryParams"],["routerLink","command-band",1,"band-type",3,"queryParams"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create band "),t.qZA(),t._UZ(6,"app-create-band-wizard-step",1),t.TgZ(7,"div",2)(8,"div",3),t._uU(9,"General"),t.qZA(),t.TgZ(10,"div",4)(11,"a",5)(12,"div",6)(13,"div",7),t._uU(14,"Time Ruler"),t.qZA(),t.TgZ(15,"div",8),t._uU(16," Display absolute time, formatted in a timezone of choice. "),t.qZA()()(),t.TgZ(17,"a",9)(18,"div",6)(19,"div",7),t._uU(20,"Item Band"),t.qZA(),t.TgZ(21,"div",8),t._uU(22," Show a selection of timeline items. "),t.qZA()()(),t.TgZ(23,"a",10)(24,"div",6)(25,"div",7),t._uU(26,"Spacer"),t.qZA(),t.TgZ(27,"div",8),t._uU(28," Insert empty vertical space. "),t.qZA()()()(),t.TgZ(29,"p"),t._uU(30,"\xa0"),t.qZA(),t.TgZ(31,"div",3),t._uU(32,"Yamcs entities"),t.qZA(),t.TgZ(33,"div",4)(34,"a",11)(35,"div",6)(36,"div",7),t._uU(37,"Commands"),t.qZA(),t.TgZ(38,"div",8),t._uU(39," Display issued commands. "),t.qZA()()()()()()),2&i&&(t.xp6(2),t.Q6J("queryParams",t.VKq(5,J,a.yamcs.context)),t.xp6(9),t.Q6J("queryParams",t.VKq(7,J,a.yamcs.context)),t.xp6(6),t.Q6J("queryParams",t.VKq(9,J,a.yamcs.context)),t.xp6(6),t.Q6J("queryParams",t.VKq(11,J,a.yamcs.context)),t.xp6(11),t.Q6J("queryParams",t.VKq(13,J,a.yamcs.context)))},dependencies:[g.rH,A.o6,k.Hw,C.a,x.k,I],styles:["div.category-title[_ngcontent-%COMP%]{font-size:18px;line-height:1.5;margin-bottom:1em}a.band-type[_ngcontent-%COMP%]{display:inline-block;width:260px;margin-right:20px;margin-bottom:20px;vertical-align:top;text-decoration:none}.card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);background:#fff;border-radius:4px;overflow:hidden}.card-title[_ngcontent-%COMP%]{align-items:center;display:flex;padding:15px;font-size:20px;font-weight:500;color:#000000de}.card-content[_ngcontent-%COMP%]{padding:0 15px 15px;min-height:2.4em;font-size:15px;color:#0000008a}a.band-type[_ngcontent-%COMP%]:hover   .card[_ngcontent-%COMP%]{background-color:#f2f2f2}"],changeDetection:0})}return n})();function oe(n,r){1&n&&(t.TgZ(0,"th",13),t._uU(1,"Available"),t.qZA())}function se(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function re(n,r){1&n&&(t.TgZ(0,"i"),t._uU(1,"(no name)"),t.qZA())}function ce(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"span",16),t._uU(3),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.description)}}function le(n,r){if(1&n&&(t.TgZ(0,"td",14),t.YNc(1,se,2,1,"ng-container",15),t.YNc(2,re,2,0,"i",15),t.YNc(3,ce,4,1,"ng-container",15),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.name),t.xp6(1),t.Q6J("ngIf",!e.name),t.xp6(1),t.Q6J("ngIf",e.description)}}function me(n,r){1&n&&t._UZ(0,"tr",17)}function de(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.selectBand(s))}),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.ekj("selected",i.isLeftSelected(e))}}function ue(n,r){1&n&&(t.TgZ(0,"th",13),t._uU(1,"Selected"),t.qZA())}function pe(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function _e(n,r){1&n&&(t.TgZ(0,"i"),t._uU(1,"(no name)"),t.qZA())}function ge(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"span",16),t._uU(3),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.description)}}function he(n,r){if(1&n&&(t.TgZ(0,"td",14),t.YNc(1,pe,2,1,"ng-container",15),t.YNc(2,_e,2,0,"i",15),t.YNc(3,ge,4,1,"ng-container",15),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.name),t.xp6(1),t.Q6J("ngIf",!e.name),t.xp6(1),t.Q6J("ngIf",e.description)}}function fe(n,r){1&n&&t._UZ(0,"tr",17)}function be(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.selectBand(s))}),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.ekj("selected",i.isRightSelected(e))}}let E=(()=>{class n{constructor(e){this.displayedColumns=["name"],this.availableDataSource=new d.by([]),this.selectedDataSource=new d.by([]),this.onChange=i=>{},this.bands$=e.yamcsClient.getTimelineBands(e.instance),this.bands$.then(i=>{this.availableDataSource.data=i.bands||[]})}writeValue(e){this.bands$.then(i=>{const a=i.bands||[];if(e){const s=e.map(h=>h.id),c=[],m=[];for(const h of a)-1===s.indexOf(h.id)&&c.push(h);for(const h of s)for(const v of a)v.id===h&&m.push(v);this.availableDataSource.data=c,this.selectedDataSource.data=m}else this.availableDataSource.data=[...a],this.selectedDataSource.data=[]})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}selectBand(e){this.selectedBand=e}isLeftSelected(e){return e===this.selectedBand&&-1!==this.availableDataSource.data.indexOf(e)}isAnyLeftSelected(){return this.selectedBand&&-1!==this.availableDataSource.data.indexOf(this.selectedBand)}isRightSelected(e){return e===this.selectedBand&&-1!==this.selectedDataSource.data.indexOf(e)}isAnyRightSelected(){return this.selectedBand&&-1!==this.selectedDataSource.data.indexOf(this.selectedBand)}moveRight(){const e=this.selectedBand,i=[...this.availableDataSource.data],a=[...this.selectedDataSource.data],s=i.indexOf(e);-1!==s&&i.splice(s,1),-1===a.indexOf(e)&&a.push(e),this.availableDataSource.data=i,this.selectedDataSource.data=a,this.onChange(a)}moveLeft(){const e=this.selectedBand,i=[...this.availableDataSource.data],a=[...this.selectedDataSource.data],s=a.indexOf(e);-1!==s&&a.splice(s,1),-1===i.indexOf(e)&&i.push(e),this.availableDataSource.data=i,this.selectedDataSource.data=a,this.onChange(a)}moveUp(){const e=this.selectedBand,i=[...this.selectedDataSource.data],a=i.indexOf(e);0!==a&&(i[a]=i[a-1],i[a-1]=e),this.selectedDataSource.data=i,this.onChange(i)}moveDown(){const e=this.selectedBand,i=[...this.selectedDataSource.data],a=i.indexOf(e);a!==i.length-1&&(i[a]=i[a+1],i[a+1]=e),this.selectedDataSource.data=i,this.onChange(i)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-band-multi-select"]],features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}])],decls:32,vars:10,consts:[[2,"display","flex"],[1,"bands-from"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"display","inline-block","margin","1em","align-self","center"],[1,"ya-button",2,"width","90px",3,"disabled","click"],[1,"bands-to"],[2,"text-align","right"],[1,"ya-button",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],[1,"hint"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2),t.ynx(3,3),t.YNc(4,oe,2,0,"th",4),t.YNc(5,le,4,3,"td",5),t.BQk(),t.YNc(6,me,1,0,"tr",6),t.YNc(7,de,1,2,"tr",7),t.qZA()(),t.TgZ(8,"div",8)(9,"button",9),t.NdJ("click",function(){return a.moveRight()}),t._uU(10," Add "),t.TgZ(11,"mat-icon"),t._uU(12,"chevron_right"),t.qZA()(),t._UZ(13,"br"),t.TgZ(14,"button",9),t.NdJ("click",function(){return a.moveLeft()}),t.TgZ(15,"mat-icon"),t._uU(16,"chevron_left"),t.qZA(),t._uU(17," Remove "),t.qZA()(),t.TgZ(18,"div",10)(19,"table",2),t.ynx(20,3),t.YNc(21,ue,2,0,"th",4),t.YNc(22,he,4,3,"td",5),t.BQk(),t.YNc(23,fe,1,0,"tr",6),t.YNc(24,be,1,2,"tr",7),t.qZA()()(),t.TgZ(25,"div",11)(26,"button",12),t.NdJ("click",function(){return a.moveDown()}),t.TgZ(27,"mat-icon"),t._uU(28,"keyboard_arrow_down"),t.qZA()(),t.TgZ(29,"button",12),t.NdJ("click",function(){return a.moveUp()}),t.TgZ(30,"mat-icon"),t._uU(31,"keyboard_arrow_up"),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("dataSource",a.availableDataSource),t.xp6(4),t.Q6J("cdkHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("cdkRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("disabled",!a.isAnyLeftSelected()),t.xp6(5),t.Q6J("disabled",!a.isAnyRightSelected()),t.xp6(5),t.Q6J("dataSource",a.selectedDataSource),t.xp6(4),t.Q6J("cdkHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("cdkRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("disabled",!a.isAnyRightSelected()),t.xp6(3),t.Q6J("disabled",!a.isAnyRightSelected()))},dependencies:[u.O5,T.Sq,T.O_,T.D5,T.fo,T.s$,k.Hw,d.BZ,d.ge,d.ev,d.XQ,d.Gk],styles:[".bands-from[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]{border:1px solid #d3d3d3;flex:1 1 auto}.bands-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.bands-from[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:pointer}.bands-from[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-left:none;border-right:none}.bands-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none}.bands-from[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:none}"],changeDetection:0})}return n})();const nt=function(n){return{c:n}};let it=(()=>{class n{constructor(e,i,a,s,c){this.yamcs=i,this.formBuilder=a,this.messageService=s,this.router=c,e.setTitle("Create a View"),this.form=this.formBuilder.group({name:["",[o.kI.required]],bands:[[],[]]})}onConfirm(){const e=this.form.value;this.yamcs.yamcsClient.createTimelineView(this.yamcs.instance,{name:e.name,bands:e.bands.map(i=>i.id)}).then(i=>this.router.navigateByUrl(`/timeline/chart?c=${this.yamcs.context}&view=${i.id}`)).catch(i=>this.messageService.showError(i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(l.C8),t.Y36(o.QS),t.Y36(l.ez),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:27,vars:8,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"action-bar"],["routerLink","..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create view "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Name "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br")(13,"input",4),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"div",5),t._UZ(16,"mat-divider"),t.qZA(),t.TgZ(17,"h4"),t._uU(18,"Bands"),t.qZA(),t._UZ(19,"app-band-multi-select",6),t.qZA(),t.TgZ(20,"p"),t._uU(21,"\xa0"),t.qZA(),t.TgZ(22,"div",7)(23,"button",8),t._uU(24,"Cancel"),t.qZA(),t.TgZ(25,"button",9),t.NdJ("click",function(){return a.onConfirm()}),t._uU(26,"CREATE"),t.qZA()()()()),2&i&&(t.xp6(2),t.Q6J("queryParams",t.VKq(4,nt,a.yamcs.context)),t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(16),t.Q6J("queryParams",t.VKq(6,nt,a.yamcs.context)),t.xp6(2),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,A.o6,k.Hw,w.d,C.a,x.k,E],encapsulation:2,changeDetection:0})}return n})();function Te(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"form",1)(2,"label"),t._uU(3," Label "),t.TgZ(4,"span",2),t._uU(5,"(required)"),t.qZA(),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Description "),t.TgZ(11,"span",2),t._uU(12,"(optional)"),t.qZA(),t._UZ(13,"br")(14,"textarea",4),t.qZA(),t.ynx(15,5),t._UZ(16,"br"),t.TgZ(17,"label"),t._uU(18," Timezone"),t._UZ(19,"br")(20,"ya-timezone-select",6),t.qZA(),t.BQk(),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form)}}let at=(()=>{class n{constructor(e,i){this.yamcs=e,this.changeDetection=i,this.formConfigured$=new Z.X(!1)}ngAfterViewInit(){const e={timezone:[this.band.properties.timezone,[o.kI.required]]},i=this.form.get("properties");for(const a in e){const s=e[a];i.addControl(a,new o.p4(s[0],s[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-time-ruler"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],["formGroupName","properties"],["formControlName","timezone"]],template:function(i,a){1&i&&(t.YNc(0,Te,21,1,"ng-container",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.formConfigured$))},dependencies:[u.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,l.Q1,u.Ov],encapsulation:2,changeDetection:0})}return n})();function Ze(n,r){if(1&n&&t._UZ(0,"app-edit-item-band",7),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function ye(n,r){if(1&n&&t._UZ(0,"app-edit-spacer",7),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function Ce(n,r){if(1&n&&t._UZ(0,"app-edit-time-ruler",7),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function xe(n,r){if(1&n&&t._UZ(0,"app-edit-command-band",7),2&n){const e=t.oxw().ngIf,i=t.oxw();t.Q6J("form",i.form)("band",e)}}function we(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2,"Edit band"),t.qZA(),t.TgZ(3,"div",1)(4,"form",2),t.YNc(5,Ze,1,2,"app-edit-item-band",3),t.YNc(6,ye,1,2,"app-edit-spacer",3),t.YNc(7,Ce,1,2,"app-edit-time-ruler",3),t.YNc(8,xe,1,2,"app-edit-command-band",3),t.qZA(),t.TgZ(9,"p"),t._uU(10,"\xa0"),t.qZA(),t.TgZ(11,"div",4)(12,"button",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.location.back())}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.doOnConfirm())}),t.ALo(15,"async"),t._uU(16,"SAVE CHANGES"),t.qZA()()()()}if(2&n){const e=r.ngIf,i=t.oxw();t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf","ITEM_BAND"===e.type),t.xp6(1),t.Q6J("ngIf","SPACER"===e.type),t.xp6(1),t.Q6J("ngIf","TIME_RULER"===e.type),t.xp6(1),t.Q6J("ngIf","COMMAND_BAND"===e.type),t.xp6(6),t.Q6J("disabled",!t.lcZ(15,6,i.dirty$)||!i.form.valid)}}let ot=(()=>{class n{constructor(e,i,a,s,c,m,h){this.yamcs=i,this.messageService=a,this.route=s,this.router=c,this.location=h,this.dirty$=new Z.X(!1),e.setTitle("Edit Band");const v=s.snapshot.paramMap.get("band");this.band$=i.yamcsClient.getTimelineBand(i.instance,v),this.band$.then(b=>{this.form=m.group({name:[b.name,[o.kI.required]],description:[b.description||""],tags:[b.tags||[]],properties:m.group({})}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(b=>this.messageService.showError(b))}doOnConfirm(){const e=this.route.snapshot.paramMap.get("band"),i=this.form.value;this.yamcs.yamcsClient.updateTimelineBand(this.yamcs.instance,e,{name:i.name,description:i.description,shared:!0,tags:i.tags,properties:i.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.gz),t.Y36(g.F0),t.Y36(o.QS),t.Y36(u.Ye))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[3,"form","band",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],[3,"form","band"]],template:function(i,a){1&i&&(t.YNc(0,we,17,8,"app-instance-page",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.band$))},dependencies:[u.O5,o._Y,o.JL,o.sg,C.a,x.k,L,z,K,at,u.Ov],encapsulation:2,changeDetection:0})}return n})();function ve(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2,"Edit item"),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"div",3),t._uU(6," Name "),t.TgZ(7,"span",4),t._uU(8,"(required)"),t.qZA(),t._UZ(9,"br")(10,"input",5),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"div",3),t._uU(13," Tags "),t.TgZ(14,"ya-help",6),t._uU(15," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),t.qZA(),t._UZ(16,"br")(17,"app-tag-select",7),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"div",3),t._uU(20," Duration "),t._UZ(21,"ya-duration-input",8),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"div",9),t._UZ(24,"mat-divider"),t.qZA(),t._UZ(25,"br"),t.TgZ(26,"div",3),t._uU(27," Start"),t._UZ(28,"br")(29,"ya-date-time-input",10),t.qZA()(),t.TgZ(30,"p"),t._uU(31,"\xa0"),t.qZA(),t.TgZ(32,"div",11)(33,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.location.back())}),t._uU(34,"Cancel"),t.qZA(),t.TgZ(35,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.doOnConfirm())}),t.ALo(36,"async"),t._uU(37,"SAVE CHANGES"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.form),t.xp6(31),t.Q6J("disabled",!t.lcZ(36,2,e.dirty$)||!e.form.valid)}}let st=(()=>{class n{constructor(e,i,a,s,c,m,h){this.yamcs=i,this.messageService=a,this.route=s,this.router=c,this.location=h,this.resolutionOptions=[{id:"seconds",label:"seconds"},{id:"minutes",label:"minutes"},{id:"hours",label:"hours"}],this.startConstraintOptions=[{id:"START_ON",label:"Start on"}],this.dirty$=new Z.X(!1),e.setTitle("Edit Item");const v=s.snapshot.paramMap.get("item");this.item$=i.yamcsClient.getTimelineItem(i.instance,v),this.item$.then(b=>{this.form=m.group({name:[b.name,[o.kI.required]],start:[b.start,o.kI.required],duration:[b.duration,o.kI.required],tags:[b.tags||[],[]]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(b=>this.messageService.showError(b))}doOnConfirm(){const e=this.route.snapshot.paramMap.get("item"),i=this.form.value,a={name:i.name,start:l.P6.toISOString(i.start),duration:i.duration,tags:i.tags};this.yamcs.yamcsClient.updateTimelineItem(this.yamcs.instance,e,a).then(()=>this.router.navigateByUrl(`/timeline/items?c=${this.yamcs.context}`)).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.gz),t.Y36(g.F0),t.Y36(o.QS),t.Y36(u.Ye))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],[1,"hint"],["type","text","formControlName","name"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider"],["formControlName","start"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.YNc(0,ve,38,4,"app-instance-page",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,a.item$))},dependencies:[u.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,w.d,l.t,l.JD,l.IR,C.a,x.k,P,u.Ov],encapsulation:2,changeDetection:0})}return n})();const rt=function(n){return{c:n}};let ct=(()=>{class n{constructor(e,i,a,s,c,m,h){this.yamcs=i,this.messageService=a,this.route=s,this.router=c,this.location=m,this.dirty$=new Z.X(!1),e.setTitle("Edit View");const v=s.snapshot.paramMap.get("view");this.form=h.group({name:[null,o.kI.required],bands:[null,[]]}),i.yamcsClient.getTimelineView(i.instance,v).then(b=>{this.form.setValue({name:b.name,bands:b.bands||[]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(b=>this.messageService.showError(b))}onConfirm(){const e=this.form.value,i={name:e.name,bands:e.bands.map(s=>s.id)},a=this.route.snapshot.paramMap.get("view");this.yamcs.yamcsClient.updateTimelineView(this.yamcs.instance,a,i).then(()=>this.router.navigateByUrl(`/timeline/views?c=${this.yamcs.context}`)).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.gz),t.Y36(g.F0),t.Y36(u.Ye),t.Y36(o.QS))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:28,vars:10,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"action-bar"],["routerLink","..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Update view "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Name "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br")(13,"input",4),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"div",5),t._UZ(16,"mat-divider"),t.qZA(),t.TgZ(17,"h4"),t._uU(18,"Bands"),t.qZA(),t._UZ(19,"app-band-multi-select",6),t.qZA(),t.TgZ(20,"p"),t._uU(21,"\xa0"),t.qZA(),t.TgZ(22,"div",7)(23,"button",8),t._uU(24,"Cancel"),t.qZA(),t.TgZ(25,"button",9),t.NdJ("click",function(){return a.onConfirm()}),t.ALo(26,"async"),t._uU(27,"SAVE CHANGES"),t.qZA()()()()),2&i&&(t.xp6(2),t.Q6J("queryParams",t.VKq(6,rt,a.yamcs.context)),t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(16),t.Q6J("queryParams",t.VKq(8,rt,a.yamcs.context)),t.xp6(2),t.Q6J("disabled",!t.lcZ(26,4,a.dirty$)||!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,A.o6,k.Hw,w.d,C.a,x.k,E,u.Ov],encapsulation:2,changeDetection:0})}return n})(),lt=(()=>{class n{constructor(e,i,a,s,c){this.dialogRef=e,this.yamcs=a,this.messageService=s,this.data=c,this.startConstraintOptions=[{id:"START_ON",label:"Start on"}],this.form=i.group({name:["",o.kI.required],start:[l.P6.toISOString(a.getMissionTime()),o.kI.required],duration:["",o.kI.required],tags:[[],[]]})}save(){this.yamcs.yamcsClient.createTimelineItem(this.yamcs.instance,{name:this.form.value.name,start:l.P6.toISOString(this.form.value.start),duration:this.form.value.duration,tags:this.form.value.tags,type:"EVENT"}).then(e=>this.dialogRef.close(e)).catch(e=>this.messageService.showError(e))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.so),t.Y36(o.QS),t.Y36(l.C8),t.Y36(l.ez),t.Y36(_.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:32,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name",2,"width","100%"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider"],["formControlName","start"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Add item"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"label"),t._uU(5," Name"),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Tags "),t.TgZ(11,"ya-help",4),t._uU(12," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),t.qZA(),t._UZ(13,"br")(14,"app-tag-select",5),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"label"),t._uU(17," Duration "),t._UZ(18,"ya-duration-input",6),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",7),t._UZ(21,"mat-divider"),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"label"),t._uU(24," Start"),t._UZ(25,"br")(26,"ya-date-time-input",8),t.qZA()()(),t.TgZ(27,"mat-dialog-actions",9)(28,"button",10),t._uU(29,"CANCEL"),t.qZA(),t.TgZ(30,"button",11),t.NdJ("click",function(){return a.save()}),t._uU(31,"SAVE"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(27),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,_.ZT,_.uh,_.xY,_.H8,w.d,l.t,l.JD,l.IR,P],encapsulation:2,changeDetection:0})}return n})();function Ae(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",21)(1,"input",22),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(a?s.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())}}function Ue(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",23)(1,"input",24),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(a?m.selection.toggle(c):null)}),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))}}function qe(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Label"),t.qZA())}function ke(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function Se(n,r){1&n&&(t.TgZ(0,"i"),t._uU(1,"(none)"),t.qZA())}const Be=function(n){return{c:n}};function De(n,r){if(1&n&&(t.TgZ(0,"td",26)(1,"a",27),t.YNc(2,ke,2,1,"ng-container",28),t.YNc(3,Se,2,0,"i",28),t.qZA()()),2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("routerLink",e.id)("queryParams",t.VKq(4,Be,i.yamcs.context)),t.xp6(1),t.Q6J("ngIf",e.name),t.xp6(1),t.Q6J("ngIf",!e.name)}}function Pe(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Tags"),t.qZA())}function Ie(n,r){if(1&n&&(t.TgZ(0,"ya-label",30),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e)}}function Je(n,r){1&n&&(t.ynx(0),t._uU(1,"-"),t.BQk())}const Ne=function(){return[]};function Ye(n,r){if(1&n&&(t.TgZ(0,"td",26),t.YNc(1,Ie,2,1,"ya-label",29),t.YNc(2,Je,2,0,"ng-container",28),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.tags||t.DdM(2,Ne)),t.xp6(1),t.Q6J("ngIf",!e.tags)}}function Qe(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Start"),t.qZA())}function Oe(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.start)||"-"," ")}}function Ee(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Duration"),t.qZA())}function Me(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.duration," ")}}function Ve(n,r){1&n&&(t.TgZ(0,"th",25),t._uU(1,"Type"),t.qZA())}function Le(n,r){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.type," ")}}function Re(n,r){1&n&&t._UZ(0,"th",31)}function $e(n,r){1&n&&t._UZ(0,"td",26)}function Fe(n,r){1&n&&t._UZ(0,"tr",32)}function He(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("selected",i.selection.isSelected(e))}}function Ge(n,r){if(1&n&&(t.TgZ(0,"table",4),t.ynx(1,5),t.YNc(2,Ae,2,1,"th",6),t.YNc(3,Ue,2,1,"td",7),t.BQk(),t.ynx(4,8),t.YNc(5,qe,2,0,"th",9),t.YNc(6,De,4,6,"td",10),t.BQk(),t.ynx(7,11),t.YNc(8,Pe,2,0,"th",12),t.YNc(9,Ye,3,3,"td",13),t.BQk(),t.ynx(10,14),t.YNc(11,Qe,2,0,"th",9),t.YNc(12,Oe,3,3,"td",10),t.BQk(),t.ynx(13,15),t.YNc(14,Ee,2,0,"th",9),t.YNc(15,Me,2,1,"td",10),t.BQk(),t.ynx(16,16),t.YNc(17,Ve,2,0,"th",9),t.YNc(18,Le,2,1,"td",10),t.BQk(),t.ynx(19,17),t.YNc(20,Re,1,0,"th",18),t.YNc(21,$e,1,0,"td",10),t.BQk(),t.YNc(22,Fe,1,0,"tr",19),t.YNc(23,He,1,2,"tr",20),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.dataSource)("trackBy",e.tableTrackerFn),t.xp6(22),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let mt=(()=>{class n{constructor(e,i,a,s){this.yamcs=e,this.messageService=a,this.dialog=s,this.displayedColumns=["select","name","tags","start","duration","type","actions"],this.tableTrackerFn=(c,m)=>m.id,this.dataSource=new d.by,this.selection=new O.O(this.tableTrackerFn,!0,[]),i.setTitle("Timeline Items"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){const i=this.dataSource.filteredData.length;return this.selection.selected.length===i&&i>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(e=>this.selection.select(e))}toggleOne(e){(!this.selection.isSelected(e)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(e)}deleteSelectedItems(){if(confirm("Are you sure you want to delete the selected items?"))for(const e of this.selection.selected)this.deleteItem(e.id,!1)}deleteItem(e,i=!0){(!i||confirm("Are you sure you want to delete the selected item?"))&&this.yamcs.yamcsClient.deleteTimelineItem(this.yamcs.instance,e).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}openCreateItemDialog(){this.dialog.open(lt,{width:"600px"}).afterClosed().subscribe(()=>this.refreshData())}refreshData(){this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"rdb"}).then(e=>{this.selection.matchNewValues(e.items||[]),this.dataSource.data=e.items||[]}).catch(e=>this.messageService.showError(e))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(y.Dx),t.Y36(l.ez),t.Y36(_.uw))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(i,a){if(1&i&&t.Gf(S.YE,5),2&i){let s;t.iGM(s=t.CRH())&&(a.sort=s.first)}},decls:13,vars:2,consts:[["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource","trackBy",4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["cdkColumnDef","tags"],["mat-header-cell","","mat-sort-header","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["matColumnDef","start"],["matColumnDef","duration"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],[4,"ngIf"],["backgroundColor","#cdeefd",4,"ngFor","ngForOf"],["backgroundColor","#cdeefd"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Items \xa0\xa0\xa0 "),t.TgZ(3,"a",0),t.NdJ("click",function(){return a.openCreateItemDialog()}),t.TgZ(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create item "),t.qZA(),t.TgZ(7,"button",1),t.NdJ("click",function(){return a.deleteSelectedItems()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t._uU(10," Delete "),t.qZA()(),t.TgZ(11,"div",2),t.YNc(12,Ge,24,4,"table",3),t.qZA()()),2&i&&(t.xp6(7),t.Q6J("disabled",!a.isGroupDeleteEnabled()),t.xp6(5),t.Q6J("ngIf",a.dataSource))},dependencies:[u.sg,u.O5,g.rH,T.O_,T.D5,T.fo,A.zs,A.lW,k.Hw,S.YE,S.nU,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,l._n,C.a,x.k,l.id],encapsulation:2,changeDetection:0})}return n})();var ze=p(3620);class dt extends B.rK{constructor(r,e){super(r.timeline),this.label=e.name,this.marginBottom=7,this.marginTop=7,this.lineSpacing=2,this.itemHeight=20,this.data={band:e}}}let Xe=(()=>{class n{constructor(e,i,a,s,c){this.dialogRef=e,this.yamcs=i,this.messageService=s,this.data=c,this.dirty$=new Z.X(!1);const m=c.view;this.form=a.group({name:[m.name,o.kI.required],bands:[m.bands||[],[]]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}onConfirm(){const e=this.form.value,i={name:e.name,bands:e.bands.map(s=>s.id)};this.yamcs.yamcsClient.updateTimelineView(this.yamcs.instance,this.data.view.id,i).then(s=>this.dialogRef.close(s)).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.so),t.Y36(l.C8),t.Y36(o.QS),t.Y36(l.ez),t.Y36(_.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-view-dialog"]],decls:25,vars:4,consts:[[1,"mat-typography","ya-form",2,"max-width","600px"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"footer","mat-typography"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"form",1)(2,"h2"),t._uU(3,"Edit View"),t.qZA(),t.TgZ(4,"label"),t._uU(5," Name "),t.TgZ(6,"span",2),t._uU(7,"(required)"),t.qZA(),t._UZ(8,"br")(9,"input",3),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",4),t._UZ(12,"mat-divider"),t.qZA(),t.TgZ(13,"h4"),t._uU(14,"Bands"),t.qZA(),t._UZ(15,"app-band-multi-select",5),t.qZA()(),t.TgZ(16,"div",6)(17,"mat-toolbar")(18,"mat-toolbar-row")(19,"button",7),t._uU(20,"CANCEL"),t.qZA(),t._uU(21,"\xa0\xa0 "),t.TgZ(22,"button",8),t.NdJ("click",function(){return a.onConfirm()}),t.ALo(23,"async"),t._uU(24,"SAVE CHANGES"),t.qZA()()()()),2&i&&(t.xp6(1),t.Q6J("formGroup",a.form),t.xp6(21),t.Q6J("disabled",!t.lcZ(23,2,a.dirty$)||!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,_.ZT,w.d,D.Ye,D.rD,E,u.Ov],styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}"],changeDetection:0})}return n})(),Ke=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i,this.date=new o.p4(null,[o.kI.required]),this.data.date&&this.date.setValue(l.P6.toISOString(this.data.date))}select(){const e=l.P6.toDate(this.date.value);this.dialogRef.close({date:e})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.so),t.Y36(_.WI))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"ya-form","mat-typography"],[3,"formControl"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Jump to date"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"label"),t._uU(4," Date "),t._UZ(5,"ya-date-time-input",2),t.qZA()(),t.TgZ(6,"mat-dialog-actions",3)(7,"button",4),t._uU(8,"CANCEL"),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return a.select()}),t._uU(10,"OK"),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("formControl",a.date))},dependencies:[o.JJ,o.oH,_.ZT,_.uh,_.xY,_.H8,l.t],encapsulation:2,changeDetection:0})}return n})();class je extends B.nY{constructor(r,e){super(r.timeline),this.contentHeight=20,this.label=e.name,this.timezone=e.properties.timezone,this.data={band:e}}}var We=p(4518),M=p(7988);const tn=["container"];function en(n,r){if(1&n&&(t.TgZ(0,"button",13),t._uU(1),t.ALo(2,"async"),t.qZA()),2&n){t.oxw();const e=t.MAs(4),i=t.oxw();let a;t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",(null==(a=t.lcZ(2,2,i.view$))?null:a.name)||"select view"," \u25be ")}}function nn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.switchView(s))}),t._uU(1),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.name)}}const ut=function(n){return{c:n}};function an(n,r){if(1&n&&(t.ynx(0),t.YNc(1,en,3,4,"button",8),t.ALo(2,"async"),t.TgZ(3,"mat-menu",9,10),t.YNc(5,nn,2,1,"button",11),t._UZ(6,"mat-divider"),t.TgZ(7,"a",12)(8,"mat-icon"),t._uU(9,"add_circle_outline"),t.qZA(),t._uU(10," Create view "),t.qZA()(),t.BQk()),2&n){const e=r.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,i.view$)&&i.mayControlTimeline()),t.xp6(4),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("queryParams",t.VKq(5,ut,i.yamcs.context))}}function on(n,r){if(1&n&&(t.TgZ(0,"a",17)(1,"mat-icon"),t._uU(2,"add_circle_outline"),t.qZA(),t._uU(3," Create view "),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("queryParams",t.VKq(1,ut,e.yamcs.context))}}function sn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){const s=t.CHM(e).ngIf,c=t.oxw(2);return t.KtG(c.openEditViewDialog(s))}),t.TgZ(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t._uU(3," Edit view "),t.qZA()}}function rn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openCreateItemDialog())}),t.TgZ(1,"mat-icon"),t._uU(2,"add_circle_outline"),t.qZA(),t._uU(3," Add item "),t.qZA()}}function cn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.saveSnapshot())}),t.TgZ(1,"mat-icon"),t._uU(2,"photo_camera"),t.qZA(),t._uU(3," Save snapshot "),t.qZA()}}function ln(n,r){if(1&n&&(t.ynx(0),t.YNc(1,on,4,3,"a",15),t.ALo(2,"async"),t.YNc(3,sn,4,0,"button",16),t.ALo(4,"async"),t.YNc(5,rn,4,0,"button",16),t.ALo(6,"async"),t.YNc(7,cn,4,0,"button",16),t.ALo(8,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!t.lcZ(2,4,e.view$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,6,e.view$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,8,e.view$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,10,e.view$))}}function mn(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"datetime"),t.ALo(3,"datetime"),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.AsE(" ",t.xi3(2,2,null==e?null:e.start,!1)," \u2013 ",t.lcZ(3,5,null==e?null:e.stop)," ")}}let pt=(()=>{class n{constructor(e,i,a,s,c,m,h,v){this.yamcs=i,this.dialog=a,this.messageService=s,this.route=c,this.router=m,this.authService=h,this.synchronizer=v,this.views$=new Z.X([]),this.view$=new Z.X(null),this.viewportRange$=new Z.X(null),this.bands=[],this.subscriptions=[],e.setTitle("Timeline Chart")}ngAfterViewInit(){const e=this.route.snapshot.queryParamMap,i=e.get("view");if(this.yamcs.yamcsClient.getTimelineViews(this.yamcs.instance).then(s=>{this.views$.next(s.views||[]);let c=null;for(const m of s.views||[])if(i===m.id){c=m;break}!c&&!i&&(c=s.views?.length?s.views[0]:null),c&&this.switchView(c)}),this.timeline=new B.TY(this.container.nativeElement),this.timeline.addViewportChangeListener(s=>{this.viewportRange$.next({start:new Date(s.start),stop:new Date(s.stop)})}),this.viewportRange$.pipe((0,ze.b)(400)).forEach(s=>{this.refreshData(),this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge",queryParams:{start:s.start.toISOString(),stop:s.stop.toISOString()}})}),e.get("start")&&e.get("stop")){const s=l.P6.toDate(e.get("start")),c=l.P6.toDate(e.get("stop"));this.timeline.setViewRange(s.getTime(),c.getTime())}else{const s=this.yamcs.getMissionTime();s.setUTCHours(0,0,0,0);const c=new Date(s.getTime());c.setUTCDate(s.getUTCDate()+1),this.timeline.setViewRange(s.getTime(),c.getTime())}const a=new B._G(this.timeline);a.time=this.yamcs.getMissionTime().getTime(),this.subscriptions.push(this.synchronizer.sync(()=>{a.time=this.yamcs.getMissionTime().getTime()})),new B.zp(this.timeline),this.refreshData()}refreshView(){const e=this.view$.value;e&&this.yamcs.yamcsClient.getTimelineView(this.yamcs.instance,e.id).then(i=>this.switchView(i)).catch(i=>this.messageService.showError(i))}switchView(e){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{view:e?.id||null},queryParamsHandling:"merge"}),this.view$.next(e);for(const i of this.timeline.getBands())this.timeline.removeChild(i);if(e){for(const i of e.bands||[])if("TIME_RULER"===i.type){const a=new je(this,i);this.bands.push(a),this.installBandListeners(a)}else if("ITEM_BAND"===i.type){const a=new H(this,i,this.dialog);this.bands.push(a),this.installBandListeners(a)}else if("SPACER"===i.type){const a=new B.jL(this.timeline);this.bands.push(a)}else if("COMMAND_BAND"===i.type){const a=new dt(this,i);this.bands.push(a),this.installBandListeners(a)}this.refreshData()}}installBandListeners(e){e.addHeaderClickListener(i=>{this.dialog.open(R,{width:"70%",height:"100%",autoFocus:!1,position:{right:"0"},panelClass:"dialog-full-size",data:{band:i.band.data.band}}).afterClosed().subscribe(c=>{c&&this.refreshView()})})}refreshData(){const e=[],i=[],a=this.timeline.stop-this.timeline.start,s=this.timeline.start-a,c=this.timeline.stop+a;for(const m of this.bands)m instanceof H?(e.push(m),i.push(this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"rdb",band:m.data.band.id,start:new Date(s).toISOString(),stop:new Date(c).toISOString()}))):m instanceof dt&&(e.push(m),i.push(this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"commands",band:m.data.band.id,start:new Date(s).toISOString(),stop:new Date(c).toISOString()})));i.length&&Promise.all(i).then(m=>{for(let h=0;h<m.length;h++)this.populateItems(e[h],m[h].items||[])}).catch(m=>this.messageService.showError(m))}populateItems(e,i){const a=[];for(const s of i){const c=l.P6.toDate(s.start).getTime(),m=l.P6.convertProtoDurationToMillis(s.duration);a.push({start:c,stop:m?c+m:void 0,label:s.name,data:{item:s}})}e.items=a}openCreateItemDialog(){this.dialog.open(lt,{width:"600px"}).afterClosed().subscribe(()=>this.refreshData())}openEditViewDialog(e){this.dialog.open(Xe,{width:"70%",height:"100%",panelClass:"dialog-full-size",autoFocus:!1,position:{right:"0"},data:{view:e}}).afterClosed().subscribe(i=>{i&&this.switchView(i)})}toggleMove(e){this.timeline.panBy(e),window.clearInterval(this.moveInterval),this.moveInterval=window.setInterval(()=>this.timeline.panBy(e),50)}untoggleMove(){window.clearInterval(this.moveInterval),this.moveInterval=void 0}pageLeft(){const{start:e,stop:i}=this.timeline,a=this.timeline.distanceBetween(e,i);this.timeline.panBy(-a)}pageRight(){const{start:e,stop:i}=this.timeline,a=this.timeline.distanceBetween(e,i);this.timeline.panBy(a)}zoomIn(){this.timeline.zoomIn()}zoomOut(){this.timeline.zoomOut()}jumpToToday(){const e=this.yamcs.getMissionTime();e.setUTCHours(0,0,0,0);const i=e.getTime();e.setUTCDate(e.getUTCDate()+1);const a=e.getTime();this.timeline.setViewRange(i,a)}jumpToNow(){const e=this.yamcs.getMissionTime();this.timeline.panTo(e.getTime())}openJumpToDialog(){this.dialog.open(Ke,{width:"400px",data:{date:new Date(this.timeline.center)}}).afterClosed().subscribe(i=>{i&&this.timeline.panTo(i.date.getTime())})}saveSnapshot(){const e=document.createElement("a");try{e.href=this.timeline.toDataURL(),e.download="timeline_"+this.view$.value.name+"_export.png",document.body.appendChild(e),e.click()}finally{document.body.removeChild(e)}}mayControlTimeline(){return this.authService.getUser().hasSystemPrivilege("ControlTimeline")}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.timeline.disconnect()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(l.C8),t.Y36(_.uw),t.Y36(l.ez),t.Y36(g.gz),t.Y36(g.F0),t.Y36(We.e),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(i,a){if(1&i&&t.Gf(tn,7),2&i){let s;t.iGM(s=t.CRH())&&(a.container=s.first)}},decls:43,vars:8,consts:[[3,"noscroll"],[4,"ngIf"],[2,"height","24px","margin","6px"],[1,"ya-button",3,"click"],[1,"ya-button",3,"mousedown","mouseup","mouseleave"],[1,"timeline-container"],["container",""],[1,"info"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],[1,"ya-menu"],["viewMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","routerLink","/timeline/views/create",3,"queryParams"],["mat-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-button","","color","primary","routerLink","/timeline/views/create",3,"queryParams",4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary","routerLink","/timeline/views/create",3,"queryParams"],["mat-button","","color","primary",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page",0)(1,"app-instance-toolbar"),t._uU(2," Timeline Chart \xa0\xa0\xa0 "),t.YNc(3,an,11,7,"ng-container",1),t.ALo(4,"async"),t.YNc(5,ln,9,12,"ng-container",1),t.qZA(),t.TgZ(6,"div",2)(7,"button",3),t.NdJ("click",function(){return a.pageLeft()}),t.TgZ(8,"mat-icon"),t._uU(9,"west"),t.qZA()(),t.TgZ(10,"button",4),t.NdJ("mousedown",function(){return a.toggleMove(-50)})("mouseup",function(){return a.untoggleMove()})("mouseleave",function(){return a.untoggleMove()}),t.TgZ(11,"mat-icon"),t._uU(12,"chevron_left"),t.qZA()(),t.TgZ(13,"button",4),t.NdJ("mousedown",function(){return a.toggleMove(50)})("mouseup",function(){return a.untoggleMove()})("mouseleave",function(){return a.untoggleMove()}),t.TgZ(14,"mat-icon"),t._uU(15,"chevron_right"),t.qZA()(),t.TgZ(16,"button",3),t.NdJ("click",function(){return a.pageRight()}),t.TgZ(17,"mat-icon"),t._uU(18,"east"),t.qZA()(),t._uU(19," \xa0 "),t.TgZ(20,"button",3),t.NdJ("click",function(){return a.jumpToToday()}),t.TgZ(21,"mat-icon"),t._uU(22,"today"),t.qZA(),t._uU(23," Today "),t.qZA(),t.TgZ(24,"button",3),t.NdJ("click",function(){return a.jumpToNow()}),t.TgZ(25,"mat-icon"),t._uU(26,"my_location"),t.qZA()(),t.TgZ(27,"button",3),t.NdJ("click",function(){return a.openJumpToDialog()}),t.TgZ(28,"mat-icon"),t._uU(29,"directions"),t.qZA(),t._uU(30," Jump to... "),t.qZA(),t._uU(31," \xa0 "),t.TgZ(32,"button",3),t.NdJ("click",function(){return a.zoomIn()}),t.TgZ(33,"mat-icon"),t._uU(34,"add"),t.qZA()(),t.TgZ(35,"button",3),t.NdJ("click",function(){return a.zoomOut()}),t.TgZ(36,"mat-icon"),t._uU(37,"remove"),t.qZA()()(),t._UZ(38,"div",5,6),t.TgZ(40,"div",7),t.YNc(41,mn,4,7,"span",1),t.ALo(42,"async"),t.qZA()()),2&i&&(t.Q6J("noscroll",!0),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,4,a.views$)),t.xp6(2),t.Q6J("ngIf",a.mayControlTimeline()),t.xp6(36),t.Q6J("ngIf",t.lcZ(42,6,a.viewportRange$)))},dependencies:[u.sg,u.O5,g.rH,A.zs,A.lW,k.Hw,w.d,M.VK,M.OP,M.p6,C.a,x.k,u.Ov,l.id],styles:[".timeline-container[_ngcontent-%COMP%]{line-height:0;border-top:1px solid #d1d5da;position:absolute;inset:36px 0 0}.info[_ngcontent-%COMP%]{position:absolute;bottom:35px;right:0;padding:0 16px;opacity:.75;font-size:small}"],changeDetection:0})}return n})();function dn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",17)(1,"input",18),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(a?s.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())}}function un(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",19)(1,"input",20),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(a?m.selection.toggle(c):null)}),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))}}function pn(n,r){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Label"),t.qZA())}const _t=function(n){return{c:n}};function _n(n,r){if(1&n&&(t.TgZ(0,"td",22)(1,"a",23),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("routerLink",e.id)("queryParams",t.VKq(3,_t,i.yamcs.context)),t.xp6(1),t.hij(" ",e.name," ")}}function gn(n,r){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Description"),t.qZA())}function hn(n,r){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.description||"-"," ")}}function fn(n,r){1&n&&t._UZ(0,"th",25)}function bn(n,r){1&n&&t._UZ(0,"td",22)}function Tn(n,r){1&n&&t._UZ(0,"tr",26)}function Zn(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw(2);t.ekj("selected",i.selection.isSelected(e))}}function yn(n,r){if(1&n&&(t.TgZ(0,"table",4),t.ynx(1,5),t.YNc(2,dn,2,1,"th",6),t.YNc(3,un,2,1,"td",7),t.BQk(),t.ynx(4,8),t.YNc(5,pn,2,0,"th",9),t.YNc(6,_n,3,5,"td",10),t.BQk(),t.ynx(7,11),t.YNc(8,gn,2,0,"th",12),t.YNc(9,hn,2,1,"td",10),t.BQk(),t.ynx(10,13),t.YNc(11,fn,1,0,"th",14),t.YNc(12,bn,1,0,"td",10),t.BQk(),t.YNc(13,Tn,1,0,"tr",15),t.YNc(14,Zn,1,2,"tr",16),t.qZA()),2&n){const e=t.oxw();t.Q6J("dataSource",e.dataSource)("trackBy",e.tableTrackerFn),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}let gt=(()=>{class n{constructor(e,i,a){this.yamcs=e,this.messageService=a,this.displayedColumns=["select","name","description","actions"],this.tableTrackerFn=(s,c)=>c.id,this.dataSource=new d.by,this.selection=new O.O(this.tableTrackerFn,!0,[]),i.setTitle("Timeline Views"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){const i=this.dataSource.filteredData.length;return this.selection.selected.length===i&&i>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(e=>this.selection.select(e))}toggleOne(e){(!this.selection.isSelected(e)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(e)}deleteSelectedViews(){if(confirm("Are you sure you want to delete the selected views?"))for(const e of this.selection.selected)this.deleteView(e.id,!1)}deleteView(e,i=!0){(!i||confirm("Are you sure you want to delete the selected view?"))&&this.yamcs.yamcsClient.deleteTimelineView(this.yamcs.instance,e).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}refreshData(){this.yamcs.yamcsClient.getTimelineViews(this.yamcs.instance).then(e=>{this.selection.matchNewValues(e.views||[]),this.dataSource.data=e.views||[]}).catch(e=>this.messageService.showError(e))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(l.C8),t.Y36(y.Dx),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(i,a){if(1&i&&t.Gf(S.YE,5),2&i){let s;t.iGM(s=t.CRH())&&(a.sort=s.first)}},decls:13,vars:5,consts:[["mat-button","","color","primary","routerLink","create",3,"queryParams"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource","trackBy",4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Views \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create view "),t.qZA(),t.TgZ(7,"button",1),t.NdJ("click",function(){return a.deleteSelectedViews()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t._uU(10," Delete "),t.qZA()(),t.TgZ(11,"div",2),t.YNc(12,yn,15,4,"table",3),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("queryParams",t.VKq(3,_t,a.yamcs.context)),t.xp6(4),t.Q6J("disabled",!a.isGroupDeleteEnabled()),t.xp6(5),t.Q6J("ngIf",a.dataSource))},dependencies:[u.O5,g.rH,T.O_,T.D5,T.fo,A.zs,A.lW,k.Hw,S.YE,S.nU,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,C.a,x.k],encapsulation:2,changeDetection:0})}return n})();const Cn=function(n){return{c:n}};let ht=(()=>{class n{constructor(e,i,a,s,c){this.yamcs=a,this.messageService=s,this.router=c,e.setTitle("Configure Command Band"),this.form=i.group({name:["",[o.kI.required]],description:"",properties:i.group({})})}onConfirm(){const e=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:e.name,description:e.description,type:"COMMAND_BAND",shared:!0,properties:e.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(i=>this.messageService.showError(i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(o.QS),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:29,vars:5,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Create band "),t.qZA(),t._UZ(3,"app-create-band-wizard-step",0),t.TgZ(4,"div",1)(5,"form",2)(6,"label"),t._uU(7," Label "),t.TgZ(8,"span",3),t._uU(9,"(required)"),t.qZA(),t._UZ(10,"br")(11,"input",4),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t.TgZ(15,"span",3),t._uU(16,"(optional)"),t.qZA(),t._UZ(17,"br")(18,"textarea",5),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",6),t._UZ(21,"mat-divider"),t.qZA()(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.TgZ(24,"div",7)(25,"button",8),t._uU(26,"Cancel"),t.qZA(),t.TgZ(27,"button",9),t.NdJ("click",function(){return a.onConfirm()}),t._uU(28,"CREATE"),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(20),t.Q6J("queryParams",t.VKq(3,Cn,a.yamcs.context)),t.xp6(2),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,w.d,C.a,x.k,I],encapsulation:2,changeDetection:0})}return n})();const xn=function(n){return{c:n}};const wn=function(n){return{c:n}};const vn=function(n){return{c:n}};const An=[{path:"",canActivate:[j.r,Yt._],canActivateChild:[j.q],runGuardsAndResolvers:"always",component:Qt.K,children:[{path:"",pathMatch:"full",redirectTo:"chart"},{path:"chart",component:pt},{path:"views",pathMatch:"full",component:gt},{path:"views/create",pathMatch:"full",component:it},{path:"views/:view",pathMatch:"full",component:ct},{path:"bands",pathMatch:"full",component:tt},{path:"bands/create",pathMatch:"full",component:et},{path:"bands/create/item-band",pathMatch:"full",component:(()=>{class n{constructor(e,i,a,s,c){this.yamcs=a,this.messageService=s,this.router=c,e.setTitle("Configure Item Band"),this.form=i.group({name:["",[o.kI.required]],description:"",properties:i.group({frozen:[f.frozen.defaultValue,[o.kI.required]],itemBackgroundColor:[f.itemBackgroundColor.defaultValue,[o.kI.required]],itemBorderColor:[f.itemBorderColor.defaultValue,[o.kI.required]],itemBorderWidth:[f.itemBorderWidth.defaultValue,[o.kI.required]],itemCornerRadius:[f.itemCornerRadius.defaultValue,[o.kI.required]],itemHeight:[f.itemHeight.defaultValue,[o.kI.required]],itemMarginLeft:[f.itemMarginLeft.defaultValue,[o.kI.required]],itemTextColor:[f.itemTextColor.defaultValue,[o.kI.required]],itemTextOverflow:[f.itemTextOverflow.defaultValue,[o.kI.required]],itemTextSize:[f.itemTextSize.defaultValue,[o.kI.required]],marginBottom:[f.marginBottom.defaultValue,[o.kI.required]],marginTop:[f.marginTop.defaultValue,[o.kI.required]],multiline:[f.multiline.defaultValue,[o.kI.required]],spaceBetweenItems:[f.spaceBetweenItems.defaultValue,[o.kI.required]],spaceBetweenLines:[f.spaceBetweenLines.defaultValue,[o.kI.required]]}),tags:[[],[]]})}onConfirm(){const e=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:e.name,description:e.description,type:"ITEM_BAND",shared:!0,tags:e.tags,properties:e.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(i=>this.messageService.showError(i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(o.QS),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:37,vars:6,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],["formControlName","description","rows","3"],["formControlName","tags"],[1,"section-divider"],[3,"form"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Create band "),t.qZA(),t._UZ(3,"app-create-band-wizard-step",0),t.TgZ(4,"div",1)(5,"form",2)(6,"label"),t._uU(7," Label "),t.TgZ(8,"span",3),t._uU(9,"(required)"),t.qZA(),t._UZ(10,"br")(11,"input",4),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t.TgZ(15,"span",3),t._uU(16,"(optional)"),t.qZA(),t._UZ(17,"br")(18,"textarea",5),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"label"),t._uU(21," Tags"),t._UZ(22,"br")(23,"app-tag-select",6),t.qZA(),t._UZ(24,"br"),t.TgZ(25,"div",7),t._UZ(26,"mat-divider"),t.qZA(),t.TgZ(27,"h4"),t._uU(28,"Styles"),t.qZA(),t._UZ(29,"app-item-band-styles",8),t.qZA(),t.TgZ(30,"p"),t._uU(31,"\xa0"),t.qZA(),t.TgZ(32,"div",9)(33,"button",10),t._uU(34,"Cancel"),t.qZA(),t.TgZ(35,"button",11),t.NdJ("click",function(){return a.onConfirm()}),t._uU(36,"CREATE"),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(24),t.Q6J("form",a.form),t.xp6(4),t.Q6J("queryParams",t.VKq(4,xn,a.yamcs.context)),t.xp6(2),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,w.d,C.a,x.k,I,G,P],encapsulation:2,changeDetection:0})}return n})()},{path:"bands/create/spacer",pathMatch:"full",component:(()=>{class n{constructor(e,i,a,s,c){this.yamcs=a,this.messageService=s,this.router=c,e.setTitle("Configure Spacer"),this.form=i.group({name:"",description:"",properties:i.group({height:[Q.height.defaultValue,[o.kI.required]]})})}onConfirm(){const e=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:e.name,description:e.description,type:"SPACER",shared:!0,properties:e.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(i=>this.messageService.showError(i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(o.QS),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:32,vars:6,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[3,"form"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Create band "),t.qZA(),t._UZ(3,"app-create-band-wizard-step",0),t.TgZ(4,"div",1)(5,"form",2)(6,"label"),t._uU(7," Label "),t.TgZ(8,"span",3),t._uU(9,"(optional)"),t.qZA(),t._UZ(10,"br")(11,"input",4),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t.TgZ(15,"span",3),t._uU(16,"(optional)"),t.qZA(),t._UZ(17,"br")(18,"textarea",5),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",6),t._UZ(21,"mat-divider"),t.qZA(),t.TgZ(22,"h4"),t._uU(23,"Styles"),t.qZA(),t._UZ(24,"app-spacer-styles",7),t.qZA(),t.TgZ(25,"p"),t._uU(26,"\xa0"),t.qZA(),t.TgZ(27,"div",8)(28,"button",9),t._uU(29,"Cancel"),t.qZA(),t.TgZ(30,"button",10),t.NdJ("click",function(){return a.onConfirm()}),t._uU(31,"CREATE"),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(19),t.Q6J("form",a.form),t.xp6(4),t.Q6J("queryParams",t.VKq(4,wn,a.yamcs.context)),t.xp6(2),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.rH,w.d,C.a,x.k,I,X],encapsulation:2,changeDetection:0})}return n})()},{path:"bands/create/time-ruler",pathMatch:"full",component:(()=>{class n{constructor(e,i,a,s,c){this.yamcs=a,this.messageService=s,this.router=c,e.setTitle("Configure Time Ruler"),this.form=i.group({name:["",[o.kI.required]],description:"",properties:i.group({timezone:["UTC",[o.kI.required]]})})}onConfirm(){const e=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:e.name,description:e.description,type:"TIME_RULER",shared:!0,properties:e.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(i=>this.messageService.showError(i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(y.Dx),t.Y36(o.QS),t.Y36(l.C8),t.Y36(l.ez),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:32,vars:5,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],["formGroupName","properties"],["formControlName","timezone"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(i,a){1&i&&(t.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),t._uU(2," Create band "),t.qZA(),t._UZ(3,"app-create-band-wizard-step",0),t.TgZ(4,"div",1)(5,"form",2)(6,"label"),t._uU(7," Label "),t.TgZ(8,"span",3),t._uU(9,"(required)"),t.qZA(),t._UZ(10,"br")(11,"input",4),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t.TgZ(15,"span",3),t._uU(16,"(optional)"),t.qZA(),t._UZ(17,"br")(18,"textarea",5),t.qZA(),t.ynx(19,6),t._UZ(20,"br"),t.TgZ(21,"label"),t._uU(22," Timezone"),t._UZ(23,"br")(24,"ya-timezone-select",7),t.qZA(),t.BQk(),t.qZA(),t.TgZ(25,"p"),t._uU(26,"\xa0"),t.qZA(),t.TgZ(27,"div",8)(28,"button",9),t._uU(29,"Cancel"),t.qZA(),t.TgZ(30,"button",10),t.NdJ("click",function(){return a.onConfirm()}),t._uU(31,"CREATE"),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(23),t.Q6J("queryParams",t.VKq(3,vn,a.yamcs.context)),t.xp6(2),t.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,g.rH,l.Q1,C.a,x.k,I],encapsulation:2,changeDetection:0})}return n})()},{path:"bands/create/command-band",pathMatch:"full",component:ht},{path:"bands/:band",pathMatch:"full",component:ot},{path:"items",pathMatch:"full",component:mt},{path:"items/:item",pathMatch:"full",component:st}]}];let Un=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(An),g.Bz]})}return n})(),qn=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[Zt.m,Un]})}return n})();t.B6R(R,[u.O5,o._Y,o.JL,o.sg,_.ZT,D.Ye,D.rD,L,z,K,at],[u.Ov])}}]);